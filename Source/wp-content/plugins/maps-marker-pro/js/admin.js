function editMapActions(){jQuery(document).ready(function(p){var t=p("#mapSettings").serialize(),n=wp.media({title:mmpAdminL10n.map.chooseGpx,button:{text:mmpAdminL10n.map.choose},library:{type:["application/gpx","application/gpx+xml"]},multiple:!1}),d=p("#icons").dialog({autoOpen:!1,modal:!0,draggable:!1,resizable:!1,title:mmpAdminL10n.map.changeFilterIcon,buttons:[{text:mmpAdminL10n.map.close,click:function(){p(this).dialog("close")}}],open:function(){var e=p(window).width()-20,t=p(window).height()-20;p(this).dialog("option","width",e<600?e:600),p(this).dialog("option","height",t<600?t:600),p(".ui-widget-overlay").bind("click",function(){p(d).dialog("close")})}}),c=p("#editShape").dialog({autoOpen:!1,modal:!0,draggable:!0,resizable:!1,title:mmpAdminL10n.map.editShape,buttons:[{id:"mmp-custom-layer-cancel",text:"Cancel",click:function(){D(),p(this).dialog("close")}},{id:"mmp-custom-layer-save",text:"Save",click:function(){C(),p(this).dialog("close")}}],open:function(){var e=p(window).width()-20,t=p(window).height()-20;p(this).dialog("option","width",e<300?e:300),p(this).dialog("option","height",t<500?t:500);var n=mmpAdmin.geoJson.getLayer(p("#shapeId").val());void 0!==n?(T(n.options),p("#shapeBackup").val(JSON.stringify(S())),p(".ui-widget-overlay").bind("click",function(){D(),c.dialog("close")})):c.dialog("close")},create:function(){p(this).closest("div.ui-dialog").find(".ui-dialog-titlebar-close").click(function(){D()})}}),e=new MMP_Geocoding("map",p("#geocodingProvider").val(),mmpGeocoding,400,3);function i(e){p(".mmp-tab").each(function(){p(this).hide()}),p(".mmp-tablink").each(function(){p(this).removeClass("active")}),p("#mmp-"+e.attr("id")+"-settings").show(),e.addClass("active"),function(e){if(void 0===mmpAdmin.map.pm)return;e?mmpAdmin.map.pm.addControls({position:"topleft",drawMarker:!1}):mmpAdmin.map.pm.removeControls()}("tabDraw"===e.attr("id"))}function o(){var e=p("#advancedSettings").prop("checked");p(".mmp-advanced").each(function(){e?p(this).show():p(this).hide()})}function a(){p("#filtersAllMarkers").prop("checked")?p("#filtersWrap").hide():p("#filtersWrap").show()}function s(e){mmpAdmin.settings.panelColor=e,mmpAdmin.loadPanel()}function r(e){mmpAdmin.settings.gpxTrackColor=e,mmpAdmin.setTrackStyle()}function l(e){mmpAdmin.settings.gpxWaypointsColor=e,mmpAdmin.setWaypointStyle()}function u(e){mmpAdmin.settings.gpxWaypointsFillColor=e,mmpAdmin.setWaypointStyle()}function h(e){mmpAdmin.settings.gpxChartLocatorColor=e,mmpAdmin.setChartStyle()}function m(e){mmpAdmin.settings.gpxChartLocatorFillColor=e,mmpAdmin.setChartStyle()}function f(){var t=[];p(".mmp-basemap").each(function(){t.push(p(this).data("id").toString())}),p("#basemapsList option").each(function(){var e=-1!==p.inArray(p(this).val().toString(),t);p(this).prop("disabled",e)}),p("#basemapsList option").each(function(){if(!p(this).prop("disabled"))return p(this).prop("selected",!0),!1}),p("#basemapsList option:enabled").length?p("#basemapsAdd").prop("disabled",!1):p("#basemapsAdd").prop("disabled",!0)}function g(){var t=[];p("#basemapList li").each(function(e){t.push(p(this).data("id").toString())}),mmpAdmin.settings.basemaps=t,mmpAdmin.loadBasemaps(),mmpAdmin.loadControls()}function v(){var t=[];p(".mmp-overlay").each(function(){t.push(p(this).data("id").toString())}),p("#overlaysList option").each(function(){var e=-1!==p.inArray(p(this).val().toString(),t);p(this).prop("disabled",e)}),p("#overlaysList option").each(function(){if(!p(this).prop("disabled"))return p(this).prop("selected",!0),!1}),p("#overlaysList option:enabled").length?p("#overlaysAdd").prop("disabled",!1):p("#overlaysAdd").prop("disabled",!0)}function y(){var t=[];p("#overlayList li").each(function(e){t.push(p(this).data("id").toString())}),mmpAdmin.settings.overlays=t,mmpAdmin.loadOverlays(),mmpAdmin.loadControls()}function b(){var t=[];p(".mmp-filter").each(function(){t.push(p(this).data("id"))}),p("#filtersMapList option").each(function(){var e=p(this).val()==mmpAdmin.id||-1!==p.inArray(parseInt(p(this).val()),t);p(this).prop("disabled",e)});var e=!1;p("#filtersMapList option").each(function(){if(!p(this).prop("disabled"))return e=!0,p(this).prop("selected",!0),!1}),e?p("#filtersAdd").prop("disabled",!1):(p("#filtersAdd").prop("disabled",!0),p("#filtersMapList option").prop("selected",!1)),p("#filtersMapList").select2({width:"300px"})}function _(){var n={};p("#filterList li").each(function(e){var t=p(this).data("id");n[t]={index:e,active:p('input[name="filtersList['+t+'][active]"]').prop("checked"),name:p('input[name="filtersList['+t+'][name]"]').val(),icon:p('input[name="filtersList['+t+'][icon]"]').val()}}),mmpAdmin.settings.filtersDetails=n}function w(){mmpAdmin.map.pm.setPathOptions({stroke:p("#drawStroke").prop("checked"),color:p("#drawStrokeColor").val(),weight:parseInt(p("#drawStrokeWeight").val()),opacity:parseFloat(p("#drawStrokeOpacity").val()),lineCap:p("#drawLineCap").val(),lineJoin:p("#drawLineJoin").val(),fill:p("#drawFill").prop("checked"),fillColor:p("#drawFillColor").val(),fillOpacity:parseFloat(p("#drawFillOpacity").val()),fillRule:p("#drawFillRule").val()})}function x(){p("#geoJson").empty(),mmpAdmin.geoJson.eachLayer(k)}function A(e){var t="Other";return e instanceof L.Circle?t="Circle":e instanceof L.Rectangle?t="Rectangle":e instanceof L.Polygon?t="Polygon":e instanceof L.Polyline&&(t="Polyline"),t}function k(e){var t=L.stamp(e),n=A(e),i=p('<li class="mmp-shape" data-id="'+t+'"></li>'),o=p("<div></div>");i.append(o);var a=p('<img class="mmp-align-middle" src="'+mmpAdminVars.pluginUrl+"images/icons/geojson-"+n.toLowerCase()+'.png" />');o.append(a);var s=p('<input type="text" class="mmp-align-middle" value="'+e.options.name+'" />');s.change(function(){var e=p(this).parent().parent().data("id"),t=mmpAdmin.geoJson.getLayer(e);void 0!==t&&(t.options.name=p(this).val())}),o.append(" ").append(s);var r=p('<img class="mmp-align-middle mmp-clickable" src="'+mmpAdminVars.pluginUrl+'images/icons/jump-to.png" />');r.click(function(){mmpAdmin.fitGeoJson(t)}),o.append(" ").append(r);var l=p('<img class="mmp-align-middle mmp-clickable" src="'+mmpAdminVars.pluginUrl+'images/icons/edit-layer.png" />');l.click(function(){p("#shapeId").val(t),c.dialog("open")}),o.append(" ").append(l),p("#geoJson").append(i)}function C(){var e=mmpAdmin.geoJson.getLayer(p("#shapeId").val());void 0!==e&&e.setStyle(S())}function S(){return{stroke:p("#editDrawStroke").prop("checked"),color:p("#editDrawStrokeColor").val(),weight:p("#editDrawStrokeWeight").val(),opacity:p("#editDrawStrokeOpacity").val(),lineCap:p("#editDrawLineCap").val(),lineJoin:p("#editDrawLineJoin").val(),fill:p("#editDrawFill").prop("checked"),fillColor:p("#editDrawFillColor").val(),fillOpacity:p("#editDrawFillOpacity").val(),fillRule:p("#editDrawFillRule").val()}}function T(e){p("#editDrawStroke").prop("checked",e.stroke),p("#editDrawStrokeColor").spectrum("set",e.color),p("#editDrawStrokeWeight").val(e.weight),p("#editDrawStrokeOpacity").val(e.opacity),p('#editDrawLineCap option[value="'+e.lineCap+'"]').prop("selected",!0),p('#editDrawLineJoin option[value="'+e.lineJoin+'"]').prop("selected",!0),p("#editDrawFill").prop("checked",e.fill),p("#editDrawFillColor").spectrum("set",e.fillColor),p("#editDrawFillOpacity").val(e.fillOpacity),p('#editDrawFillRule option[value="'+e.fillRule+'"]').prop("selected",!0)}function D(){T(JSON.parse(p("#shapeBackup").val())),C()}n.on("select",function(){var e=n.state().get("selection").first().toJSON();p("#gpxUrl").val(e.url),p("#updateGpx").click()}),mmpAdmin.on("basemapsloaded",function(e){var n;p("input[name=basemapDefault]:checked").length||(p.each(e,function(e,t){if(mmpAdmin.map.hasLayer(t))return n=e,!1}),n&&p(".mmp-basemap").each(function(e,t){if(p("input[type=text]",t).val()===n)return p("input[type=radio]",t).prop("checked",!0),!1}))}),mmpAdmin.on("maploaded",function(){mmpAdmin.map.on("moveend",function(){p("#lat").val(mmpAdmin.map.getCenter().lat.toFixed(6)),p("#lng").val(mmpAdmin.map.getCenter().lng.toFixed(6))}),mmpAdmin.map.once("moveend",function(){t=p("#mapSettings").serialize()}),mmpAdmin.map.on("zoomend",function(){p("#zoom").val(mmpAdmin.map.getZoom().toFixed(1))}),mmpAdmin.map.on("baselayerchange",function(n){p(".mmp-basemap").each(function(e,t){if(p("input[type=text]",t).val()===n.name)return p("input[type=radio]",t).prop("checked",!0),!1})}),mmpAdmin.map.on("overlayadd",function(n){p(".mmp-overlay").each(function(e,t){if(p("input[type=text]",t).val()===n.name)return p("input[type=checkbox]",t).prop("checked",!0),!1})}),mmpAdmin.map.on("overlayremove",function(n){p(".mmp-overlay").each(function(e,t){if(p("input[type=text]",t).val()===n.name)return p("input[type=checkbox]",t).prop("checked",!1),!1})}),mmpAdmin.map.on("pm:create",function(e){var t=A(e.layer).toLowerCase();e.layer.options.name=mmpAdminL10n.geoJson[t],mmpAdmin.geoJson.addLayer(e.layer),x()}),mmpAdmin.map.on("pm:remove",function(e){mmpAdmin.geoJson.removeLayer(e.layer),x()}),mmpAdmin.map.on("pm:cut",function(n){mmpAdmin.geoJson.removeLayer(n.originalLayer),n.layer.eachLayer(function(e){A(e).toLowerCase();var t=n.originalLayer.options.name||"";e.options.name=t,mmpAdmin.geoJson.addLayer(e)}),x()}),a(),w()}),mmpAdmin.on("geojsonloaded",function(){x()}),p("#chooseGpx").click(function(){n.open()}),p("#tabMap, #tabLayers, #tabControl, #tabMarker, #tabFilter, #tabList, #tabInteraction, #tabGpx, #tabDraw").click(function(){i(p(this))}),p("#tabMap").trigger("click"),p("#advancedSettings").change(function(){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_advanced_settings_state",nonce:p("#nonce").val(),state:p("#advancedSettings").prop("checked")?"advanced":"basic"},beforeSend:o})}),p(".mmp-delete").click(function(e){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map_direct",nonce:p("#nonce").val(),con:0,id:p("#id").val()}}).done(function(e){if(e.success){if(!confirm(e.response.message))return;p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map_direct",nonce:p("#nonce").val(),con:1,id:e.response.id}}).done(function(e){e.success&&(t=p("#mapSettings").serialize(),window.location.href=mmpAdminVars.adminUrl+"admin.php?page=mapsmarkerpro_maps")})}})}),p("#panelColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(e){p(this).data("changed",!1),p("#panel").prop("checked",!0),p("#panel").trigger("change")},move:function(e){s(e.toHexString("hex3"))},change:function(e){p(this).data("changed",!0),s(e.toHexString("hex3"))},hide:function(e){p(this).data("changed")?s(e.toHexString("hex3")):s(p(this).val())}}),p("#gpxTrackColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(e){p(this).data("changed",!1)},move:function(e){r(e.toHexString("hex3"))},change:function(e){p(this).data("changed",!0),r(e.toHexString("hex3"))},hide:function(e){p(this).data("changed")?r(e.toHexString("hex3")):r(p(this).val())}}),p("#gpxWaypointsColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(e){p(this).data("changed",!1),p("#gpxWaypoints").prop("checked",!0),p("#gpxWaypoints").trigger("change"),p("#gpxWaypointsStroke").prop("checked",!0),p("#gpxWaypointsStroke").trigger("change")},move:function(e){l(e.toHexString("hex3"))},change:function(e){p(this).data("changed",!0),l(e.toHexString("hex3"))},hide:function(e){p(this).data("changed")?l(e.toHexString("hex3")):l(p(this).val())}}),p("#gpxWaypointsFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(e){p(this).data("changed",!1),p("#gpxWaypoints").prop("checked",!0),p("#gpxWaypoints").trigger("change")},move:function(e){u(e.toHexString("hex3"))},change:function(e){p(this).data("changed",!0),u(e.toHexString("hex3"))},hide:function(e){p(this).data("changed")?u(e.toHexString("hex3")):u(p(this).val())}}),p("#mapSettings").submit(function(e){e.preventDefault(),e.stopPropagation(),p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_map",settings:p("#mapSettings").serialize(),geoJson:JSON.stringify(function(){var o={type:"FeatureCollection",features:[]};return mmpAdmin.geoJson.eachLayer(function(e){var t=e.toGeoJSON();void 0===t.properties&&(t.properties={}),e instanceof L.Circle?t.properties.radius=e.getRadius():e instanceof L.Rectangle&&(t.properties.rectangle=!0);for(var n=["name","stroke","color","weight","opacity","lineCap","lineJoin","fill","fillColor","fillOpacity","fillRule"],i=0;i<n.length;i++)void 0!==e.options[n[i]]&&(t.properties[n[i]]=e.options[n[i]]);o.features.push(t)}),o}())},beforeSend:function(){!function(e){p("#save").prop("disabled",!0),p(e).addClass("mmp-button-loading")}(p("#save"))}}).done(function(e){e.success?(t=p("#mapSettings").serialize(),"new"==p("#id").val()?(localStorage.setItem("saved",!0),window.location.href=mmpAdminVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+e.response.id):p('<div class="notice notice-success"><p>'+e.response.message+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){p(this).remove()})):p('<div class="notice notice-error"><p>'+e.response+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){p(this).remove()})}).always(function(){!function(e){p(e).removeClass("mmp-button-loading"),p("#save").prop("disabled",!1)}(p("#save"))})}),p("#saveDefaultsLink").click(function(e){e.preventDefault(),e.stopPropagation(),p(this).hide(),p(".mmp-save-defaults").show()}),p("#saveDefaultsConfirm").click(function(e){p.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_map_defaults",settings:p("#mapSettings").serialize()},beforeSend:function(){p("#saveDefaultsConfirm").prop("disabled",!0),p("#saveDefaultsCancel").prop("disabled",!0),p(".mmp-save-defaults").addClass("mmp-save-defaults-loading")}}).always(function(){p(".mmp-save-defaults").removeClass("mmp-save-defaults-loading"),p(".mmp-save-defaults").fadeOut(500,function(){p("#saveDefaultsConfirm").prop("disabled",!1),p("#saveDefaultsCancel").prop("disabled",!1),p("#saveDefaultsLink").show()})})}),p("#saveDefaultsCancel").click(function(e){p(".mmp-save-defaults").hide(),p("#saveDefaultsLink").show()}),p("#fitMarkers").click(function(){mmpAdmin.fitVisibleMarkers()}),p("#name").change(function(){mmpAdmin.settings.name=p(this).val(),mmpAdmin.loadPanel()}),p("#width, input[name=widthUnit], #height, input[name=heightUnit]").change(function(){p("#widthUnitPct").prop("checked")&&100<p("#width").val()&&p("#width").val(100),mmpAdmin.settings.width=parseInt(p("#width").val()),mmpAdmin.settings.widthUnit=p("input[name=widthUnit]:checked").val(),mmpAdmin.settings.height=parseInt(p("#height").val()),mmpAdmin.settings.heightUnit=p("input[name=heightUnit]:checked").val(),mmpAdmin.setLayout()}),p("#lat, #lng").change(function(){var e=parseFloat(p("#lat").val()),t=parseFloat(p("#lng").val());mmpAdmin.map.panTo([e,t])}),p("#zoom, #minZoom, #maxZoom, #zoomStep").change(function(){mmpAdmin.map.options.minZoom=parseFloat(p("#minZoom").val()),mmpAdmin.map.options.maxZoom=parseFloat(p("#maxZoom").val()),mmpAdmin.map.options.zoomSnap=parseFloat(p("#zoomStep").val()),mmpAdmin.map.options.zoomDelta=parseFloat(p("#zoomStep").val()),mmpAdmin.map.setZoom(parseFloat(p("#zoom").val()))}),p("#maxBounds").change(function(){mmpAdmin.map.setMaxBounds(mmpAdmin.strToBounds(p("#maxBounds").val()))}),p("#restrictView").click(function(){p("#minZoom").val(mmpAdmin.map.getZoom()),mmpAdmin.map.options.minZoom=parseFloat(p("#minZoom").val()),p("#maxBounds").val(mmpAdmin.map.getBounds().toBBoxString()),mmpAdmin.map.setMaxBounds(mmpAdmin.strToBounds(p("#maxBounds").val()))}),p("#panel").change(function(){mmpAdmin.settings.panel=p(this).prop("checked"),mmpAdmin.loadPanel()}),p("#panelFs, #panelGeoJson, #panelKml, #panelGeoRss").change(function(){mmpAdmin.settings[p(this).attr("id")]=p(this).prop("checked"),mmpAdmin.loadPanel()}),p("#basemapList").sortable({handle:".mmp-handle",update:g}),p("#basemapsAdd").click(function(){!function(e,t){var n=p('<li class="mmp-basemap" data-id="'+e+'"></li>'),i=p("<div></div>");n.append(i);var o=p('<input type="hidden" name="basemaps[]" value="'+e+'" />');i.append(o);var a=p('<img class="mmp-handle mmp-align-middle" src="'+mmpAdminVars.pluginUrl+'images/icons/handle.png" />');i.append(a);var s=p('<input type="radio" name="basemapDefault" value="'+e+'" />');s.change(function(){mmpAdmin.settings.basemapDefault=p(this).val(),mmpAdmin.loadBasemaps(),mmpAdmin.loadControls()}),i.append(" ").append(s);var r=p('<input type="text" class="mmp-align-middle" value="'+t+'" disabled="disabled" />');i.append(" ").append(r);var l=p('<i class="dashicons dashicons-no mmp-remove-basemap"></i>');l.click(function(){p(this).parent().parent().remove(),f(),g()}),i.append(" ").append(l),p("#basemapList").append(n)}(p("#basemapsList").val(),p("#basemapsList option:checked").text()),f(),g()}),p(".mmp-remove-basemap").click(function(){p(this).parent().parent().remove(),f(),g()}),f(),p("input[name=basemapDefault]").change(function(){mmpAdmin.settings.basemapDefault=p(this).val(),mmpAdmin.loadBasemaps(),mmpAdmin.loadControls()}),p("#overlayList").sortable({handle:".mmp-handle",update:y}),p("#overlaysAdd").click(function(){!function(e,t){var n=p('<li class="mmp-overlay" data-id="'+e+'"></li>'),i=p("<div></div>");n.append(i);var o=p('<input type="hidden" name="overlays[]" value="'+e+'" />');i.append(o);var a=p('<img class="mmp-handle mmp-align-middle" src="'+mmpAdminVars.pluginUrl+'images/icons/handle.png" />');i.append(a);var s=p('<input type="checkbox" name="overlaysActive[]" value="'+e+'" />');s.change(function(){mmpAdmin.settings.overlaysActive=[],p('input[name="overlaysActive[]"]:checked').each(function(){mmpAdmin.settings.overlaysActive.push(p(this).val())}),mmpAdmin.loadOverlays(),mmpAdmin.loadControls()}),i.append(" ").append(s);var r=p('<input type="text" class="mmp-align-middle" value="'+t+'" disabled="disabled" />');i.append(" ").append(r);var l=p('<i class="dashicons dashicons-no mmp-remove-overlay"></i>');l.click(function(){p(this).parent().parent().remove(),v(),y()}),i.append(" ").append(l),p("#overlayList").append(n)}(p("#overlaysList").val(),p("#overlaysList option:checked").text()),v(),y()}),p(".mmp-remove-overlay").click(function(){p(this).parent().parent().remove(),v(),y()}),v(),p('input[name="overlaysActive[]"]').change(function(){mmpAdmin.settings.overlaysActive=[],p('input[name="overlaysActive[]"]:checked').each(function(){mmpAdmin.settings.overlaysActive.push(p(this).val())}),mmpAdmin.loadOverlays(),mmpAdmin.loadControls()}),p("input[name=attributionPosition], #attributionCondensed").change(function(){mmpAdmin.settings.attributionPosition=p("input[name=attributionPosition]:checked").val(),mmpAdmin.settings.attributionCondensed=p("#attributionCondensed").prop("checked"),mmpAdmin.loadControls()}),p("input[name=zoomControlPosition]").change(function(){mmpAdmin.settings.zoomControlPosition=p("input[name=zoomControlPosition]:checked").val(),mmpAdmin.loadControls()}),p("input[name=fullscreenPosition]").change(function(){mmpAdmin.settings.fullscreenPosition=p("input[name=fullscreenPosition]:checked").val(),mmpAdmin.loadControls()}),p("input[name=resetPosition], #resetOnDemand").change(function(){mmpAdmin.settings.resetPosition=p("input[name=resetPosition]:checked").val(),mmpAdmin.settings.resetOnDemand=p("#resetOnDemand").prop("checked"),mmpAdmin.loadControls()}),p("input[name=locatePosition]").change(function(){mmpAdmin.settings.locatePosition=p("input[name=locatePosition]:checked").val(),mmpAdmin.loadControls()}),p("input[name=scalePosition]").change(function(){mmpAdmin.settings.scalePosition=p("input[name=scalePosition]:checked").val(),mmpAdmin.loadControls()}),p("#scaleMaxWidth, #scaleMetric, #scaleImperial").change(function(){mmpAdmin.settings.scaleMaxWidth=p("#scaleMaxWidth").val(),mmpAdmin.settings.scaleMetric=p("#scaleMetric").prop("checked"),mmpAdmin.settings.scaleImperial=p("#scaleImperial").prop("checked"),mmpAdmin.loadControls()}),p("input[name=layersPosition], #layersCollapsed").change(function(){mmpAdmin.settings.layersPosition=p("input[name=layersPosition]:checked").val(),mmpAdmin.settings.layersCollapsed=p("#layersCollapsed").val(),mmpAdmin.loadControls()}),p("input[name=filtersPosition], #filtersCollapsed, #filtersOrderBy, #filtersSortOrder").change(function(){p("#filtersSortOrder").prop("disabled","custom"==p("#filtersOrderBy").val()),mmpAdmin.settings.filtersPosition=p("input[name=filtersPosition]:checked").val(),mmpAdmin.settings.filtersCollapsed=p("#filtersCollapsed").val(),mmpAdmin.settings.filtersOrderBy=p("#filtersOrderBy").val(),mmpAdmin.settings.filtersSortOrder=p("#filtersSortOrder").val(),mmpAdmin.loadControls()}),p("#filtersButtons, #filtersIcon, #filtersName, #filtersCount").change(function(){mmpAdmin.settings[p(this).attr("id")]=p(this).prop("checked"),mmpAdmin.loadControls()}),p("input[name=minimapPosition], #minimapWidth, #minimapHeight, #minimapCollapsedWidth, #minimapCollapsedHeight, #minimapZoomLevelOffset, #minimapZoomLevelFixed, #minimapMinimized").change(function(){mmpAdmin.settings.minimapPosition=p("input[name=minimapPosition]:checked").val(),mmpAdmin.settings.minimapWidth=p("#minimapWidth").val(),mmpAdmin.settings.minimapHeight=p("#minimapHeight").val(),mmpAdmin.settings.minimapCollapsedWidth=p("#minimapCollapsedWidth").val(),mmpAdmin.settings.minimapCollapsedHeight=p("#minimapCollapsedHeight").val(),mmpAdmin.settings.minimapZoomLevelOffset=parseFloat(p("#minimapZoomLevelOffset").val()),mmpAdmin.settings.minimapZoomLevelFixed=parseFloat(p("#minimapZoomLevelFixed").val())||null,mmpAdmin.settings.minimapMinimized=p("#minimapMinimized").val(),mmpAdmin.loadControls()}),p("#filtersAllMarkers").change(function(){p(this).prop("checked");mmpAdmin.settings.filtersAllMarkers=p(this).prop("checked"),a(),mmpAdmin.getMarkers()}),p("#updateFilters").click(function(){mmpAdmin.getMarkers()}),p("#filterList").sortable({handle:".mmp-handle"}),p("#filtersDefaultIconImage").click(function(){p("#iconTarget").val("default"),d.dialog("open")}),p(".mmp-filter .mmp-filter-icon").click(function(){p("#iconTarget").val(p(this).parent().parent().data("id")),d.dialog("open")}),p("#iconsList img").click(function(){var e=p("#iconTarget").val(),t=p(this).attr("src");p('input[name="filtersList['+e+'][icon]"]').val(t),p('.mmp-filter[data-id="'+e+'"] .mmp-filter-icon').attr("src",t),d.dialog("close"),_()}),p("#filtersAdd").click(function(){!function(e,t){t=t.replace(/\[(.+)\] /,"").replace(/ \((.+)\)$/,"");var n=p('<li class="mmp-filter" data-id="'+e+'"></li>'),i=p("<div></div>");n.append(i);var o=p('<img class="mmp-handle mmp-align-middle" src="'+mmpAdminVars.pluginUrl+'images/icons/handle.png" />');i.append(o);var a=p('<label class="mmp-align-middle"><div class="switch"><input type="checkbox" name="filtersList['+e+'][active]" checked="checked" /><span class="slider"></span></div></label>');i.append(" ").append(a);var s=p('<input type="hidden" name="filtersList['+e+'][icon]" value="'+mmpAdminVars.pluginUrl+'images/leaflet/marker.png" />');i.append(s);var r=p('<img class="mmp-filter-icon mmp-align-middle" src="'+mmpAdminVars.pluginUrl+'images/leaflet/marker.png" />');r.click(function(){p("#iconTarget").val(p(this).parent().parent().data("id")),d.dialog("open")}),i.append(" ").append(r);var l=p('<input type="text" class="mmp-align-middle" name="filtersList['+e+'][name]" value="'+t+'" />');i.append(" ").append(l);var c=p('<i class="dashicons dashicons-no mmp-remove-filter"></i>');c.click(function(){p(this).parent().parent().remove(),b(),_()}),i.append(" ").append(c),p("#filterList").append(n)}(p("#filtersMapList").val(),p("#filtersMapList option:checked").text()),b(),_()}),b(),p(".mmp-remove-filter").click(function(){p(this).parent().parent().remove(),b(),_()}),p("#markerOpacity").change(function(){Object.keys(mmpAdmin.markers).forEach(function(e){mmpAdmin.markers[e].setOpacity(parseFloat(p("#markerOpacity").val()))})}),p("#tooltip").change(function(){var t=p(this).prop("checked");Object.keys(mmpAdmin.markers).forEach(function(e){mmpAdmin.markers[e].unbindTooltip(),t&&void 0!==mmpAdmin.tooltips[e]&&mmpAdmin.markers[e].bindTooltip(mmpAdmin.tooltips[e],mmpAdmin.tooltip)})}),p("#tooltipDirection, #tooltipPermanent, #tooltipSticky, #tooltipOpacity").change(function(){mmpAdmin.tooltip.direction=p("#tooltipDirection").val(),mmpAdmin.tooltip.permanent=p("#tooltipPermanent").prop("checked"),mmpAdmin.tooltip.sticky=p("#tooltipSticky").prop("checked"),mmpAdmin.tooltip.opacity=parseFloat(p("#tooltipOpacity").val()),p("#tooltip").trigger("change")}),p("#popupCenterOnMap, #popupMarkername, #popupAddress, #popupCoordinates, #popupDirections, #popupMinWidth, #popupMaxWidth, #popupMaxHeight").change(function(){mmpAdmin.settings.popupCenterOnMap=p("#popupCenterOnMap").prop("checked"),mmpAdmin.settings.popupMarkername=p("#popupMarkername").prop("checked"),mmpAdmin.settings.popupAddress=p("#popupAddress").prop("checked"),mmpAdmin.settings.popupCoordinates=p("#popupCoordinates").prop("checked"),mmpAdmin.settings.popupDirections=p("#popupDirections").prop("checked"),mmpAdmin.settings.popupMinWidth=parseInt(p("#popupMinWidth").val()),mmpAdmin.settings.popupMaxWidth=parseInt(p("#popupMaxWidth").val()),mmpAdmin.settings.popupMaxHeight=parseInt(p("#popupMaxHeight").val()),mmpAdmin.setPopupStyle()}),p("#showCoverageOnHover, #spiderfyDistanceMultiplier").change(function(){mmpAdmin.cluster.remove(),mmpAdmin.cluster.options.showCoverageOnHover=p("#showCoverageOnHover").prop("checked"),mmpAdmin.cluster.options.spiderfyDistanceMultiplier=parseFloat(p("#spiderfyDistanceMultiplier").val()),mmpAdmin.cluster.addTo(mmpAdmin.map)}),p("#listSearch, #listIcon, #listName, #listPopup, #listAddress, #listDistance").change(function(){mmpAdmin.settings[p(this).attr("id")]=p(this).prop("checked"),mmpAdmin.getList()}),p("#listDir, #listFs").change(function(){mmpAdmin.settings.listDir=p("#listDir").prop("checked"),mmpAdmin.settings.listFs=p("#listFs").prop("checked"),mmpAdmin.getList()}),p("#listDistanceUnit, #listDistancePrecision, #listOrderBy, #listSortOrder, #listLimit, #listAction").change(function(){mmpAdmin.settings.listDistanceUnit=p("#listDistanceUnit").val(),mmpAdmin.settings.listDistancePrecision=parseInt(p("#listDistancePrecision").val()),mmpAdmin.settings.listOrderBy=p("#listOrderBy").val(),mmpAdmin.settings.listSortOrder=p("#listSortOrder").val(),mmpAdmin.settings.listLimit=parseInt(p("#listLimit").val()),mmpAdmin.settings.listAction=p("#listAction").val(),mmpAdmin.getList()}),p("#listOrderById, #listOrderByName, #listOrderByAddress, #listOrderByDistance, #listOrderByIcon, #listOrderByCreated, #listOrderByUpdated").change(function(){mmpAdmin.settings[p(this).attr("id")]=p(this).prop("checked"),mmpAdmin.getList()}),p("#responsive").change(function(){mmpAdmin.settings.responsive=p(this).prop("checked"),mmpAdmin.setLayout()}),p("#boxZoom").change(function(){p(this).prop("checked")?mmpAdmin.map.boxZoom.enable():mmpAdmin.map.boxZoom.disable()}),p("#doubleClickZoom").change(function(){p(this).prop("checked")?mmpAdmin.map.doubleClickZoom.enable():mmpAdmin.map.doubleClickZoom.disable()}),p("#dragging").change(function(){p(this).prop("checked")?mmpAdmin.map.dragging.enable():mmpAdmin.map.dragging.disable()}),p("#inertia, #inertiaDeceleration, #inertiaMaxSpeed").change(function(){mmpAdmin.map.options.inertia=p("#inertia").prop("checked"),mmpAdmin.map.options.inertiaDeceleration=parseInt(p("#inertiaDeceleration").val()),mmpAdmin.map.options.inertiaMaxSpeed=parseInt(p("#inertiaMaxSpeed").val())}),p("#keyboard").change(function(){p(this).prop("checked")?mmpAdmin.map.keyboard.enable():mmpAdmin.map.keyboard.disable()}),p("#scrollWheelZoom").change(function(){p(this).prop("checked")?mmpAdmin.map.scrollWheelZoom.enable():mmpAdmin.map.scrollWheelZoom.disable()}),p("#touchZoom").change(function(){p(this).prop("checked")?mmpAdmin.map.touchZoom.enable():mmpAdmin.map.touchZoom.disable()}),p("#updateGpx").click(function(){var e=p("#gpxUrl").val();(mmpAdmin.settings.gpxUrl=e)?mmpAdmin.getGpx():(mmpAdmin.gpx={},mmpAdmin.addGpx()),mmpAdmin.on("gpxloaded",function(e){void 0!==e[0]&&mmpAdmin.map.fitBounds(e[0].getBounds())})}),p("#gpxIcons").change(function(){mmpAdmin.settings.gpxIcons=p(this).prop("checked"),mmpAdmin.setTrackIcons()}),p("#gpxTrackWeight").change(function(){mmpAdmin.settings.gpxTrackWeight=parseInt(p(this).val()),mmpAdmin.setTrackStyle()}),p("#gpxTrackOpacity").change(function(){mmpAdmin.settings.gpxTrackOpacity=parseFloat(p(this).val()),mmpAdmin.setTrackStyle()}),p("#gpxMeta, #gpxMetaUnits").change(function(){mmpAdmin.settings.gpxMeta=p("#gpxMeta").prop("checked"),mmpAdmin.settings.gpxMetaUnits=p("#gpxMetaUnits").val(),mmpAdmin.setTrackMeta()}),p("#gpxMetaName, #gpxMetaDesc, #gpxMetaStart, #gpxMetaEnd, #gpxMetaTotal, #gpxMetaMoving, #gpxMetaDistance, #gpxMetaPace, #gpxMetaHeartRate, #gpxMetaElevation, #gpxMetaDownload").change(function(){mmpAdmin.settings[p(this).attr("id")]=p(this).prop("checked"),mmpAdmin.setTrackMeta()}),p("#gpxWaypoints").change(function(){mmpAdmin.settings.gpxWaypoints=p(this).prop("checked"),mmpAdmin.setWaypoints()}),p("#gpxWaypointsRadius").change(function(){mmpAdmin.settings.gpxWaypointsRadius=parseInt(p(this).val()),mmpAdmin.setWaypointStyle()}),p("#gpxWaypointsStroke").change(function(){mmpAdmin.settings.gpxWaypointsStroke=p(this).prop("checked"),mmpAdmin.setWaypointStyle()}),p("#gpxWaypointsWeight").change(function(){mmpAdmin.settings.gpxWaypointsWeight=parseInt(p(this).val()),mmpAdmin.setWaypointStyle()}),p("#gpxWaypointsFillOpacity").change(function(){mmpAdmin.settings.gpxWaypointsFillOpacity=parseFloat(p(this).val()),mmpAdmin.setWaypointStyle()}),p("#gpxChart").change(function(){mmpAdmin.settings.gpxChart=p(this).prop("checked"),mmpAdmin.loadChart(),mmpAdmin.settings.gpxChart&&mmpAdmin.addElevationChart()}),p("#gpxChartUnits").change(function(){mmpAdmin.settings.gpxChartUnits=p(this).val(),mmpAdmin.gpxChart.update()}),p("#gpxChartHeight").change(function(){var e=parseInt(p(this).val());mmpAdmin.settings.gpxChartHeight=e,void 0!==mmpAdmin.containers.chartWrap&&(mmpAdmin.containers.chartWrap.style.height=e+"px")}),p("#gpxChartBgColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){p(this).data("changed",!1)},move:function(e){mmpAdmin.settings.gpxChartBgColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){p(this).data("changed",!0),mmpAdmin.settings.gpxChartBgColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){p(this).data("changed")?mmpAdmin.settings.gpxChartBgColor=e.toRgbString():mmpAdmin.settings.gpxChartBgColor=p(this).val(),mmpAdmin.updateElevationChartThrottled()}}),p("#gpxChartGridLinesColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){p(this).data("changed",!1)},move:function(e){mmpAdmin.settings.gpxChartGridLinesColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){p(this).data("changed",!0),mmpAdmin.settings.gpxChartGridLinesColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){p(this).data("changed")?mmpAdmin.settings.gpxChartGridLinesColor=e.toRgbString():mmpAdmin.settings.gpxChartGridLinesColor=p(this).val(),mmpAdmin.updateElevationChartThrottled()}}),p("#gpxChartTicksFontColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){p(this).data("changed",!1)},move:function(e){mmpAdmin.settings.gpxChartTicksFontColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){p(this).data("changed",!0),mmpAdmin.settings.gpxChartTicksFontColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){p(this).data("changed")?mmpAdmin.settings.gpxChartTicksFontColor=e.toRgbString():mmpAdmin.settings.gpxChartTicksFontColor=p(this).val(),mmpAdmin.updateElevationChartThrottled()}}),p("#gpxChartLineWidth").change(function(){mmpAdmin.settings.gpxChartLineWidth=parseInt(p(this).val()),mmpAdmin.updateElevationChartThrottled()}),p("#gpxChartLineColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){p(this).data("changed",!1)},move:function(e){mmpAdmin.settings.gpxChartLineColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){p(this).data("changed",!0),mmpAdmin.settings.gpxChartLineColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){p(this).data("changed")?mmpAdmin.settings.gpxChartLineColor=e.toRgbString():mmpAdmin.settings.gpxChartLineColor=p(this).val(),mmpAdmin.updateElevationChartThrottled()}}),p("#gpxChartFill").change(function(){mmpAdmin.settings.gpxChartFill=p(this).prop("checked"),mmpAdmin.updateElevationChartThrottled()}),p("#gpxChartFillColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){p(this).data("changed",!1)},move:function(e){mmpAdmin.settings.gpxChartFillColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){p(this).data("changed",!0),mmpAdmin.settings.gpxChartFillColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){p(this).data("changed")?mmpAdmin.settings.gpxChartFillColor=e.toRgbString():mmpAdmin.settings.gpxChartFillColor=p(this).val(),mmpAdmin.updateElevationChartThrottled()}}),p("#gpxChartTooltipBgColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){p(this).data("changed",!1)},move:function(e){mmpAdmin.settings.gpxChartTooltipBgColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){p(this).data("changed",!0),mmpAdmin.settings.gpxChartTooltipBgColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){p(this).data("changed")?mmpAdmin.settings.gpxChartTooltipBgColor=e.toRgbString():mmpAdmin.settings.gpxChartTooltipBgColor=p(this).val(),mmpAdmin.updateElevationChartThrottled()}}),p("#gpxChartTooltipFontColor").spectrum({preferredFormat:"rgb",showAlpha:!0,showInput:!0,show:function(){p(this).data("changed",!1)},move:function(e){mmpAdmin.settings.gpxChartTooltipFontColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},change:function(e){p(this).data("changed",!0),mmpAdmin.settings.gpxChartTooltipFontColor=e.toRgbString(),mmpAdmin.updateElevationChartThrottled()},hide:function(e){p(this).data("changed")?mmpAdmin.settings.gpxChartTooltipFontColor=e.toRgbString():mmpAdmin.settings.gpxChartTooltipFontColor=p(this).val(),mmpAdmin.updateElevationChartThrottled()}}),p("#gpxChartLocator").change(function(){mmpAdmin.settings.gpxChartLocator=p(this).prop("checked")}),p("#gpxChartLocatorRadius").change(function(){mmpAdmin.settings.gpxChartLocatorRadius=parseInt(p(this).val()),mmpAdmin.setChartStyle()}),p("#gpxChartLocatorStroke").change(function(){mmpAdmin.settings.gpxChartLocatorStroke=p(this).prop("checked"),mmpAdmin.setChartStyle()}),p("#gpxChartLocatorColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){p(this).data("changed",!1)},move:function(e){h(e.toHexString("hex3"))},change:function(e){p(this).data("changed",!0),h(e.toHexString("hex3"))},hide:function(e){p(this).data("changed")?h(e.toHexString("hex3")):h(p(this).val())}}),p("#gpxChartLocatorWeight").change(function(){mmpAdmin.settings.gpxChartLocatorWeight=parseFloat(p(this).val()),mmpAdmin.setChartStyle()}),p("#gpxChartLocatorFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){p(this).data("changed",!1)},move:function(e){m(e.toHexString("hex3"))},change:function(e){p(this).data("changed",!0),m(e.toHexString("hex3"))},hide:function(e){p(this).data("changed")?m(e.toHexString("hex3")):m(p(this).val())}}),p("#gpxChartLocatorFillOpacity").change(function(){mmpAdmin.settings.gpxChartLocatorFillOpacity=parseFloat(p(this).val()),mmpAdmin.setChartStyle()}),p("#drawStrokeColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){p("#drawStroke").prop("checked",!0),p("#drawStroke").trigger("change")},change:function(e){p("#drawStrokeColor").val(e.toHexString("hex3")),w()}}),p("#editDrawStrokeColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){p("#editDrawStroke").prop("checked",!0),p("#editDrawStroke").trigger("change")},move:function(e){p("#editDrawStrokeColor").val(e.toHexString("hex3")),C()},change:function(e){p("#editDrawStrokeColor").val(e.toHexString("hex3")),C()},hide:function(e){p("#editDrawStrokeColor").val(e.toHexString("hex3")),C()}}),p("#drawFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){p("#drawFill").prop("checked",!0),p("#drawFill").trigger("change")},change:function(e){p("#drawFillColor").val(e.toHexString("hex3")),w()}}),p("#editDrawFillColor").spectrum({preferredFormat:"hex3",showInput:!0,show:function(){p("#editDrawFill").prop("checked",!0),p("#editDrawFill").trigger("change")},move:function(e){p("#editDrawFillColor").val(e.toHexString("hex3")),C()},change:function(e){p("#editDrawFillColor").val(e.toHexString("hex3")),C()},hide:function(e){p("#editDrawFillColor").val(e.toHexString("hex3")),C()}}),p("#drawStroke, #drawStrokeWeight, #drawStrokeOpacity, #drawLineCap, #drawLineJoin, #drawFill, #drawFillOpacity, #drawFillRule").change(function(){w()}),p("#editDrawStroke, #editDrawStrokeWeight, #editDrawStrokeOpacity, #editDrawLineCap, #editDrawLineJoin, #editDrawFill, #editDrawFillOpacity, #editDrawFillRule").change(function(){C()}),p("#geocodingProvider").change(function(){p("#address").algoliaAutocomplete("destroy"),p("#address").off("autocomplete:selected"),(e=new MMP_Geocoding("map",p("#geocodingProvider").val(),mmpGeocoding,400,3)).init()}),p(".mmp-shortcode").click(function(){p(this).select()}),o(),e.init(),window.onbeforeunload=function(){return t!==p("#mapSettings").serialize()?"":null},localStorage.getItem("saved")&&(p('<div class="notice notice-success"><p>'+mmpAdminL10n.map.saved+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){p(this).remove()}),localStorage.removeItem("saved")),p("#save").prop("disabled",!1)})}function listMapsActions(){jQuery(document).ready(function(s){function a(e){s("#pagination_top button, #pagination_bottom button").prop("disabled",e),s("#page_top, #page_bottom").prop("disabled",e),s("#perpage_top, #perpage_bottom").prop("disabled",e),s("#search_top, #search_bottom").prop("disabled",e)}function r(e,t,n,i,o){s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_map_list",nonce:s("#mapListNonce").val(),page:e,limit:t,search:n,sort:i,order:o},beforeSend:function(){a(!0),s("#bulkActionSubmit").prop("disabled",!0)}}).done(function(e){s("#mapcount_top, #mapcount_bottom").html(e.total),s("#previous_top, #previous_bottom").val(e.page-1),s("#next_top, #next_bottom").val(e.page+1),s("#last_top, #last_bottom").val(Math.ceil(e.total/e.limit)),s("#page_top, #page_bottom").val(e.page),s("#pagecount_top, #pagecount_bottom").html(Math.ceil(e.total/e.limit)),s("#perpage_top, #perpage_bottom").val(e.limit),s("#search_top, #search_botom").val(e.search),s("#map_list").html(e.html),s("#selectAll").click(function(){s('input[name="selected[]"]').each(function(e,t){s(t).prop("checked",s("#selectAll").prop("checked"))})}),s('input[name="selected[]"]').change(function(){var n=!0;s('input[name="selected[]"]').each(function(e,t){n=n&&s(t).prop("checked")}),s("#selectAll").prop("checked",n)}),s(".mmp-sortable").click(function(e){e.preventDefault(),e.stopPropagation();var t=s("#sortorder").val();t=s("#orderby").val()==s(this).data("orderby")&&"asc"==t?"desc":"asc",s("#sortorder").val(t),s("#orderby").val(s(this).data("orderby")),r(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}),s(".mmp-table td:nth-child(3)").mouseenter(function(){s(".mmp-action",s(this)).show()}),s(".mmp-table td:nth-child(3)").mouseleave(function(){s(".mmp-action",s(this)).hide()}),s(".mmp-delete").click(function(e){s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map",nonce:s("#mapListNonce").val(),con:0,id:s(this).data("id")},beforeSend:function(){a(!0),s("#bulkActionSubmit").prop("disabled",!0)}}).done(function(e){if(e.success){if(!confirm(e.data.message))return;s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_map",nonce:s("#mapListNonce").val(),con:1,id:e.data.id},beforeSend:function(){a(!0),s("#bulkActionSubmit").prop("disabled",!0)}}).done(function(e){e.success&&r(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}).always(function(){a(!1),s("#bulkActionSubmit").prop("disabled",!1)})}}).always(function(){a(!1),s("#bulkActionSubmit").prop("disabled",!1)})}),s(".mmp-shortcode").click(function(){s(this).select()}),s(".mmp-qrcode-link").click(function(e){e.preventDefault(),e.stopPropagation();var t=s(this).data("id"),n=s(this).data("url"),i=s("<div></div>").qrcode({width:256,height:256,text:n}),o=s("canvas",i)[0].toDataURL("image/png"),a=s("#qrcode_"+t);s("a",a).attr("href",o),s("img",a).attr("src",o),a.dialog({autoOpen:!0,modal:!0,draggable:!1,resizable:!1,title:mmpAdminL10n.maps.qrCode+" "+t,open:function(){s(".ui-widget-overlay").bind("click",function(){s(a).dialog("close")})}})})}).always(function(){a(!1),s("input[name=bulkAction]").prop("checked",!1)})}s("input[name=bulkAction]").change(function(){s("#bulkActionSubmit").prop("disabled",!1)}),s("#pagination_top button").click(function(){r(s(this).val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}),s("#pagination_bottom button").click(function(){r(s(this).val(),s("#perpage_bottom").val(),s("#search_bottom").val(),s("#orderby").val(),s("#sortorder").val())}),s("#page_top, #perpage_top").change(function(){r(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}),s("#page_bottom, #perpage_bottom").change(function(){r(s("#page_bottom").val(),s("#perpage_bottom").val(),s("#search_bottom").val(),s("#orderby").val(),s("#sortorder").val())}),s("#search_top").change(function(){r(1,s("#perpage_top").val(),s(this).val(),s("#orderby").val(),s("#sortorder").val())}),s("#search_bottom").change(function(){r(1,s("#perpage_bottom").val(),s(this).val(),s("#orderby").val(),s("#sortorder").val())}),s("#mapList").submit(function(e){var t;switch(e.preventDefault(),e.stopPropagation(),s("input[name=bulkAction]:checked").val()){case"duplicate":t=mmpAdminL10n.maps.bulkDuplicate;break;case"duplicate-assign":t=mmpAdminL10n.maps.bulkDuplicateAssign;break;case"delete":t=mmpAdminL10n.maps.bulkDelete;break;case"delete-assign":t=mmpAdminL10n.maps.bulkDeleteAssign.replace("{map}",s("#assignTarget").val());break;default:return}confirm(t)&&s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_bulk_action_maps",nonce:s("#bulkNonce").val(),data:s("#mapList").serialize()},beforeSend:function(){a(!0),s("#bulkActionSubmit").prop("disabled",!0)}}).done(function(e){r(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#orderby").val(),s("#sortorder").val())}).always(function(){a(!1),s("input[name=bulkAction]").prop("checked",!1)})}),r()})}function editMarkerActions(){var r=this;this.currentValues,this.map,this.basemaps={},this.marker,this.icon,jQuery(document).ready(function(a){function e(e){e=e||mmpL10n.popup.info,"undefined"!=typeof switchEditors&&(e=switchEditors.wpautop(e)),r.marker.setPopupContent(e)}function t(){window.open(a("#link").val(),"_blank")}function s(){"popup"===a("input[name=action]:checked").val()?(a("#link").val(""),a("#link_settings").hide(),a("#editor").show(),void 0!==r.marker&&(r.marker.bindPopup("",r.popup),r.marker.openPopup(),r.marker.off("click",t),e(a("#popup").val()))):(a("#editor").hide(),a("#link_settings").show(),void 0!==r.marker&&(r.marker.closePopup(),r.marker.unbindPopup(),r.marker.on("click",t)))}function n(n){var i=a("#icons").dialog({autoOpen:!1,modal:!0,draggable:!1,resizable:!1,title:"Change marker icon",buttons:[{text:"Close",click:function(){a(this).dialog("close")}}],open:function(){var e=a(window).width()-20,t=a(window).height()-20;a(this).dialog("option","width",e<600?e:600),a(this).dialog("option","height",t<600?t:600),a("#iconUpload").hide(),a(".ui-widget-overlay").bind("click",function(){a(i).dialog("close")})},close:function(){a("#uploadFile").val(""),a("#iconSearch").val(""),a("#iconList .mmp-radio").show()}});function o(){a("#iconTarget").val(a("input[name=icon]:checked").val()),r.icon.options.iconUrl=a("input[name=icon]:checked+img").attr("src"),r.marker.setIcon(r.icon),i.dialog("close")}r.currentValues=a("#markerSettings").serialize(),r.map=L.map("maps-marker-pro-marker",{center:[n.lat,n.lng],zoom:n.zoom,minZoom:0,maxZoom:23,zoomSnap:.5,zoomDelta:.5}),a.each(n.availableBasemaps,function(e,t){1==t.type?(t.options.minZoom=0,t.options.maxZoom=23,t.wms?r.basemaps[e]=L.tileLayer.wms(t.url,t.options):r.basemaps[e]=L.tileLayer(t.url,t.options)):2==t.type&&n.googleApiKey?r.basemaps[e]=new L.gridLayer.googleMutant(t.options):3==t.type&&n.bingApiKey?(t.options.bingMapsKey=n.bingApiKey,t.options.culture=n.bingCulture,t.options.minZoom=0,t.options.maxZoom=23,r.basemaps[e]=L.tileLayer.bing(t.options)):4==t.type&&n.hereAppId&&n.hereAppCode&&(t.options.appId=n.hereAppId,t.options.appCode=n.hereAppCode,t.options.minZoom=0,t.options.maxZoom=23,r.basemaps[e]=L.tileLayer.here(t.options))}),void 0===r.basemaps[n.basemap]&&(n.basemap="osm"),r.basemaps[n.basemap].addTo(r.map),r.icon=L.icon({iconUrl:n.icon?mmpAdminVars.iconsUrl+n.icon:mmpAdminVars.pluginUrl+"images/leaflet/marker.png",iconSize:[32,37],iconAnchor:[17,36],popupAnchor:[-1,-32],shadowUrl:mmpAdminVars.pluginUrl+"images/leaflet/marker-shadow.png",shadowSize:[41,41],shadowAnchor:[16,43]}),r.popup={maxWidth:400,minWidth:200,maxHeight:400,className:"mmp-popup"},r.marker=L.marker([n.lat,n.lng],{icon:r.icon,draggable:!0}).addTo(r.map),s(),r.map.on("click",function(e){r.marker.setLatLng(e.latlng),r.map.panTo(r.marker.getLatLng()),a("#lat").val(r.marker.getLatLng().lat.toFixed(6)),a("#lng").val(r.marker.getLatLng().lng.toFixed(6))}),r.map.on("zoomend",function(){a("#zoom").val(r.map.getZoom().toFixed(1))}),r.marker.on("dragend",function(){r.map.panTo(r.marker.getLatLng()),a("#lat").val(r.marker.getLatLng().lat.toFixed(6)),a("#lng").val(r.marker.getLatLng().lng.toFixed(6))}),a("#basemap").change(function(){a.each(r.basemaps,function(e,t){t.remove()}),void 0!==r.basemaps[a(this).val()]&&r.basemaps[a(this).val()].addTo(r.map)}),a("#lat, #lng").change(function(){var e=parseFloat(a("#lat").val()),t=parseFloat(a("#lng").val());r.marker.setLatLng([e,t]),r.map.panTo([e,t])}),a("#zoom").change(function(){r.map.setZoom(parseFloat(a("#zoom").val()))}),a("input[name=icon]").change(o),a("input[name=action]").change(s),a("#markerSettings").submit(function(e){e.preventDefault(),e.stopPropagation(),a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_marker",settings:a("#markerSettings").serialize()},beforeSend:function(){!function(e){a("#save").prop("disabled",!0),a(e).addClass("mmp-button-loading")}(a("#save"))}}).done(function(e){e.success?(r.currentValues=a("#markerSettings").serialize(),"new"==a("#id").val()?(localStorage.setItem("saved",!0),window.location.href=mmpAdminVars.adminUrl+"admin.php?page=mapsmarkerpro_marker&id="+e.response.id):a('<div class="notice notice-success"><p>'+e.response.message+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){a(this).remove()})):a('<div class="notice notice-error"><p>'+e.response+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){a(this).remove()})}).always(function(){!function(e){a(e).removeClass("mmp-button-loading"),a("#save").prop("disabled",!1)}(a("#save"))})}),a("#saveDefaultsLink").click(function(e){e.preventDefault(),e.stopPropagation(),a(this).hide(),a(".mmp-save-defaults").show()}),a("#saveDefaultsConfirm").click(function(e){a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_marker_defaults",settings:a("#markerSettings").serialize()},beforeSend:function(){a("#saveDefaultsConfirm").prop("disabled",!0),a("#saveDefaultsCancel").prop("disabled",!0),a(".mmp-save-defaults").addClass("mmp-save-defaults-loading")}}).always(function(){a(".mmp-save-defaults").removeClass("mmp-save-defaults-loading"),a(".mmp-save-defaults").fadeOut(500,function(){a("#saveDefaultsConfirm").prop("disabled",!1),a("#saveDefaultsCancel").prop("disabled",!1),a("#saveDefaultsLink").show()})})}),a("#saveDefaultsCancel").click(function(e){a(".mmp-save-defaults").hide(),a("#saveDefaultsLink").show()}),a("#assignedMaps").select2({width:"300px",placeholder:"Not assigned to any map",templateSelection:function(e){var t=a('<a href="'+mmpAdminVars.adminUrl+"admin.php?page=mapsmarkerpro_map&id="+e.id+'" target="_blank">edit</a>');return t.click(function(e){e.stopPropagation()}),a("<span>"+e.text+"</span>").append(" (").append(t).append(")")}}),a("#changeIcon").click(function(){i.dialog("open")}),a("#iconSearch").keyup(function(){var e=a(this).val();a('input[name="icon"]').each(function(){-1===a(this).val().toUpperCase().indexOf(e.toUpperCase())?a(this).parent().hide():a(this).parent().show()})}),a("#toggleUpload").click(function(){a("#iconUpload").toggle()}),a("#upload").click(function(){var e=a("#uploadFile").prop("files")[0];if(void 0!==e){var t=new FormData;t.append("action","mmp_icon_upload"),t.append("nonce",a("#upload_nonce").val()),t.append("upload",e),a.ajax({type:"POST",url:ajaxurl,processData:!1,contentType:!1,context:this,data:t}).done(function(e){e.success&&(a("#iconList").prepend('<label class="mmp-radio"><input type="radio" name="icon" value="'+e.response.name+'" checked="checked" /><img class="mmp-icon" src="'+e.response.url+'" /></label>'),a("input[name=icon]").change(o),a("input[name=icon]").trigger("change"))})}});var e=new MMP_Geocoding("marker",a("#geocodingProvider").val(),mmpGeocoding,400,3);e.init(),a("#geocodingProvider").change(function(){a("#address").algoliaAutocomplete("destroy"),a("#address").off("autocomplete:selected"),(e=new MMP_Geocoding("marker",a("#geocodingProvider").val(),mmpGeocoding,400,3)).init()}),localStorage.getItem("saved")&&(a('<div class="notice notice-success"><p>'+mmpAdminL10n.marker.saved+"</p></div>").insertBefore(".mmp-main").delay(5e3).fadeOut(500,function(){a(this).remove()}),localStorage.removeItem("saved")),a("#save").prop("disabled",!1)}a(".mmp-delete").click(function(e){confirm(mmpAdminL10n.marker.delete)&&a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_marker_direct",nonce:a("#nonce").val(),id:a("#id").val()}}).done(function(e){r.currentValues=a("#markerSettings").serialize(),window.location.href=mmpAdminVars.adminUrl+"admin.php?page=mapsmarkerpro_markers"})}),a("#popup").change(function(){e(a(this).val())}),a("#maps-marker-pro-marker").css({width:"100%",height:"500px"}),"undefined"!=typeof tinymce&&tinymce.on("AddEditor",function(e){e.editor.on("Change",function(){a("#popup").val(this.getContent()).trigger("change")})}),a.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_marker_settings",id:a("#id").val(),basemap:a("#basemap").val(),lat:a("#lat").val(),lng:a("#lng").val(),zoom:a("#zoom").val()}}).done(function(e){n(e.settings)}),window.onbeforeunload=function(){return r.currentValues!==a("#markerSettings").serialize()?"":null}})}function listMarkersActions(){jQuery(document).ready(function(s){function r(e){s("#pagination_top button, #pagination_bottom button").prop("disabled",e),s("#page_top, #page_bottom").prop("disabled",e),s("#perpage_top, #perpage_bottom").prop("disabled",e),s("#search_top, #search_bottom").prop("disabled",e),s("#map_top, #map_bottom").prop("disabled",e)}function l(e,t,n,i,o,a){s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_marker_list",nonce:s("#markerListNonce").val(),page:e,limit:t,search:n,map:i,sort:o,order:a},beforeSend:function(){r(!0),s("#bulkActionSubmit").prop("disabled",!0)}}).done(function(e){s("#markercount_top, #markercount_bottom").html(e.total),s("#previous_top, #previous_bottom").val(e.page-1),s("#next_top, #next_bottom").val(e.page+1),s("#last_top, #last_bottom").val(Math.ceil(e.total/e.limit)),s("#page_top, #page_bottom").val(e.page),s("#pagecount_top, #pagecount_bottom").html(Math.ceil(e.total/e.limit)),s("#perpage_top, #perpage_bottom").val(e.limit),s("#search_top, #search_bottom").val(e.search),s("#marker_list").html(e.html),s("#selectAll").click(function(){s('input[name="selected[]"]').each(function(e,t){s(t).prop("checked",s("#selectAll").prop("checked"))})}),s('input[name="selected[]"]').change(function(){var n=!0;s('input[name="selected[]"]').each(function(e,t){n=n&&s(t).prop("checked")}),s("#selectAll").prop("checked",n)}),s(".mmp-sortable").click(function(e){e.preventDefault(),e.stopPropagation();var t=s("#sortorder").val();t=s("#orderby").val()==s(this).data("orderby")&&"asc"==t?"desc":"asc",s("#sortorder").val(t),s("#orderby").val(s(this).data("orderby")),l(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#map_top").val(),s("#orderby").val(),s("#sortorder").val())}),s(".mmp-table td:nth-child(4)").mouseenter(function(){s(".mmp-action",s(this)).show()}),s(".mmp-table td:nth-child(4)").mouseleave(function(){s(".mmp-action",s(this)).hide()}),s(".mmp-delete").click(function(e){var t=s(this).data("id");confirm(mmpAdminL10n.markers.delete.replace("{marker}",t))&&s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_marker",nonce:s("#markerListNonce").val(),id:t},beforeSend:function(){r(!0),s("#bulkActionSubmit").prop("disabled",!0)}}).done(function(e){l(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#map_top").val(),s("#orderby").val(),s("#sortorder").val())}).always(function(){r(!1),s("#bulkActionSubmit").prop("disabled",!1)})})}).always(function(){r(!1),s("#bulkActionSubmit").prop("disabled",!1)})}s("input[name=bulkAction]").change(function(){s("#bulkActionSubmit").prop("disabled",!1)}),s("#pagination_top button").click(function(){l(s(this).val(),s("#perpage_top").val(),s("#search_top").val(),s("#map_top").val(),s("#orderby").val(),s("#sortorder").val())}),s("#pagination_bottom button").click(function(){l(s(this).val(),s("#perpage_bottom").val(),s("#search_bottom").val(),s("#map_bottom").val(),s("#orderby").val(),s("#sortorder").val())}),s("#page_top, #perpage_top").change(function(){l(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#map_top").val(),s("#orderby").val(),s("#sortorder").val())}),s("#page_bottom, #perpage_bottom").change(function(){l(s("#page_bottom").val(),s("#perpage_bottom").val(),s("#search_bottom").val(),s("#map_bottom").val(),s("#orderby").val(),s("#sortorder").val())}),s("#search_top").change(function(){l(1,s("#perpage_top").val(),s(this).val(),s("#map_top").val(),s("#orderby").val(),s("#sortorder").val())}),s("#search_bottom").change(function(){l(1,s("#perpage_bottom").val(),s(this).val(),s("#map_bottom").val(),s("#orderby").val(),s("#sortorder").val())}),s("#map_top").select2({width:"200px"}).on("select2:select",function(){s("#map_bottom").select2("val",s("#map_top").val()),l(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s(this).val(),s("#orderby").val(),s("#sortorder").val())}),s("#map_bottom").select2({width:"200px"}).on("select2:select",function(){s("#map_top").select2("val",s("#map_bottom").val()),l(s("#page_bottom").val(),s("#perpage_bottom").val(),s("#search_bottom").val(),s(this).val(),s("#orderby").val(),s("#sortorder").val())}),s("#markerList").submit(function(e){var t;switch(e.preventDefault(),e.stopPropagation(),s("input[name=bulkAction]:checked").val()){case"duplicate":t=mmpAdminL10n.markers.bulkDuplicate;break;case"delete":t=mmpAdminL10n.markers.bulkDelete;break;case"assign":t=mmpAdminL10n.markers.bulkAssign.replace("{map}",s("#assignTarget").val());break;default:return}confirm(t)&&s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_bulk_action_markers",nonce:s("#bulkNonce").val(),data:s("#markerList").serialize()},beforeSend:function(){r(!0),s("#bulkActionSubmit").prop("disabled",!0)}}).done(function(e){l(s("#page_top").val(),s("#perpage_top").val(),s("#search_top").val(),s("#map_top").val(),s("#orderby").val(),s("#sortorder").val())}).always(function(){r(!1),s("#bulkActionSubmit").prop("disabled",!1)})}),l()})}function settingsActions(){jQuery(document).ready(function(s){var e=document.location.toString().split("#")[1],i=s("#settings").serialize(),o={},r=[];function t(e){s(".mmp-settings-tab").hide(),s(".mmp-tablink").removeClass("active"),s("#"+e+"_link").addClass("active"),s("#"+e+"_tab").show(),window.location.hash=e}function a(e){s(e).prop("disabled",!0),s(e).addClass("mmp-button-loading")}function l(e){s(e).removeClass("mmp-button-loading"),s(e).prop("disabled",!1)}function n(){s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_get_custom_layers"}}).done(function(e){r=e;var o=s("<ul></ul>"),a=s("<ul></ul>");s.each(r,function(e,t){var n=s("<li></li>"),i=s('<img src="'+mmpAdminVars.pluginUrl+'images/icons/edit-layer.png" />');i.css("margin","0 10px 0 0"),i.css("verticalAlign","middle"),i.css("cursor","pointer"),i.click(function(){!function(e){s("#customLayerId").val(e),p.dialog("open")}(t.id)}),n.append(i),n.append("[ID "+t.id+"] "+t.name),"1"==t.overlay?a.append(n):o.append(n)}),s("#custom-basemaps").html(o),s("#custom-overlays").html(a)})}s(".mmp-tablink").click(function(){t(s(this).attr("id").replace("_link",""))}),s(".mmp-settings-nav ul li").each(function(){var e=s(this).closest(".mmp-settings-nav-group").find("span").html(),t=s(this).attr("id").replace("_link",""),n=s(this).html(),i=n;s("#"+t+"_tab").find("h3, p, .mmp-settings-desc, .mmp-settings-footnote").each(function(){i=i+" "+s(this).html()}),i=i.replace(/"/g,""),void 0===o[e]&&(o[e]=[]),o[e].push({value:t,search:i,title:n})}),s("#mmp-custom-layer-add").click(function(){s("#customLayerId").val("0"),p.dialog("open")}),s("#customLayerWms").change(function(){s(this).attr("checked")?s("#custom-layer-wms").show():s("#custom-layer-wms").hide()}),s("#reset_settings").click(function(){confirm(mmpAdminL10n.settings.confirmReset)&&s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_reset_settings",nonce:s("#reset_settings").data("nonce")},beforeSend:function(){a(s(this))}}).done(function(e){window.location.href=mmpAdminVars.adminUrl+"admin.php?page=mapsmarkerpro_settings"}).fail(function(){s('<div class="notice notice-error"><p>'+mmpAdminL10n.global.ajaxError+"</p></div>").insertBefore("#settings").delay(5e3).fadeOut(500,function(){s(this).remove()})}).always(function(){l(s(this))})}),s("#settings").submit(function(e){e.preventDefault(),e.stopPropagation();var n=s("#settings").serialize();s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_settings",settings:n},beforeSend:function(){a(s("#save"))}}).done(function(e){i=n;var t=e.success?"notice-success":"notice-error";s('<div class="notice '+t+'"><p>'+e.response+"</p></div>").insertBefore("#settings").delay(5e3).fadeOut(500,function(){s(this).remove()})}).fail(function(){s('<div class="notice notice-error"><p>'+mmpAdminL10n.global.ajaxError+"</p></div>").insertBefore("#settings").delay(5e3).fadeOut(500,function(){s(this).remove()})}).always(function(){l(s("#save"))})});var c=s("<select></select>").attr("id","mmp-select-search-tabs").css("width","300px").append("<option></option>");s.each(o,function(e,t){var i=s("<optgroup></optgroup>");i.attr("label",e),s.each(t,function(e,t){var n=s("<option></option>").attr("value",t.value).attr("data-search",t.search).html(t.title);i.append(n)}),c.append(i)}),c.appendTo("#top"),c.select2({placeholder:mmpAdminL10n.settings.search,allowClear:!0,matcher:function(n,e){if(""===s.trim(n.term))return e;if(void 0===e.text||void 0===e.children)return null;var i=[];if(s.each(e.children,function(e,t){-1===t.text.toUpperCase().indexOf(n.term.toUpperCase())&&-1===s(t.element).data("search").toUpperCase().indexOf(n.term.toUpperCase())||i.push(t)}),i.length){var t=s.extend({},e,!0);return t.children=i,t}return null}}).change(function(){t(s(this).val())});var p=s("#mmp-custom-layer-modal").dialog({autoOpen:!1,modal:!0,draggable:!1,resizable:!1,title:"Add/edit custom layer",buttons:[{id:"mmp-custom-layer-delete",text:"Delete",click:function(){s(this).dialog("close"),function(e){s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_delete_custom_layer",id:e}}).done(function(e){n()})}(s("#customLayerId").val())}},{id:"mmp-custom-layer-cancel",text:"Cancel",click:function(){s(this).dialog("close")}},{id:"mmp-custom-layer-save",text:"Save",click:function(){s.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_save_custom_layer",settings:s("#mmp-custom-layer-form").serialize()},beforeSend:function(){a(s("#mmp-custom-layer-save"))}}).done(function(e){p.dialog("isOpen")&&p.dialog("close"),n()}).always(function(){l(s("#mmp-custom-layer-save"))})}}],open:function(){var e=s(window).width()-20,t=s(window).height()-20;s(this).dialog("option","width",e<600?e:600),s(this).dialog("option","height",t<600?t:600),s("#mmp-custom-layer-delete").css("position","absolute"),s("#mmp-custom-layer-delete").css("left","15px"),s("#mmp-custom-layer-delete").css("color","#f00");var n=s("#customLayerId").val(),i={},o={};"0"!=n&&(s.each(r,function(e,t){if(t.id==n)return i=t,o=JSON.parse(t.options),!1}),"1"==i.overlay?s("#customLayerTypeOverlay").prop("checked",!0):s("#customLayerTypeBasemap").prop("checked",!0),s("#customLayerWms").prop("checked","1"==i.wms),s("#customLayerTms").prop("checked",o.tms),s("#customLayerName").val(i.name),s("#customLayerUrl").val(i.url),s("#customLayerErrorTiles").prop("checked",o.errorTiles),s("#customLayerSubdomains").val(o.subdomains),s("#customLayerMinZoom").val(o.minNativeZoom),s("#customLayerMaxZoom").val(o.maxNativeZoom),s("#customLayerAttribution").val(o.attribution),s("#customLayerOpacity").val(o.opacity),"1"==i.wms&&(s("#custom-layer-wms").show(),s("#customLayerLayers").val(o.layers),s("#customLayerStyles").val(o.styles),s("#customLayerFormat").val(o.format),s("#customLayerTransparent").prop("checked",o.transparent),s("#customLayerVersion").val(o.version),s("#customLayerUppercase").prop("checked",o.uppercase))),s(".ui-widget-overlay").bind("click",function(){s(p).dialog("close")})},close:function(){s("#mmp-custom-layer-form").trigger("reset"),s("#custom-layer-wms").hide()}});t(void 0!==e?e:s(".mmp-tablink").first().attr("id").replace("_link","")),n(),window.onbeforeunload=function(){return i!==s("#settings").serialize()?"":null},s("#save").prop("disabled",!1)})}function toolsActions(){jQuery(document).ready(function(c){var e=document.location.toString().split("#")[1],i=0,n=c("#icons").dialog({autoOpen:!1,modal:!0,draggable:!1,resizable:!1,title:mmpAdminL10n.tools.changeIcon,buttons:[{text:mmpAdminL10n.tools.close,click:function(){c(this).dialog("close")}}],open:function(){var e=c(window).width()-20,t=c(window).height()-20;c(this).dialog("option","width",e<600?e:600),c(this).dialog("option","height",t<600?t:600),c(".ui-widget-overlay").bind("click",function(){c(n).dialog("close")})}});function o(e){c(".mmp-tools-tab").hide(),c(".mmp-tablink").removeClass("active"),c("#"+e+"_tab").addClass("active"),c("#"+e+"_tab_content").show(),window.location.hash=e}function a(e){c(e).prop("disabled",!0),c(e).addClass("mmp-button-loading")}function s(e){c(e).removeClass("mmp-button-loading"),c(e).prop("disabled",!1)}function r(e){c("#backup_log").append('<span class="mmp-error">error ('+e.status+" - "+e.statusText+")</span>")}function t(e,t,n){var i=e?"notice-success":"notice-error";n.after('<div class="notice '+i+'"><p>'+t+"</p></div>")}function p(){var t=[];c(".mmp-basemap").each(function(){t.push(c(this).data("id").toString())}),c("#basemapsList option").each(function(){var e=-1!==c.inArray(c(this).val().toString(),t);c(this).prop("disabled",e)}),c("#basemapsList option").each(function(){if(!c(this).prop("disabled"))return c(this).prop("selected",!0),!1}),c("#basemapsList option:enabled").length?c("#basemapsAdd").prop("disabled",!1):c("#basemapsAdd").prop("disabled",!0),c("input[name=basemapDefault]:checked").length||c("input[name=basemapDefault]").first().prop("checked",!0)}function d(){var t=[];c(".mmp-overlay").each(function(){t.push(c(this).data("id").toString())}),c("#overlaysList option").each(function(){var e=-1!==c.inArray(c(this).val().toString(),t);c(this).prop("disabled",e)}),c("#overlaysList option").each(function(){if(!c(this).prop("disabled"))return c(this).prop("selected",!0),!1}),c("#overlaysList option:enabled").length?c("#overlaysAdd").prop("disabled",!1):c("#overlaysAdd").prop("disabled",!0)}function l(e){for(var t=0;t<e.log.length;t++)c("#backup_log").append(e.log[t]+"<br />");e.offset+1e3<e.total[e.table]?(i+=1e3,e.offset+=1e3):(i+=e.total[e.table]-e.offset,e.table++,e.offset=0);var n=0;for(t=0;t<e.total.length;t++)n+=e.total[t];return percent=(i/n*100).toFixed(0),c("#backup_progress").css("width",percent+"%"),e}function u(e){var n=c("#move_markers_source"),i=n.val(),o=c("#move_markers_target"),a=o.val(),s=c("#remove_markers_map"),r=s.val();n.empty(),o.empty(),s.empty(),c.each(e,function(e,t){n.append(c("<option></option>").attr("value",e).text(t).prop("selected",e==i)),o.append(c("<option></option>").attr("value",e).text(t).prop("selected",e==a)),s.append(c("<option></option>").attr("value",e).text(t).prop("selected",e==r))})}c(".mmp-tablink").click(function(){o(c(this).attr("id").replace("_tab",""))}),c(".mmp-batch-settings-tablink").click(function(){var e=c(this).data("target");c(".mmp-map-batch-settings-group").hide(),c(".mmp-batch-settings-tablink").removeClass("active"),c(this).addClass("active"),c("#"+e+"Content").show()}),c(".batch-settings-check").change(function(){c(this).prop("checked")?c(this).closest(".mmp-map-batch-setting").addClass("mmp-changed"):c(this).closest(".mmp-map-batch-setting").removeClass("mmp-changed"),c(".mmp-batch-settings-tablink").each(function(){var e=c(this).data("target");c(".batch-settings-check:checked",c("#"+e+"Content")).length?c(this).addClass("mmp-changed"):c(this).removeClass("mmp-changed")})}),c("#batch_settings_maps").select2({width:"400px"}),c("#save_batch_settings").click(function(){confirm(mmpAdminL10n.tools.batchSettings)&&c.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_batch_settings",nonce:c(this).data("nonce"),settings:c("#mapSettings").serialize()},beforeSend:function(){a(c(this))}}).done(function(e){t(e.success,e.message,c("#batch_settings_section"))}).fail(function(){t(!1,mmpAdminL10n.global.ajaxError,c("#batch_settings_section"))}).always(function(){s(c(this))})}),c("#basemapList").sortable({handle:".mmp-handle"}),c("#basemapsAdd").click(function(){!function(e,t){var n=c('<li class="mmp-basemap" data-id="'+e+'"></li>'),i=c("<div></div>");n.append(i);var o=c('<input type="hidden" name="basemaps[]" value="'+e+'" />');i.append(o);var a=c('<img class="mmp-handle mmp-align-middle" src="'+mmpAdminVars.pluginUrl+'images/icons/handle.png" />');i.append(a);var s=c('<input type="radio" name="basemapDefault" value="'+e+'" />');i.append(" ").append(s);var r=c('<input type="text" class="mmp-align-middle" value="'+t+'" disabled="disabled" />');i.append(" ").append(r);var l=c('<i class="dashicons dashicons-no mmp-remove-basemap"></i>');l.click(function(){c(this).parent().parent().remove(),p()}),i.append(" ").append(l),c("#basemapList").append(n)}(c("#basemapsList").val(),c("#basemapsList option:checked").text()),p()}),c(".mmp-remove-basemap").click(function(){c(this).parent().parent().remove(),p()}),p(),c("#overlayList").sortable({handle:".mmp-handle"}),c("#overlaysAdd").click(function(){!function(e,t){var n=c('<li class="mmp-overlay" data-id="'+e+'"></li>'),i=c("<div></div>");n.append(i);var o=c('<input type="hidden" name="overlays[]" value="'+e+'" />');i.append(o);var a=c('<img class="mmp-handle mmp-align-middle" src="'+mmpAdminVars.pluginUrl+'images/icons/handle.png" />');i.append(a);var s=c('<input type="checkbox" name="overlaysActive[]" value="'+e+'" />');i.append(" ").append(s);var r=c('<input type="text" class="mmp-align-middle" value="'+t+'" disabled="disabled" />');i.append(" ").append(r);var l=c('<i class="dashicons dashicons-no mmp-remove-overlay"></i>');l.click(function(){c(this).parent().parent().remove(),d()}),i.append(" ").append(l),c("#overlayList").append(n)}(c("#overlaysList").val(),c("#overlaysList option:checked").text()),d()}),c(".mmp-remove-overlay").click(function(){c(this).parent().parent().remove(),d()}),d(),c("#batch_layers_maps").select2({width:"400px"}),c("#save_batch_layers").click(function(){confirm(mmpAdminL10n.tools.batchLayers)&&c.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_batch_layers",nonce:c(this).data("nonce"),settings:c("#mapLayers").serialize()},beforeSend:function(){a(c(this))}}).done(function(e){t(e.success,e.message,c("#batch_layers_section"))}).fail(function(){t(!1,mmpAdminL10n.global.ajaxError,c("#batch_layers_section"))}).always(function(){s(c(this))})}),c("#sourceIcon").click(function(){c("#replaceIcon").val("0"),n.dialog("open")}),c("#targetIcon").click(function(){c("#replaceIcon").val("1"),n.dialog("open")}),c("#iconsList img").click(function(){var e="0"==c("#replaceIcon").val()?"#sourceIcon":"#targetIcon",t=c(this).attr("src");c(e).attr("src",t),n.dialog("close")}),c("#replace_icon").click(function(){confirm(mmpAdminL10n.tools.replaceIcon)&&c.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_replace_icon",nonce:c(this).data("nonce"),source:c("#sourceIcon").attr("src"),target:c("#targetIcon").attr("src")},beforeSend:function(){a(c(this))}}).done(function(e){t(e.success,e.message,c("#replace_icon_section"))}).fail(function(){t(!1,mmpAdminL10n.global.ajaxError,c("#replace_icon_section"))}).always(function(){s(c(this))})}),c("#backup_file").change(function(){if(i=0,c("#backup_log").empty(),c("#backup_progress").css("width","0"),this.files.length){var e=(this.files[0].size/1024/1024).toFixed(2)+" MiB",t=c("#backup_max_size").val()/1024/1024+" MiB";c("#backup_log").append(mmpAdminL10n.tools.maxFileSize.replace("{maxFileSize}",t)+"<br />"),t<=0||this.files[0].size<=c("#backup_max_size").val()?(c("#backup_log").append('<span style="color:green;">'+mmpAdminL10n.tools.chosenFileSizeGood.replace("{chosenFileSize}",e)+"</span><br />"),c("#backup_start").prop("disabled",!0),c("#restore_start").prop("disabled",!1)):c("#backup_log").append('<span style="color:red;">'+mmpAdminL10n.tools.chosenFileSizeBad.replace("{chosenFileSize}",e)+"</span><br />")}else c("#restore_start").prop("disabled",!0),c("#backup_start").prop("disabled",!1)}),c("#backup_start").click(function(){i=0,c("#backup_start").prop("disabled",!0),c("#restore_start").prop("disabled",!0),c("#backup_start").addClass("mmp-button-loading"),function t(e,n,i,o){c.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_backup",nonce:c("#backup_start").data("nonce"),table:e,offset:n,total:JSON.stringify(i),filename:o||0}}).done(function(e){3<(e=l(e)).table?(c("#backup_log").append(e.message),c("#backup_start").removeClass("mmp-button-loading"),window.location=e.url):t(e.table,e.offset,e.total,e.filename)}).fail(function(e){r(e)})}(0,0,[],!1)}),c("#restore_start").click(function(){i=0,c("#restore_start").prop("disabled",!0),c("#backup_start").prop("disabled",!0),c("#restore_start").addClass("mmp-button-loading"),function t(e,n,i){var o=new FormData;if(o.append("action","mmp_restore"),o.append("nonce",c("#restore_start").data("nonce")),o.append("table",e),o.append("offset",n),o.append("total",i),!i.length){var a=c("#backup_file").prop("files")[0];if(void 0===a)return void c("#restore_start").removeClass("mmp-button-loading");o.append("upload",a)}c.ajax({type:"POST",url:ajaxurl,context:this,data:o,processData:!1,contentType:!1}).done(function(e){3<(e=l(e)).table?(u(e.maps),c("#backup_log").append(e.message),c("#restore_start").removeClass("mmp-button-loading")):t(e.table,e.offset,e.total)}).fail(function(e){r(e)})}(0,0,[])}),c("#settings").click(function(){c(this).select()}),c("#update_settings").click(function(){c.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_update_settings",nonce:c(this).data("nonce"),settings:c("#settings").val()},beforeSend:function(){a(c(this))}}).done(function(e){t(e.success,e.message,c("#update_settings_section"))}).fail(function(){t(!1,mmpAdminL10n.global.ajaxError,c("#update_settings_section"))}).always(function(){s(c(this))})}),c("#move_markers").click(function(){c.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_move_markers",nonce:c(this).data("nonce"),source:c("#move_markers_source").val(),target:c("#move_markers_target").val()},beforeSend:function(){a(c(this))}}).done(function(e){u(e.maps),t(e.success,e.message,c("#move_markers_section"))}).fail(function(){t(!1,mmpAdminL10n.global.ajaxError,c("#move_markers_section"))}).always(function(){s(c(this))})}),c("#remove_markers").click(function(){c.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_remove_markers",nonce:c(this).data("nonce"),map:c("#remove_markers_map").val()},beforeSend:function(){a(c(this))}}).done(function(e){u(e.maps),t(e.success,e.message,c("#remove_markers_section"))}).fail(function(){t(!1,mmpAdminL10n.global.ajaxError,c("#remove_markers_section"))}).always(function(){s(c(this))})}),c("#register_strings").click(function(){c.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_register_strings",nonce:c(this).data("nonce")},beforeSend:function(){a(c(this))}}).done(function(e){t(e.success,e.message,c("#register_strings_section"))}).fail(function(){t(!1,mmpAdminL10n.global.ajaxError,c("#register_strings_section"))}).always(function(){s(c(this))})}),c("#export_include, #export_exclude").select2({width:"220px"}),c("#import_file").change(function(){if(c("#import_start").prop("disabled",!0),this.files.length){(this.files[0].size/1024/1024).toFixed(2);var e=c("#import_max_size").val();e<=0||this.files[0].size<=e?(c("#import_filesize_error").hide(),c("#import_start").prop("disabled",!1)):c("#import_filesize_error").show()}else c("#import_filesize_error").hide()}),c("#import_form").submit(function(e){e.preventDefault(),e.stopPropagation();var t=new FormData(this);c.ajax({type:"POST",url:ajaxurl,context:this,data:t,processData:!1,contentType:!1,beforeSend:function(){a(c("#import_start")),c("#import_log").empty()}}).done(function(e){e.success?(c("#import_log").append(e.response.result+"<br />"),c.each(e.response.details,function(e,t){c("#import_log").append("["+e+"] "+t.message+"<br />")})):c("#import_log").append(e.response)}).fail(function(){c("#import_log").append("Failed to send request")}).always(function(){s(c("#import_start"))})}),c("#export_form").submit(function(e){e.preventDefault(),e.stopPropagation(),c.ajax({type:"POST",url:ajaxurl,context:this,data:c(this).serialize(),beforeSend:function(){a(c("#export_start")),c("#export_log").empty()}}).done(function(e){e.success?(c("#export_log").append(e.response.message),window.location.href=e.response.url):c("#export_log").append(e.response)}).fail(function(){c("#export_log").append(mmpAdminL10n.global.ajaxError)}).always(function(){s(c("#export_start"))})}),c("#reset_database_confirm").change(function(){c(this).prop("checked")?c("#reset_database").prop("disabled",!1):c("#reset_database").prop("disabled",!0)}),c("#reset_database").click(function(){c.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_reset_database",nonce:c(this).data("nonce"),confirm:c("#reset_database_confirm").prop("checked")},beforeSend:function(){a(c(this))}}).done(function(e){u(),t(e.success,e.message,c("#reset_database_section"))}).fail(function(){t(!1,mmpAdminL10n.global.ajaxError,c("#reset_database_section"))}).always(function(){s(c(this))})}),c("#reset_settings_confirm").change(function(){c(this).prop("checked")?c("#reset_settings").prop("disabled",!1):c("#reset_settings").prop("disabled",!0)}),c("#reset_settings").click(function(){c.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_reset_settings",nonce:c(this).data("nonce"),confirm:c("#reset_settings_confirm").prop("checked")},beforeSend:function(){a(c(this))}}).done(function(e){t(e.success,e.message,c("#reset_settings_section"))}).fail(function(){t(!1,mmpAdminL10n.global.ajaxError,c("#reset_settings_section"))}).always(function(){s(c(this))})}),c("#data_migration_check").click(function(){c.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_check_migration",nonce:c(this).data("nonce")},beforeSend:function(){c(this).prop("disabled",!0),c(this).addClass("mmp-button-loading")}}).done(function(e){c("#migration_log").html(e.log),c(".mmp-migration-shortcode").click(function(){c(this).select()}),c("#data_migration_start").prop("disabled",!1)}).fail(function(){t(!1,mmpAdminL10n.global.ajaxError,c("#data_migration"))}).always(function(){c(this).removeClass("mmp-button-loading")})}),c("#data_migration_start").click(function(){c.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_data_migration",nonce:c(this).data("nonce")},beforeSend:function(){c(this).prop("disabled",!0),c(this).addClass("mmp-button-loading")}}).done(function(e){t(e.success,e.message,c("#data_migration"))}).fail(function(){t(!1,mmpAdminL10n.global.ajaxError,c("#data_migration"))}).always(function(){c(this).removeClass("mmp-button-loading")})}),c(window).on("hashchange",function(e){var t=document.location.toString().split("#")[1];void 0!==t&&o(t)}),o(void 0!==e?e:c(".mmp-tablink").first().attr("id").replace("_tab","")),c(".mmp-batch-settings-tablink").first().trigger("click")})}function licenseActions(){jQuery(document).ready(function(n){function e(e){n(".mmp-license-error").remove(),n(".mmp-license-section button").prop("disabled",!0),n(e).addClass("mmp-button-loading")}function t(e){n(e).removeClass("mmp-button-loading"),n(".mmp-license-section button").prop("disabled",!1)}function i(e,t){n(e).closest(".mmp-license-section").after('<div class="notice notice-error mmp-license-error"><p>'+t+"</p></div>")}n("#update_license").click(function(){n.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_update_license",nonce:n(this).data("nonce"),key:n("#license_key").val(),multisite:n("#distribute_multisite").prop("checked")?1:0},beforeSend:function(){e(this)}}).done(function(e){e.success?location.reload():i(this,e.response)}).fail(function(){i(this,mmpAdminL10n.global.ajaxError)}).always(function(){t(this)})}),n("#personal_trial_submit").click(function(){n.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_register_personal_trial",nonce:n(this).data("nonce"),first_name:n("#personal_trial_first_name").val(),last_name:n("#personal_trial_last_name").val(),email:n("#personal_trial_email").val(),tos:n("#personal_trial_tos").prop("checked")?1:0},beforeSend:function(){e(this)}}).done(function(e){e.success?location.reload():i(this,e.response)}).fail(function(){i(this,mmpAdminL10n.global.ajaxError)}).always(function(){t(this)})}),n("#anonymous_trial_submit").click(function(){n.ajax({type:"POST",url:ajaxurl,context:this,data:{action:"mmp_register_anonymous_trial",nonce:n(this).data("nonce"),tos:n("#anonymous_trial_tos").prop("checked")?1:0},beforeSend:function(){e(this)}}).done(function(e){e.success?location.reload():i(this,e.response)}).fail(function(){i(this,mmpAdminL10n.global.ajaxError)}).always(function(){t(this)})})})}!function(n){var i={};function o(e){if(i[e])return i[e].exports;var t=i[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,o),t.loaded=!0,t.exports}o.m=n,o.c=i,o.p="",o(0)}([function(e,t,n){"use strict";e.exports=n(1)},function(e,t,n){"use strict";var i=n(2),a=n(3);i.element=a;var s=n(4);s.isArray=a.isArray,s.isFunction=a.isFunction,s.isObject=a.isPlainObject,s.bind=a.proxy,s.each=function(e,n){a.each(e,function(e,t){return n(t,e)})},s.map=a.map,s.mixin=a.extend,s.Event=a.Event;var o,r,l,c=n(5),p=n(6);o=a.fn.autocomplete,r="aaAutocomplete",l={initialize:function(i,o){return o=s.isArray(o)?o:[].slice.call(arguments,1),i=i||{},this.each(function(){var e,t=a(this),n=new p({el:t});e=new c({input:t,eventBus:n,dropdownMenuContainer:i.dropdownMenuContainer,hint:void 0===i.hint||!!i.hint,minLength:i.minLength,autoselect:i.autoselect,autoselectOnBlur:i.autoselectOnBlur,openOnFocus:i.openOnFocus,templates:i.templates,debug:i.debug,cssClasses:i.cssClasses,datasets:o,keyboardShortcuts:i.keyboardShortcuts,appendTo:i.appendTo,autoWidth:i.autoWidth}),t.data(r,e)})},open:function(){return this.each(function(){var e,t=a(this);(e=t.data(r))&&e.open()})},close:function(){return this.each(function(){var e,t=a(this);(e=t.data(r))&&e.close()})},val:function(n){return arguments.length?this.each(function(){var e,t=a(this);(e=t.data(r))&&e.setVal(n)}):function(e){var t,n;(t=e.data(r))&&(n=t.getVal());return n}(this.first())},destroy:function(){return this.each(function(){var e,t=a(this);(e=t.data(r))&&(e.destroy(),t.removeData(r))})}},a.fn.autocomplete=function(e){var t;return l[e]&&"initialize"!==e?(t=this.filter(function(){return!!a(this).data(r)}),l[e].apply(t,[].slice.call(arguments,1))):l.initialize.apply(this,arguments)},a.fn.autocomplete.noConflict=function(){return a.fn.autocomplete=o,this},a.fn.autocomplete.sources=c.sources,a.fn.autocomplete.escapeHighlightedString=s.escapeHighlightedString,e.exports=a.fn.autocomplete},function(e,t){"use strict";e.exports={element:null}},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";var i,o=n(2);function s(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}e.exports={isArray:null,isFunction:null,isObject:null,bind:null,each:null,map:null,mixin:null,isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},escapeRegExChars:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isNumber:function(e){return"number"==typeof e},toStr:function(e){return null==e?"":e+""},cloneDeep:function(e){var n=this.mixin({},e),i=this;return this.each(n,function(e,t){e&&(i.isArray(e)?n[t]=[].concat(e):i.isObject(e)&&(n[t]=i.cloneDeep(e)))}),n},error:function(e){throw new Error(e)},every:function(n,i){var o=!0;return n?(this.each(n,function(e,t){if(!(o=i.call(null,e,t,n)))return!1}),!!o):o},any:function(n,i){var o=!1;return n&&this.each(n,function(e,t){if(i.call(null,e,t,n))return!(o=!0)}),o},getUniqueId:(i=0,function(){return i++}),templatify:function(e){if(this.isFunction(e))return e;var t=o.element(e);return"SCRIPT"===t.prop("tagName")?function(){return t.text()}:function(){return String(e)}},defer:function(e){setTimeout(e,0)},noop:function(){},formatPrefix:function(e,t){return t?"":e+"-"},className:function(e,t,n){return(n?"":".")+e+t},escapeHighlightedString:function(e,t,n){t=t||"<em>";var i=document.createElement("div");i.appendChild(document.createTextNode(t)),n=n||"</em>";var o=document.createElement("div");o.appendChild(document.createTextNode(n));var a=document.createElement("div");return a.appendChild(document.createTextNode(e)),a.innerHTML.replace(RegExp(s(i.innerHTML),"g"),t).replace(RegExp(s(o.innerHTML),"g"),n)}}},function(e,t,n){"use strict";var s="aaAttrs",r=n(4),l=n(2),a=n(6),c=n(7),i=n(16),p=n(18),d=n(19);function u(e){var n,t;if((e=e||{}).input||r.error("missing input"),this.isActivated=!1,this.debug=!!e.debug,this.autoselect=!!e.autoselect,this.autoselectOnBlur=!!e.autoselectOnBlur,this.openOnFocus=!!e.openOnFocus,this.minLength=r.isNumber(e.minLength)?e.minLength:1,this.autoWidth=void 0===e.autoWidth||!!e.autoWidth,e.hint=!!e.hint,e.hint&&e.appendTo)throw new Error("[autocomplete.js] hint and appendTo options can't be used at the same time");this.css=e.css=r.mixin({},d,e.appendTo?d.appendTo:{}),this.cssClasses=e.cssClasses=r.mixin({},d.defaultClasses,e.cssClasses||{}),this.cssClasses.prefix=e.cssClasses.formattedPrefix=r.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),this.listboxId=e.listboxId=[this.cssClasses.root,"listbox",r.getUniqueId()].join("-");var i=function(e){var t,n,i,o;t=l.element(e.input),n=l.element(p.wrapper.replace("%ROOT%",e.cssClasses.root)).css(e.css.wrapper),e.appendTo||"block"!==t.css("display")||"table"!==t.parent().css("display")||n.css("display","table-cell");var a=p.dropdown.replace("%PREFIX%",e.cssClasses.prefix).replace("%DROPDOWN_MENU%",e.cssClasses.dropdownMenu);i=l.element(a).css(e.css.dropdown).attr({role:"listbox",id:e.listboxId}),e.templates&&e.templates.dropdownMenu&&i.html(r.templatify(e.templates.dropdownMenu)());(o=t.clone().css(e.css.hint).css(function(e){return{backgroundAttachment:e.css("background-attachment"),backgroundClip:e.css("background-clip"),backgroundColor:e.css("background-color"),backgroundImage:e.css("background-image"),backgroundOrigin:e.css("background-origin"),backgroundPosition:e.css("background-position"),backgroundRepeat:e.css("background-repeat"),backgroundSize:e.css("background-size")}}(t))).val("").addClass(r.className(e.cssClasses.prefix,e.cssClasses.hint,!0)).removeAttr("id name placeholder required").prop("readonly",!0).attr({"aria-hidden":"true",autocomplete:"off",spellcheck:"false",tabindex:-1}),o.removeData&&o.removeData();t.data(s,{"aria-autocomplete":t.attr("aria-autocomplete"),"aria-expanded":t.attr("aria-expanded"),"aria-owns":t.attr("aria-owns"),autocomplete:t.attr("autocomplete"),dir:t.attr("dir"),role:t.attr("role"),spellcheck:t.attr("spellcheck"),style:t.attr("style"),type:t.attr("type")}),t.addClass(r.className(e.cssClasses.prefix,e.cssClasses.input,!0)).attr({autocomplete:"off",spellcheck:!1,role:"combobox","aria-autocomplete":e.datasets&&e.datasets[0]&&e.datasets[0].displayKey?"both":"list","aria-expanded":"false","aria-label":e.ariaLabel,"aria-owns":e.listboxId}).css(e.hint?e.css.input:e.css.inputWithNoHint);try{t.attr("dir")||t.attr("dir","auto")}catch(e){}return(n=e.appendTo?n.appendTo(l.element(e.appendTo).eq(0)).eq(0):t.wrap(n).parent()).prepend(e.hint?o:null).append(i),{wrapper:n,input:t,hint:o,menu:i}}(e);this.$node=i.wrapper;var o=this.$input=i.input;n=i.menu,t=i.hint,e.dropdownMenuContainer&&l.element(e.dropdownMenuContainer).css("position","relative").append(n.css("top","0")),o.on("blur.aa",function(e){var t=document.activeElement;r.isMsie()&&(n[0]===t||n[0].contains(t))&&(e.preventDefault(),e.stopImmediatePropagation(),r.defer(function(){o.focus()}))}),n.on("mousedown.aa",function(e){e.preventDefault()}),this.eventBus=e.eventBus||new a({el:o}),this.dropdown=new u.Dropdown({appendTo:e.appendTo,wrapper:this.$node,menu:n,datasets:e.datasets,templates:e.templates,cssClasses:e.cssClasses,minLength:this.minLength}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onSync("shown",this._onShown,this).onSync("empty",this._onEmpty,this).onSync("redrawn",this._onRedrawn,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new u.Input({input:o,hint:t}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._bindKeyboardShortcuts(e),this._setLanguageDirection()}r.mixin(u.prototype,{_bindKeyboardShortcuts:function(e){if(e.keyboardShortcuts){var o=this.$input,a=[];r.each(e.keyboardShortcuts,function(e){"string"==typeof e&&(e=e.toUpperCase().charCodeAt(0)),a.push(e)}),l.element(document).keydown(function(e){var t=e.target||e.srcElement,n=t.tagName;if(!t.isContentEditable&&"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n){var i=e.which||e.keyCode;-1!==a.indexOf(i)&&(o.focus(),e.stopPropagation(),e.preventDefault())}})}},_onSuggestionClicked:function(e,t){var n;(n=this.dropdown.getDatumForSuggestion(t))&&this._select(n)},_onCursorMoved:function(e,t){var n=this.dropdown.getDatumForCursor(),i=this.dropdown.getCurrentCursor().attr("id");this.input.setActiveDescendant(i),n&&(t&&this.input.setInputValue(n.value,!0),this.eventBus.trigger("cursorchanged",n.raw,n.datasetName))},_onCursorRemoved:function(){this.input.resetInputValue(),this._updateHint(),this.eventBus.trigger("cursorremoved")},_onDatasetRendered:function(){this._updateHint(),this.eventBus.trigger("updated")},_onOpened:function(){this._updateHint(),this.input.expand(),this.eventBus.trigger("opened")},_onEmpty:function(){this.eventBus.trigger("empty")},_onRedrawn:function(){this.$node.css("top","0px"),this.$node.css("left","0px");var e=this.$input[0].getBoundingClientRect();this.autoWidth&&this.$node.css("width",e.width+"px");var t=this.$node[0].getBoundingClientRect(),n=e.bottom-t.top;this.$node.css("top",n+"px");var i=e.left-t.left;this.$node.css("left",i+"px"),this.eventBus.trigger("redrawn")},_onShown:function(){this.eventBus.trigger("shown"),this.autoselect&&this.dropdown.cursorTopSuggestion()},_onClosed:function(){this.input.clearHint(),this.input.removeActiveDescendant(),this.input.collapse(),this.eventBus.trigger("closed")},_onFocused:function(){if(this.isActivated=!0,this.openOnFocus){var e=this.input.getQuery();e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open()}},_onBlurred:function(){var e,t;e=this.dropdown.getDatumForCursor(),t=this.dropdown.getDatumForTopSuggestion(),this.debug||(this.autoselectOnBlur&&e?this._select(e):this.autoselectOnBlur&&t?this._select(t):(this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()))},_onEnterKeyed:function(e,t){var n,i;n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),t.preventDefault()):this.autoselect&&i&&(this._select(i),t.preventDefault())},_onTabKeyed:function(e,t){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n),t.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function(){var e=this.input.getQuery();this.dropdown.isEmpty&&e.length>=this.minLength?this.dropdown.update(e):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function(e,t){this.input.clearHintIfInvalid(),t.length>=this.minLength?this.dropdown.update(t):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function(){var e=this.input.getLanguageDirection();this.dir!==e&&(this.dir=e,this.$node.css("direction",e),this.dropdown.setLanguageDirection(e))},_updateHint:function(){var e,t,n,i,o;(e=this.dropdown.getDatumForTopSuggestion())&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(t=this.input.getInputValue(),n=c.normalizeQuery(t),i=r.escapeRegExChars(n),(o=new RegExp("^(?:"+i+")(.+$)","i").exec(e.value))?this.input.setHint(t+o[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function(e){var t,n,i,o;t=this.input.getHint(),n=this.input.getQuery(),i=e||this.input.isCursorAtEnd(),t&&n!==t&&i&&((o=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(o.value),this.eventBus.trigger("autocompleted",o.raw,o.datasetName))},_select:function(e){void 0!==e.value&&this.input.setQuery(e.value),this.input.setInputValue(e.value,!0),this._setLanguageDirection(),!1===this.eventBus.trigger("selected",e.raw,e.datasetName).isDefaultPrevented()&&(this.dropdown.close(),r.defer(r.bind(this.dropdown.empty,this.dropdown)))},open:function(){if(!this.isActivated){var e=this.input.getInputValue();e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty()}this.dropdown.open()},close:function(){this.dropdown.close()},setVal:function(e){e=r.toStr(e),this.isActivated?this.input.setInputValue(e):(this.input.setQuery(e),this.input.setInputValue(e,!0)),this._setLanguageDirection()},getVal:function(){return this.input.getQuery()},destroy:function(){this.input.destroy(),this.dropdown.destroy(),function(e,t){var n=e.find(r.className(t.prefix,t.input));r.each(n.data(s),function(e,t){void 0===e?n.removeAttr(t):n.attr(t,e)}),n.detach().removeClass(r.className(t.prefix,t.input,!0)).insertAfter(e),n.removeData&&n.removeData(s);e.remove()}(this.$node,this.cssClasses),this.$node=null},getWrapper:function(){return this.dropdown.$container[0]}}),u.Dropdown=i,u.Input=c,u.sources=n(20),e.exports=u},function(e,t,n){"use strict";var i=n(4),o=n(2);function a(e){e&&e.el||i.error("EventBus initialized without el"),this.$el=o.element(e.el)}i.mixin(a.prototype,{trigger:function(e){var t=[].slice.call(arguments,1),n=i.Event("autocomplete:"+e);return this.$el.trigger(n,t),n}}),e.exports=a},function(e,t,n){"use strict";var s;s={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"};var r=n(4),l=n(2),i=n(8);function o(e){var t,n,i,o,a=this;(e=e||{}).input||r.error("input is missing"),t=r.bind(this._onBlur,this),n=r.bind(this._onFocus,this),i=r.bind(this._onKeydown,this),o=r.bind(this._onInput,this),this.$hint=l.element(e.hint),this.$input=l.element(e.input).on("blur.aa",t).on("focus.aa",n).on("keydown.aa",i),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=r.noop),r.isMsie()?this.$input.on("keydown.aa keypress.aa cut.aa paste.aa",function(e){s[e.which||e.keyCode]||r.defer(r.bind(a._onInput,a,e))}):this.$input.on("input.aa",o),this.query=this.$input.val(),this.$overflowHelper=function(e){return l.element('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:e.css("font-family"),fontSize:e.css("font-size"),fontStyle:e.css("font-style"),fontVariant:e.css("font-variant"),fontWeight:e.css("font-weight"),wordSpacing:e.css("word-spacing"),letterSpacing:e.css("letter-spacing"),textIndent:e.css("text-indent"),textRendering:e.css("text-rendering"),textTransform:e.css("text-transform")}).insertAfter(e)}(this.$input)}function a(e){return e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}o.normalizeQuery=function(e){return(e||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},r.mixin(o.prototype,i,{_onBlur:function(){this.resetInputValue(),this.$input.removeAttr("aria-activedescendant"),this.trigger("blurred")},_onFocus:function(){this.trigger("focused")},_onKeydown:function(e){var t=s[e.which||e.keyCode];this._managePreventDefault(t,e),t&&this._shouldTrigger(t,e)&&this.trigger(t+"Keyed",e)},_onInput:function(){this._checkInputValue()},_managePreventDefault:function(e,t){var n,i,o;switch(e){case"tab":i=this.getHint(),o=this.getInputValue(),n=i&&i!==o&&!a(t);break;case"up":case"down":n=!a(t);break;default:n=!1}n&&t.preventDefault()},_shouldTrigger:function(e,t){var n;switch(e){case"tab":n=!a(t);break;default:n=!0}return n},_checkInputValue:function(){var e,t,n;n=!(!(t=function(e,t){return o.normalizeQuery(e)===o.normalizeQuery(t)}(e=this.getInputValue(),this.query))||!this.query)&&this.query.length!==e.length,this.query=e,t?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function(){this.$input.focus()},blur:function(){this.$input.blur()},getQuery:function(){return this.query},setQuery:function(e){this.query=e},getInputValue:function(){return this.$input.val()},setInputValue:function(e,t){void 0===e&&(e=this.query),this.$input.val(e),t?this.clearHint():this._checkInputValue()},expand:function(){this.$input.attr("aria-expanded","true")},collapse:function(){this.$input.attr("aria-expanded","false")},setActiveDescendant:function(e){this.$input.attr("aria-activedescendant",e)},removeActiveDescendant:function(){this.$input.removeAttr("aria-activedescendant")},resetInputValue:function(){this.setInputValue(this.query,!0)},getHint:function(){return this.$hint.val()},setHint:function(e){this.$hint.val(e)},clearHint:function(){this.setHint("")},clearHintIfInvalid:function(){var e,t,n;n=(e=this.getInputValue())!==(t=this.getHint())&&0===t.indexOf(e),""!==e&&n&&!this.hasOverflow()||this.clearHint()},getLanguageDirection:function(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function(){var e=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=e},isCursorAtEnd:function(){var e,t,n;return e=this.$input.val().length,t=this.$input[0].selectionStart,r.isNumber(t)?t===e:!document.selection||((n=document.selection.createRange()).moveStart("character",-e),e===n.text.length)},destroy:function(){this.$hint.off(".aa"),this.$input.off(".aa"),this.$hint=this.$input=this.$overflowHelper=null}}),e.exports=o},function(e,t,n){"use strict";var s=n(9),r=/\s+/;function i(e,t,n,i){var o;if(!n)return this;for(t=t.split(r),n=i?function(e,t){return e.bind?e.bind(t):function(){e.apply(t,[].slice.call(arguments,0))}}(n,i):n,this._callbacks=this._callbacks||{};o=t.shift();)this._callbacks[o]=this._callbacks[o]||{sync:[],async:[]},this._callbacks[o][e].push(n);return this}function l(i,o,a){return function(){for(var e,t=0,n=i.length;!e&&t<n;t+=1)e=!1===i[t].apply(o,a);return!e}}e.exports={onSync:function(e,t,n){return i.call(this,"sync",e,t,n)},onAsync:function(e,t,n){return i.call(this,"async",e,t,n)},off:function(e){var t;if(!this._callbacks)return this;e=e.split(r);for(;t=e.shift();)delete this._callbacks[t];return this},trigger:function(e){var t,n,i,o,a;if(!this._callbacks)return this;e=e.split(r),i=[].slice.call(arguments,1);for(;(t=e.shift())&&(n=this._callbacks[t]);)o=l(n.sync,this,[t].concat(i)),a=l(n.async,this,[t].concat(i)),o()&&s(a);return this}}},function(e,t,n){"use strict";var i,o,a,s=[n(10),n(12),n(13),n(14),n(15)],r=-1,l=[],c=!1;function p(){i&&o&&(i=!1,o.length?l=o.concat(l):r=-1,l.length&&d())}function d(){if(!i){i=!(c=!1);for(var e=l.length,t=setTimeout(p);e;){for(o=l,l=[];o&&++r<e;)o[r].run();r=-1,e=l.length}o=null,i=!(r=-1),clearTimeout(t)}}for(var u=-1,h=s.length;++u<h;)if(s[u]&&s[u].test&&s[u].test()){a=s[u].install(d);break}function m(e,t){this.fun=e,this.array=t}m.prototype.run=function(){var e=this.fun,t=this.array;switch(t.length){case 0:return e();case 1:return e(t[0]);case 2:return e(t[0],t[1]);case 3:return e(t[0],t[1],t[2]);default:return e.apply(null,t)}},e.exports=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),c||i||(c=!0,a())}},function(e,n,t){(function(t){"use strict";n.test=function(){return void 0!==t&&!t.browser},n.install=function(e){return function(){t.nextTick(e)}}}).call(n,t(11))},function(e,t){var n,i,o=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function r(t){if(n===setTimeout)return setTimeout(t,0);if((n===a||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:a}catch(e){n=a}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var l,c=[],p=!1,d=-1;function u(){p&&l&&(p=!1,l.length?c=l.concat(c):d=-1,c.length&&h())}function h(){if(!p){var e=r(u);p=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,p=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function f(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new m(e,t)),1!==c.length||p||r(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=f,o.addListener=f,o.once=f,o.off=f,o.removeListener=f,o.removeAllListeners=f,o.emit=f,o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){(function(o){"use strict";var a=o.MutationObserver||o.WebKitMutationObserver;t.test=function(){return a},t.install=function(e){var t=0,n=new a(e),i=o.document.createTextNode("");return n.observe(i,{characterData:!0}),function(){i.data=t=++t%2}}}).call(t,function(){return this}())},function(e,t){(function(n){"use strict";t.test=function(){return!n.setImmediate&&void 0!==n.MessageChannel},t.install=function(e){var t=new n.MessageChannel;return t.port1.onmessage=e,function(){t.port2.postMessage(0)}}}).call(t,function(){return this}())},function(e,t){(function(n){"use strict";t.test=function(){return"document"in n&&"onreadystatechange"in n.document.createElement("script")},t.install=function(t){return function(){var e=n.document.createElement("script");return e.onreadystatechange=function(){t(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},n.document.documentElement.appendChild(e),t}}}).call(t,function(){return this}())},function(e,t){"use strict";t.test=function(){return!0},t.install=function(e){return function(){setTimeout(e,0)}}},function(e,t,n){"use strict";var r=n(4),l=n(2),i=n(8),o=n(17),c=n(19);function p(t){var e,n,i,o=this;(t=t||{}).menu||r.error("menu is required"),r.isArray(t.datasets)||r.isObject(t.datasets)||r.error("1 or more datasets required"),t.datasets||r.error("datasets is required"),this.isOpen=!1,this.isEmpty=!0,this.minLength=t.minLength||0,this.templates={},this.appendTo=t.appendTo||!1,this.css=r.mixin({},c,t.appendTo?c.appendTo:{}),this.cssClasses=t.cssClasses=r.mixin({},c.defaultClasses,t.cssClasses||{}),this.cssClasses.prefix=t.cssClasses.formattedPrefix||r.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix),e=r.bind(this._onSuggestionClick,this),n=r.bind(this._onSuggestionMouseEnter,this),i=r.bind(this._onSuggestionMouseLeave,this);var a=r.className(this.cssClasses.prefix,this.cssClasses.suggestion);this.$menu=l.element(t.menu).on("mouseenter.aa",a,n).on("mouseleave.aa",a,i).on("click.aa",a,e),this.$container=t.appendTo?t.wrapper:this.$menu,t.templates&&t.templates.header&&(this.templates.header=r.templatify(t.templates.header),this.$menu.prepend(this.templates.header())),t.templates&&t.templates.empty&&(this.templates.empty=r.templatify(t.templates.empty),this.$empty=l.element('<div class="'+r.className(this.cssClasses.prefix,this.cssClasses.empty,!0)+'"></div>'),this.$menu.append(this.$empty),this.$empty.hide()),this.datasets=r.map(t.datasets,function(e){return function(e,t,n){return new p.Dataset(r.mixin({$menu:e,cssClasses:n},t))}(o.$menu,e,t.cssClasses)}),r.each(this.datasets,function(e){var t=e.getRoot();t&&0===t.parent().length&&o.$menu.append(t),e.onSync("rendered",o._onRendered,o)}),t.templates&&t.templates.footer&&(this.templates.footer=r.templatify(t.templates.footer),this.$menu.append(this.templates.footer()));var s=this;l.element(window).resize(function(){s._redraw()})}r.mixin(p.prototype,i,{_onSuggestionClick:function(e){this.trigger("suggestionClicked",l.element(e.currentTarget))},_onSuggestionMouseEnter:function(e){var t=l.element(e.currentTarget);if(!t.hasClass(r.className(this.cssClasses.prefix,this.cssClasses.cursor,!0))){this._removeCursor();var n=this;setTimeout(function(){n._setCursor(t,!1)},0)}},_onSuggestionMouseLeave:function(e){if(e.relatedTarget&&0<l.element(e.relatedTarget).closest("."+r.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).length)return;this._removeCursor(),this.trigger("cursorRemoved")},_onRendered:function(e,t){if(this.isEmpty=r.every(this.datasets,function(e){return e.isEmpty()}),this.isEmpty)if(t.length>=this.minLength&&this.trigger("empty"),this.$empty)if(t.length<this.minLength)this._hide();else{var n=this.templates.empty({query:this.datasets[0]&&this.datasets[0].query});this.$empty.html(n),this.$empty.show(),this._show()}else r.any(this.datasets,function(e){return e.templates&&e.templates.empty})?t.length<this.minLength?this._hide():this._show():this._hide();else this.isOpen&&(this.$empty&&(this.$empty.empty(),this.$empty.hide()),t.length>=this.minLength?this._show():this._hide());this.trigger("datasetRendered")},_hide:function(){this.$container.hide()},_show:function(){this.$container.css("display","block"),this._redraw(),this.trigger("shown")},_redraw:function(){this.isOpen&&this.appendTo&&this.trigger("redrawn")},_getSuggestions:function(){return this.$menu.find(r.className(this.cssClasses.prefix,this.cssClasses.suggestion))},_getCursor:function(){return this.$menu.find(r.className(this.cssClasses.prefix,this.cssClasses.cursor)).first()},_setCursor:function(e,t){e.first().addClass(r.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).attr("aria-selected","true"),this.trigger("cursorMoved",t)},_removeCursor:function(){this._getCursor().removeClass(r.className(this.cssClasses.prefix,this.cssClasses.cursor,!0)).removeAttr("aria-selected")},_moveCursor:function(e){var t,n,i,o;this.isOpen&&(n=this._getCursor(),t=this._getSuggestions(),this._removeCursor(),-1!==(i=((i=t.index(n)+e)+1)%(t.length+1)-1)?(i<-1&&(i=t.length-1),this._setCursor(o=t.eq(i),!0),this._ensureVisible(o)):this.trigger("cursorRemoved"))},_ensureVisible:function(e){var t,n,i,o;n=(t=e.position().top)+e.height()+parseInt(e.css("margin-top"),10)+parseInt(e.css("margin-bottom"),10),i=this.$menu.scrollTop(),o=this.$menu.height()+parseInt(this.$menu.css("padding-top"),10)+parseInt(this.$menu.css("padding-bottom"),10),t<0?this.$menu.scrollTop(i+t):o<n&&this.$menu.scrollTop(i+(n-o))},close:function(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function(){this.isOpen||(this.isOpen=!0,this.isEmpty||this._show(),this.trigger("opened"))},setLanguageDirection:function(e){this.$menu.css("ltr"===e?this.css.ltr:this.css.rtl)},moveCursorUp:function(){this._moveCursor(-1)},moveCursorDown:function(){this._moveCursor(1)},getDatumForSuggestion:function(e){var t=null;return e.length&&(t={raw:o.extractDatum(e),value:o.extractValue(e),datasetName:o.extractDatasetName(e)}),t},getCurrentCursor:function(){return this._getCursor().first()},getDatumForCursor:function(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function(){return this.getDatumForSuggestion(this._getSuggestions().first())},cursorTopSuggestion:function(){this._setCursor(this._getSuggestions().first(),!1)},update:function(t){r.each(this.datasets,function(e){e.update(t)})},empty:function(){r.each(this.datasets,function(e){e.clear()}),this.isEmpty=!0},isVisible:function(){return this.isOpen&&!this.isEmpty},destroy:function(){this.$menu.off(".aa"),this.$menu=null,r.each(this.datasets,function(e){e.destroy()})}}),p.Dataset=o,e.exports=p},function(e,t,n){"use strict";var r="aaDataset",l="aaValue",c="aaDatum",p=n(4),d=n(2),u=n(18),i=n(19),o=n(8);function a(e){(e=e||{}).templates=e.templates||{},e.source||p.error("missing source"),e.name&&!function(e){return/^[_a-zA-Z0-9-]+$/.test(e)}(e.name)&&p.error("invalid dataset name: "+e.name),this.query=null,this._isEmpty=!0,this.highlight=!!e.highlight,this.name=void 0===e.name||null===e.name?p.getUniqueId():e.name,this.source=e.source,this.displayFn=function(t){return t=t||"value",p.isFunction(t)?t:function(e){return e[t]}}(e.display||e.displayKey),this.templates=function(e,t){return{empty:e.empty&&p.templatify(e.empty),header:e.header&&p.templatify(e.header),footer:e.footer&&p.templatify(e.footer),suggestion:e.suggestion||function(e){return"<p>"+t(e)+"</p>"}}}(e.templates,this.displayFn),this.css=p.mixin({},i,e.appendTo?i.appendTo:{}),this.cssClasses=e.cssClasses=p.mixin({},i.defaultClasses,e.cssClasses||{}),this.cssClasses.prefix=e.cssClasses.formattedPrefix||p.formatPrefix(this.cssClasses.prefix,this.cssClasses.noPrefix);var t=p.className(this.cssClasses.prefix,this.cssClasses.dataset);this.$el=e.$menu&&0<e.$menu.find(t+"-"+this.name).length?d.element(e.$menu.find(t+"-"+this.name)[0]):d.element(u.dataset.replace("%CLASS%",this.name).replace("%PREFIX%",this.cssClasses.prefix).replace("%DATASET%",this.cssClasses.dataset)),this.$menu=e.$menu,this.clearCachedSuggestions()}a.extractDatasetName=function(e){return d.element(e).data(r)},a.extractValue=function(e){return d.element(e).data(l)},a.extractDatum=function(e){var t=d.element(e).data(c);return"string"==typeof t&&(t=JSON.parse(t)),t},p.mixin(a.prototype,o,{_render:function(t,a){if(this.$el){var n,s=this,e=[].slice.call(arguments,2);this.$el.empty(),n=a&&a.length,this._isEmpty=!n,!n&&this.templates.empty?this.$el.html(function(){var e=[].slice.call(arguments,0);return e=[{query:t,isEmpty:!0}].concat(e),s.templates.empty.apply(this,e)}.apply(this,e)).prepend(s.templates.header?i.apply(this,e):null).append(s.templates.footer?o.apply(this,e):null):n&&this.$el.html(function(){var e,t,i=[].slice.call(arguments,0),o=this,n=u.suggestions.replace("%PREFIX%",this.cssClasses.prefix).replace("%SUGGESTIONS%",this.cssClasses.suggestions);return e=d.element(n).css(this.css.suggestions),t=p.map(a,function(e){var t,n=u.suggestion.replace("%PREFIX%",o.cssClasses.prefix).replace("%SUGGESTION%",o.cssClasses.suggestion);return(t=d.element(n).attr({role:"option",id:["option",Math.floor(1e8*Math.random())].join("-")}).append(s.templates.suggestion.apply(this,[e].concat(i)))).data(r,s.name),t.data(l,s.displayFn(e)||void 0),t.data(c,JSON.stringify(e)),t.children().each(function(){d.element(this).css(o.css.suggestionChild)}),t}),e.append.apply(e,t),e}.apply(this,e)).prepend(s.templates.header?i.apply(this,e):null).append(s.templates.footer?o.apply(this,e):null),this.$menu&&this.$menu.addClass(this.cssClasses.prefix+(n?"with":"without")+"-"+this.name).removeClass(this.cssClasses.prefix+(n?"without":"with")+"-"+this.name),this.trigger("rendered",t)}function i(){var e=[].slice.call(arguments,0);return e=[{query:t,isEmpty:!n}].concat(e),s.templates.header.apply(this,e)}function o(){var e=[].slice.call(arguments,0);return e=[{query:t,isEmpty:!n}].concat(e),s.templates.footer.apply(this,e)}},getRoot:function(){return this.$el},update:function(n){function e(e){if(!this.canceled&&n===this.query){var t=[].slice.call(arguments,1);this.cacheSuggestions(n,e,t),this._render.apply(this,[n,e].concat(t))}}this.query=n,this.canceled=!1,this.shouldFetchFromCache(n)?e.apply(this,[this.cachedSuggestions].concat(this.cachedRenderExtraArgs)):this.source(n,e.bind(this))},cacheSuggestions:function(e,t,n){this.cachedQuery=e,this.cachedSuggestions=t,this.cachedRenderExtraArgs=n},shouldFetchFromCache:function(e){return this.cachedQuery===e&&this.cachedSuggestions&&this.cachedSuggestions.length},clearCachedSuggestions:function(){delete this.cachedQuery,delete this.cachedSuggestions,delete this.cachedRenderExtraArgs},cancel:function(){this.canceled=!0},clear:function(){this.cancel(),this.$el.empty(),this.trigger("rendered","")},isEmpty:function(){return this._isEmpty},destroy:function(){this.clearCachedSuggestions(),this.$el=null}}),e.exports=a},function(e,t){"use strict";e.exports={wrapper:'<span class="%ROOT%"></span>',dropdown:'<span class="%PREFIX%%DROPDOWN_MENU%"></span>',dataset:'<div class="%PREFIX%%DATASET%-%CLASS%"></div>',suggestions:'<span class="%PREFIX%%SUGGESTIONS%"></span>',suggestion:'<div class="%PREFIX%%SUGGESTION%"></div>'}},function(e,t,n){"use strict";var i=n(4),o={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:"0"},defaultClasses:{root:"algolia-autocomplete",prefix:"aa",noPrefix:!1,dropdownMenu:"dropdown-menu",input:"input",hint:"hint",suggestions:"suggestions",suggestion:"suggestion",cursor:"cursor",dataset:"dataset",empty:"empty"},appendTo:{wrapper:{position:"absolute",zIndex:"100",display:"none"},input:{},inputWithNoHint:{},dropdown:{display:"block"}}};i.isMsie()&&i.mixin(o.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),i.isMsie()&&i.isMsie()<=7&&i.mixin(o.input,{marginTop:"-1px"}),e.exports=o},function(e,t,n){"use strict";e.exports={hits:n(21),popularIn:n(24)}},function(e,t,n){"use strict";var o=n(4),a=n(22),s=n(23);e.exports=function(t,i){var e=s(t.as._ua);return e&&3<=e[0]&&20<e[1]&&((i=i||{}).additionalUA="autocomplete.js "+a),function(e,n){t.search(e,i,function(e,t){e?o.error(e.message):n(t.hits,t)})}}},function(e,t){e.exports="0.29.0"},function(e,t){"use strict";e.exports=function(e){var t=e.match(/Algolia for vanilla JavaScript (\d+\.)(\d+\.)(\d+)/);if(t)return[t[1],t[2],t[3]]}},function(e,t,n){"use strict";var d=n(4),u=n(22),h=n(23);e.exports=function(t,i,o,l){var e=h(t.as._ua);if(e&&3<=e[0]&&20<e[1]&&((i=i||{}).additionalUA="autocomplete.js "+u),!o.source)return d.error("Missing 'source' key");var c=d.isFunction(o.source)?o.source:function(e){return e[o.source]};if(!o.index)return d.error("Missing 'index' key");var p=o.index;return l=l||{},function(e,r){t.search(e,i,function(e,a){if(e)d.error(e.message);else{if(0<a.hits.length){var s=a.hits[0],t=d.mixin({hitsPerPage:0},o);delete t.source,delete t.index;var n=h(p.as._ua);return n&&3<=n[0]&&20<n[1]&&(i.additionalUA="autocomplete.js "+u),void p.search(c(s),t,function(e,t){if(e)d.error(e.message);else{var i=[];if(l.includeAll){var n=l.allTitle||"All departments";i.push(d.mixin({facet:{value:n,count:t.nbHits}},d.cloneDeep(s)))}d.each(t.facets,function(e,n){d.each(e,function(e,t){i.push(d.mixin({facet:{facet:n,value:t,count:e}},d.cloneDeep(s)))})});for(var o=1;o<a.hits.length;++o)i.push(a.hits[o]);r(i,a)}})}r([])}})}}}]),jQuery.fn.algoliaAutocomplete=jQuery.fn.autocomplete.noConflict();var MMP_Geocoding=function(e,t,n,i,o){var a,h=this;this.type=e,this.provider=t,this.options=n,this.typingInterval=i,this.minChars=o,this.query=jQuery("#address").val(),this.providers={algolia:{footer:h.options.algolia.footer,results_key:"hits",geo_key:"_geoloc",get_url:function(){var e="https://places-dsn.algolia.net/1/places/query?query={query}&hitsPerPage=10";return h.options[h.provider].appId&&(e+="&x-algolia-application-id="+h.options[h.provider].appId),h.options[h.provider].apiKey&&(e+="&x-algolia-api-key="+h.options[h.provider].apiKey),e+="&language="+h.options[h.provider].language,h.options[h.provider].countries&&(e+="&countries="+h.options[h.provider].countries),e+=(h.options[h.provider].aroundLatLngViaIP,"true"),h.options[h.provider].aroundLatLng&&(e+="&aroundLatLng="+h.options[h.provider].aroundLatLng),e},format:function(e){var t=h.options[h.provider].language,n=e.administrative,i=e.city,o=e.country,a=e;if(void 0!==a._highlightResult.locale_names[0])var s=a._highlightResult.locale_names[0].value;else if(void 0!==a._highlightResult.locale_names[t][0])s=a._highlightResult.locale_names[t][0].value;else s="";i=i?a._highlightResult.city[0].value:void 0,n=n&&void 0!==a._highlightResult.administrative?a._highlightResult.administrative[0].value:void 0,o=o?a._highlightResult.country.value:void 0;var r=e._tags,l=h.get_unified_type(["country","city","address"],r),c=l.charAt(0).toUpperCase()+l.slice(1);return'<span class="ap-suggestion-icon ap-'+l+'" title="'+c+'"></span><span class="ap-name">'+s+'</span><span class="ap-address">'+(n?", "+n:"")+(i?", "+i:"")+(o?", "+o:"")+"</span>"},beforeSend:function(e){h.options[h.provider].appId&&h.options[h.provider].apiKey&&(e.setRequestHeader("X-Algolia-Application-Id",h.options[h.provider].appId),e.setRequestHeader("X-Algolia-API-Key",h.options[h.provider].apiKey))},displayError:function(e,t){200!=t.status&&(jQuery("#address").css("background","#ffc"),jQuery("#address-provider-status").html("Algolia places error "+e.status+": "+e.message))}},photon:{footer:h.options.photon.footer,results_key:"features",geo_key:"geometry.coordinates",get_url:function(){var e="https://photon.mapsmarker.com/pro/api?q={query}&limit=10";return h.options[h.provider].language&&(e+="&lang="+h.options[h.provider].language),"none"!=h.options[h.provider].locationbiaslat&&(e+="&lat="+h.options[h.provider].locationbiaslat),"none"!=h.options[h.provider].locationbiaslon&&(e+="&lon="+h.options[h.provider].locationbiaslon),"none"!=h.options[h.provider].filter&&(e+="&osm_tag="+h.options[h.provider].filter),e},format:function(e,t){var n=e.properties.country,i=e.properties.city,o=e.properties.housenumber,a=e.properties.street,s=e.properties.postcode,r=e.properties.state,l=void 0!==e.properties.name?e.properties.name.replace(t,"<em>"+t+"</em>"):"",c=(a?", "+a+(o?" "+o:""):"")+(s?" "+s:"")+(i?", "+i:"")+(r?", "+r:"")+(n?", "+n:"");c=c.replace(t,"<em>"+t+"</em>");var p=e.properties.osm_value,d=h.get_unified_type(["country","state","city","address"],p),u=d.charAt(0).toUpperCase()+d.slice(1);return'<span class="ap-suggestion-icon ap-'+d+'" title="'+u+'"></span><span class="ap-name">'+l+'</span><span class="ap-address">'+c+"</span>"},update_limit:function(e){var t=e.getResponseHeader("X-RateLimit-Limit-day"),n=e.getResponseHeader("X-RateLimit-Remaining-day");jQuery("#photon-rate-limit-static").css("display","none"),jQuery("#photon-rate-limit-dynamic").css("display","inline"),jQuery("#photon-rate-limit").html(t),jQuery("#photon-rate-limit-consumed").html(t-n)},displayError:function(e,t){var n=JSON.parse(t.responseText);200!=t.status&&(jQuery("#address").css("background","#ffc"),jQuery("#address-provider-status").html("Photon@MapsMarker error: "+n.message))}},locationiq:{footer:h.options.locationiq.footer,results_key:null,geo_key:null,get_url:function(){var e="https://api.locationiq.com/v1/autocomplete.php?q={query}&normalizecity=1&limit=10";return h.options[h.provider].apiKey&&(e+="&key="+h.options[h.provider].apiKey),h.options[h.provider].bounds&&(e+="&viewbox="+h.options[h.provider].lon1+","+h.options[h.provider].lat1+","+h.options[h.provider].lon2+","+h.options[h.provider].lat2),e+="&accept-language="+h.options[h.provider].language},format:function(e,t){var n=e.address.country,i=e.address.city,o=e.address.house_number,a=e.address.road,s=e.address.postcode,r=e.address.state,l=void 0!==e.address.name?e.address.name.replace(t,"<em>"+t+"</em>"):"",c=(a?", "+a+(o?" "+o:""):"")+(s?" "+s:"")+(i?", "+i:"")+(r?", "+r:"")+(n?", "+n:"");c=c.replace(t,"<em>"+t+"</em>");var p=e.type.toLowerCase(),d=h.get_unified_type(["country","state","city","address"],p),u=d.charAt(0).toUpperCase()+d.slice(1);return'<span class="ap-suggestion-icon ap-'+d+'" title="'+u+'"></span><span class="ap-name">'+l+'</span><span class="ap-address">'+c+"</span>"},displayError:function(e,t){200!=t.status&&(jQuery("#address").css("background","#ffc"),jQuery("#address-provider-status").html("LocationIQ error "+e.status+": "+e.message))}},mapquest:{footer:h.options.mapquest.footer,results_key:"results.locations",geo_key:"latLng",get_url:function(){var e="https://www.mapquestapi.com/geocoding/v1/address?location={query}&maxResults=10";return h.options[h.provider].api_key&&(e+="&key="+h.options[h.provider].api_key),h.options[h.provider].boundingBox&&(e+="&boundingBox="+h.options[h.provider].lat1+","+h.options[h.provider].lon1+","+h.options[h.provider].lat2+","+h.options[h.provider].lon2),e},format:function(e,t){var n="";n+=void 0!==e.street&&""!=e.street?e.street+", ":"",n+=void 0!==e.adminArea5&&""!=e.adminArea5?e.adminArea5+", ":"",n+=void 0!==e.adminArea4&&""!=e.adminArea4?e.adminArea4+", ":"",n+=void 0!==e.adminArea3&&""!=e.adminArea3?e.adminArea3+", ":"",n+=void 0!==e.adminArea2&&""!=e.adminArea2?e.adminArea2+", ":"",n+=void 0!==e.adminArea1&&""!=e.adminArea1?e.adminArea1:"";var i=e.geocodeQuality.toLowerCase(),o=h.get_unified_type(["country","city","address"],i),a=o.charAt(0).toUpperCase()+o.slice(1);return'<span class="ap-suggestion-icon ap-'+o+'" title="'+a+'"></span><span class="ap-name">'+n.replace(t,"<em>"+t+"</em>")+"</span>"},displayError:function(e,t){200!=t.status&&(void 0!==n.street?0!=e.info.statuscode&&jQuery("#address-provider-status").html("Error: "+e.info.messages.join(", ")):jQuery("#address-provider-status").html(jQuery("#defaults_texts_mapquest_key_issue").html()+" ("+t.responseText+")"))}},google:{footer:h.options.google.footer,results_key:"results",geo_key:"geometry.location",get_url:function(){var e=mmpAdminVars.baseUrl+"index.php?mapsmarkerpro=google-places&address={query}";return h.options[h.provider].nonce&&(e+="&nonce="+h.options[h.provider].nonce),e},format:function(e,t){var n=e.types,i=h.get_unified_type(["country","locality","street_address"],n),o=i.charAt(0).toUpperCase()+i.slice(1);return'<span class="ap-suggestion-icon ap-'+i+'" title="'+o+'"></span><span class="ap-name">'+e.formatted_address.replace(t,"<em>"+t+"</em>")+"</span>"},displayError:function(e){"OK"!=e.status&&"ZERO_RESULTS"!=e.status&&(jQuery("#address").css("background","#ffc"),jQuery("#address-provider-status").html("Google Geocoding error: "+e.status))}}},this.init=function(){jQuery("#address").algoliaAutocomplete({minLength:o,hint:!1,autoselect:!0,openOnFocus:!1,debug:!1},[{source:function(e,o){a&&clearTimeout(a),a=setTimeout(function(){if(h.query=jQuery("#address").val(),h.query.length>=h.minChars)jQuery.ajax({url:h.providers[h.provider].get_url().replace("{query}",h.query),type:"GET",beforeSend:function(e){jQuery("#address").addClass("results-loading"),"function"==typeof h.providers[h.provider].beforeSend&&h.providers[h.provider].beforeSend(e)}}).done(function(n,e,t){if("GOOGLE-ERROR"==n.status)jQuery("#address-provider-status").html("Google Geocoding error: "+n.results.status+": "+n.results.error_message),jQuery("#address").algoliaAutocomplete("destroy"),h.provider=h.options.fallback,h.init(),jQuery("#address").focus(),jQuery("#address").removeClass("results-loading"),jQuery("#address").css("background","#ffc"),jQuery("#s2id_geocoding-provider-select").select2("val",h.provider),jQuery("#address-rate-limit-details").html(jQuery("#defaults_texts_geocoding_fallback_info").val());else if("ZERO_RESULTS"==n.status)jQuery("#address").removeClass("results-loading");else{if("locationiq"==h.provider&&0!=n.length)jQuery.each(n,function(e,t){n[e].name=jQuery(h.providers[h.provider].format(t,h.query)).text().trim()}),o(n,n);else if("mapquest"==h.provider&&0!=n.results[0].locations.length)jQuery.each(n.results[0].locations,function(e,t){n.results[0].locations[e].name=jQuery(h.providers[h.provider].format(t,h.query)).text().trim()}),o(n.results[0].locations,n);else if(0!=n[h.providers[h.provider].results_key].length){var i=h.providers[h.provider].results_key;jQuery.each(n[i],function(e,t){n[i][e].name=jQuery(h.providers[h.provider].format(t,h.query)).text().trim()}),o(n[i],n)}jQuery("#address").removeClass("results-loading"),"function"==typeof h.providers[h.provider].update_limit&&h.providers[h.provider].update_limit(t),"function"==typeof h.providers[h.provider].displayError&&h.providers[h.provider].displayError(n,t)}}).fail(function(e){"function"==typeof h.providers[h.provider].displayError&&h.providers[h.provider].displayError(e.responseJSON,e);var t=jQuery("#address").val();jQuery("#address").algoliaAutocomplete("destroy"),h.provider=h.options.fallback,h.init(),jQuery("#address").focus(),(e=jQuery.Event("keydown")).which=50,jQuery("#address").trigger(e),jQuery("#address").val(t),jQuery("#address").removeClass("results-loading"),jQuery("#address").css("background","#ffc"),jQuery("#s2id_geocoding-provider-select").select2("val",h.provider),jQuery("#address-rate-limit-details").html(jQuery("#defaults_texts_geocoding_fallback_info").val()),setTimeout(function(){jQuery("#address").algoliaAutocomplete("open")},500)})},h.typingInterval)},displayKey:"name",templates:{suggestion:function(e){var t=jQuery("#address").val();return h.providers[h.provider].format(e,t)},footer:h.providers[h.provider].footer,header:'<div id="geocoding-results-header-div">'+h.options.header+'</div> <div id="geocoding-results-header-image-div"><img src="'+mmpAdminVars.pluginUrl+'images/geocoding/icon-key-enter.png" width="" height="" alt="enter key icon" /></div><div style="clear:both;border-bottom:1px solid #ccc;"></div>'}}]).on("autocomplete:selected",function(e,t){if("google"!=h.provider)if("locationiq"==h.provider)h.selected(parseFloat(t.lat),parseFloat(t.lon));else{var n=h.providers[h.provider].geo_key;-1!=n.indexOf(".")?(n=n.split("."),"photon"==h.provider?h.selected(t[n[0]][n[1]][1],t[n[0]][n[1]][0]):h.selected(t[n[0]][n[1]].lat,t[n[0]][n[1]].lng)):h.selected(t[n].lat,t[n].lng)}else h.google_places_selected(t.place_id)})},this.selected=function(e,t){"map"===h.type?(mmpAdmin.map.panTo([e,t]),jQuery("#lat").val(e.toFixed(6)),jQuery("#lng").val(t.toFixed(6))):"marker"===h.type&&(editMarker.marker.setLatLng([e,t]),editMarker.map.panTo(editMarker.marker.getLatLng()),jQuery("#lat").val(editMarker.marker.getLatLng().lat.toFixed(6)),jQuery("#lng").val(editMarker.marker.getLatLng().lng.toFixed(6)))},this.google_places_selected=function(e){var t=mmpAdminVars.baseUrl+"index.php?mapsmarkerpro=google-places&place_id={place_id}&nonce={wpnonce}";jQuery.ajax({url:t.replace("{place_id}",e).replace("{wpnonce}",h.options[h.provider].nonce),type:"GET",beforeSend:function(e){jQuery("#address").addClass("results-loading"),"function"==typeof h.providers[h.provider].beforeSend&&h.providers[h.provider].beforeSend(e)}}).done(function(e,t,n){jQuery("#address").removeClass("results-loading"),"OK"==e.status&&h.selected(e.results.geometry.location.lat,e.results.geometry.location.lng)})},this.get_unified_type=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];if(-1!==t.indexOf(i))break}switch(i){case"address":case"street_address":return"address";case"city":case"locality":case"venue":return"city";case"state":case"country":return"country";default:return"address"}}};function QR8bitByte(e){this.mode=QRMode.MODE_8BIT_BYTE,this.data=e}function QRCode(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=new Array}!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery")):e(jQuery)}(function(De,Ee){"use strict";var e,Oe={beforeShow:n,move:n,change:n,show:n,hide:n,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},Re=[],$e=!!/msie/i.exec(window.navigator.userAgent),Pe=((e=document.createElement("div").style).cssText="background-color:rgba(0,0,0,.5)",t(e.backgroundColor,"rgba")||t(e.backgroundColor,"hsla")),Me=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),je=function(){var e="";if($e)for(var t=1;t<=6;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function t(e,t){return!!~(""+e).indexOf(t)}function Ie(e,t,n,i){for(var o=[],a=0;a<e.length;a++){var s=e[a];if(s){var r=tinycolor(s),l=r.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";l+=tinycolor.equals(t,s)?" sp-thumb-active":"";var c=r.toString(i.preferredFormat||"rgb"),p=Pe?"background-color:"+r.toRgbString():"filter:"+r.toFilter();o.push('<span title="'+c+'" data-color="'+r.toRgbString()+'" class="'+l+'"><span class="sp-thumb-inner" style="'+p+';" /></span>')}else{o.push(De("<div />").append(De('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",i.noColorSelectedText)).html())}}return"<div class='sp-cf "+n+"'>"+o.join("")+"</div>"}function a(e,t){var c=function(e,t){var n=De.extend({},Oe,e);return n.callbacks={move:Be(n.move,t),change:Be(n.change,t),show:Be(n.show,t),hide:Be(n.hide,t),beforeShow:Be(n.beforeShow,t)},n}(t,e),i=c.flat,n=c.showSelectionPalette,o=c.localStorageKey,a=c.theme,s=c.callbacks,r=function(n,i,o){var a;return function(){var e=this,t=arguments;o&&clearTimeout(a),!o&&a||(a=setTimeout(function(){a=null,n.apply(e,t)},i))}}(Se,10),l=!1,p=!1,d=0,u=0,h=0,m=0,f=0,g=0,v=0,y=0,b=0,_=0,w=1,x=[],A=[],k={},C=c.selectionPalette.slice(0),S=c.maxSelectionSize,L="sp-dragging",T=null,D=e.ownerDocument,E=(D.body,De(e)),O=!1,R=De(je,D).addClass(a),$=R.find(".sp-picker-container"),P=R.find(".sp-color"),M=R.find(".sp-dragger"),j=R.find(".sp-hue"),I=R.find(".sp-slider"),F=R.find(".sp-alpha-inner"),B=R.find(".sp-alpha"),Q=R.find(".sp-alpha-handle"),H=R.find(".sp-input"),N=R.find(".sp-palette"),q=R.find(".sp-initial"),U=R.find(".sp-cancel"),z=R.find(".sp-clear"),W=R.find(".sp-choose"),G=R.find(".sp-palette-toggle"),K=E.is("input"),V=K&&"color"===E.attr("type")&&He(),Z=K&&!i,J=Z?De(Me).addClass(a).addClass(c.className).addClass(c.replacerClassName):De([]),X=Z?J:E,Y=J.find(".sp-preview-inner"),ee=c.color||K&&E.val(),te=!1,ne=c.preferredFormat,ie=!c.showButtons||c.clickoutFiresChange,oe=!ee,ae=c.allowEmpty&&!V;function se(){if(c.showPaletteOnly&&(c.showPalette=!0),G.text(c.showPaletteOnly?c.togglePaletteMoreText:c.togglePaletteLessText),c.palette){x=c.palette.slice(0),A=De.isArray(x[0])?x:[x],k={};for(var e=0;e<A.length;e++)for(var t=0;t<A[e].length;t++){var n=tinycolor(A[e][t]).toRgbString();k[n]=!0}}R.toggleClass("sp-flat",i),R.toggleClass("sp-input-disabled",!c.showInput),R.toggleClass("sp-alpha-enabled",c.showAlpha),R.toggleClass("sp-clear-enabled",ae),R.toggleClass("sp-buttons-disabled",!c.showButtons),R.toggleClass("sp-palette-buttons-disabled",!c.togglePaletteOnly),R.toggleClass("sp-palette-disabled",!c.showPalette),R.toggleClass("sp-palette-only",c.showPaletteOnly),R.toggleClass("sp-initial-disabled",!c.showInitial),R.addClass(c.className).addClass(c.containerClassName),Se()}function re(){if(o&&window.localStorage){try{var e=window.localStorage[o].split(",#");1<e.length&&(delete window.localStorage[o],De.each(e,function(e,t){le(t)}))}catch(e){}try{C=window.localStorage[o].split(";")}catch(e){}}}function le(e){if(n){var t=tinycolor(e).toRgbString();if(!k[t]&&-1===De.inArray(t,C))for(C.push(t);C.length>S;)C.shift();if(o&&window.localStorage)try{window.localStorage[o]=C.join(";")}catch(e){}}}function ce(){var n=we(),e=De.map(A,function(e,t){return Ie(e,n,"sp-palette-row sp-palette-row-"+t,c)});re(),C&&e.push(Ie(function(){var e=[];if(c.showPalette)for(var t=0;t<C.length;t++){var n=tinycolor(C[t]).toRgbString();k[n]||e.push(C[t])}return e.reverse().slice(0,c.maxSelectionSize)}(),n,"sp-palette-row sp-palette-row-selection",c)),N.html(e.join(""))}function pe(){if(c.showInitial){var e=te,t=we();q.html(Ie([e,t],t,"sp-palette-row-initial",c))}}function de(){(u<=0||d<=0||m<=0)&&Se(),p=!0,R.addClass(L),T=null,E.trigger("dragstart.spectrum",[we()])}function ue(){p=!1,R.removeClass(L),E.trigger("dragstop.spectrum",[we()])}function he(){var e=H.val();if(null!==e&&""!==e||!ae){var t=tinycolor(e);t.isValid()?(_e(t),Ce(!0)):H.addClass("sp-validation-error")}else _e(null),Ce(!0)}function me(){l?ye():fe()}function fe(){var e=De.Event("beforeShow.spectrum");l?Se():(E.trigger(e,[we()]),!1===s.beforeShow(we())||e.isDefaultPrevented()||(function(){for(var e=0;e<Re.length;e++)Re[e]&&Re[e].hide()}(),l=!0,De(D).bind("keydown.spectrum",ge),De(D).bind("click.spectrum",ve),De(window).bind("resize.spectrum",r),J.addClass("sp-active"),R.removeClass("sp-hidden"),Se(),Ae(),te=we(),pe(),s.show(te),E.trigger("show.spectrum",[te])))}function ge(e){27===e.keyCode&&ye()}function ve(e){2!=e.button&&(p||(ie?Ce(!0):be(),ye()))}function ye(){l&&!i&&(l=!1,De(D).unbind("keydown.spectrum",ge),De(D).unbind("click.spectrum",ve),De(window).unbind("resize.spectrum",r),J.removeClass("sp-active"),R.addClass("sp-hidden"),s.hide(we()),E.trigger("hide.spectrum",[we()]))}function be(){_e(te,!0)}function _e(e,t){var n,i;tinycolor.equals(e,we())?Ae():(!e&&ae?oe=!0:(oe=!1,i=(n=tinycolor(e)).toHsv(),y=i.h%360/360,b=i.s,_=i.v,w=i.a),Ae(),n&&n.isValid()&&!t&&(ne=c.preferredFormat||n.getFormat()))}function we(e){return e=e||{},ae&&oe?null:tinycolor.fromRatio({h:y,s:b,v:_,a:Math.round(100*w)/100},{format:e.format||ne})}function xe(){Ae(),s.move(we()),E.trigger("move.spectrum",[we()])}function Ae(){H.removeClass("sp-validation-error"),ke();var e=tinycolor.fromRatio({h:y,s:1,v:1});P.css("background-color",e.toHexString());var t=ne;w<1&&(0!==w||"name"!==t)&&("hex"!==t&&"hex3"!==t&&"hex6"!==t&&"name"!==t||(t="rgb"));var n=we({format:t}),i="";if(Y.removeClass("sp-clear-display"),Y.css("background-color","transparent"),!n&&ae)Y.addClass("sp-clear-display");else{var o=n.toHexString(),a=n.toRgbString();if(Pe||1===n.alpha?Y.css("background-color",a):(Y.css("background-color","transparent"),Y.css("filter",n.toFilter())),c.showAlpha){var s=n.toRgb();s.a=0;var r=tinycolor(s).toRgbString(),l="linear-gradient(left, "+r+", "+o+")";$e?F.css("filter",tinycolor(r).toFilter({gradientType:1},o)):(F.css("background","-webkit-"+l),F.css("background","-moz-"+l),F.css("background","-ms-"+l),F.css("background","linear-gradient(to right, "+r+", "+o+")"))}i=n.toString(t)}c.showInput&&H.val(i),c.showPalette&&ce(),pe()}function ke(){var e=b,t=_;if(ae&&oe)Q.hide(),I.hide(),M.hide();else{Q.show(),I.show(),M.show();var n=e*d,i=u-t*u;n=Math.max(-h,Math.min(d-h,n-h)),i=Math.max(-h,Math.min(u-h,i-h)),M.css({top:i+"px",left:n+"px"});var o=w*f;Q.css({left:o-g/2+"px"});var a=y*m;I.css({top:a-v+"px"})}}function Ce(e){var t=we(),n="",i=!tinycolor.equals(t,te);t&&(n=t.toString(ne),le(t)),K&&E.val(n),e&&i&&(s.change(t),E.trigger("change",[t]))}function Se(){l&&(d=P.width(),u=P.height(),h=M.height(),j.width(),m=j.height(),v=I.height(),f=B.width(),g=Q.width(),i||(R.css("position","absolute"),c.offset?R.offset(c.offset):R.offset(function(e,t){var n=e.outerWidth(),i=e.outerHeight(),o=t.outerHeight(),a=e[0].ownerDocument,s=a.documentElement,r=s.clientWidth+De(a).scrollLeft(),l=s.clientHeight+De(a).scrollTop(),c=t.offset();return c.top+=o,c.left-=Math.min(c.left,c.left+n>r&&n<r?Math.abs(c.left+n-r):0),c.top-=Math.min(c.top,c.top+i>l&&i<l?Math.abs(i+o-0):0),c}(R,X))),ke(),c.showPalette&&ce(),E.trigger("reflow.spectrum"))}function Le(){ye(),O=!0,E.attr("disabled",!0),X.addClass("sp-disabled")}!function(){if($e&&R.find("*:not(input)").attr("unselectable","on"),se(),Z&&E.after(J).hide(),ae||z.hide(),i)E.after(R).hide();else{var e="parent"===c.appendTo?E.parent():De(c.appendTo);1!==e.length&&(e=De("body")),e.append(R)}function t(e){return e.data&&e.data.ignore?(_e(De(e.target).closest(".sp-thumb-el").data("color")),xe()):(_e(De(e.target).closest(".sp-thumb-el").data("color")),xe(),Ce(!0),c.hideAfterPaletteSelect&&ye()),!1}re(),X.bind("click.spectrum touchstart.spectrum",function(e){O||me(),e.stopPropagation(),De(e.target).is("input")||e.preventDefault()}),!E.is(":disabled")&&!0!==c.disabled||Le(),R.click(Fe),H.change(he),H.bind("paste",function(){setTimeout(he,1)}),H.keydown(function(e){13==e.keyCode&&he()}),U.text(c.cancelText),U.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),be(),ye()}),z.attr("title",c.clearText),z.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),oe=!0,xe(),i&&Ce(!0)}),W.text(c.chooseText),W.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),$e&&H.is(":focus")&&H.trigger("change"),H.hasClass("sp-validation-error")||(Ce(!0),ye())}),G.text(c.showPaletteOnly?c.togglePaletteMoreText:c.togglePaletteLessText),G.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),c.showPaletteOnly=!c.showPaletteOnly,c.showPaletteOnly||i||R.css("left","-="+($.outerWidth(!0)+5)),se()}),Qe(B,function(e,t,n){w=e/f,oe=!1,n.shiftKey&&(w=Math.round(10*w)/10),xe()},de,ue),Qe(j,function(e,t){y=parseFloat(t/m),oe=!1,c.showAlpha||(w=1),xe()},de,ue),Qe(P,function(e,t,n){if(n.shiftKey){if(!T){var i=b*d,o=u-_*u,a=Math.abs(e-i)>Math.abs(t-o);T=a?"x":"y"}}else T=null;var s=!T||"y"===T;T&&"x"!==T||(b=parseFloat(e/d)),s&&(_=parseFloat((u-t)/u)),oe=!1,c.showAlpha||(w=1),xe()},de,ue),ee?(_e(ee),Ae(),ne=c.preferredFormat||tinycolor(ee).format,le(ee)):Ae(),i&&fe();var n=$e?"mousedown.spectrum":"click.spectrum touchstart.spectrum";N.delegate(".sp-thumb-el",n,t),q.delegate(".sp-thumb-el:nth-child(1)",n,{ignore:!0},t)}();var Te={show:fe,hide:ye,toggle:me,reflow:Se,option:function(e,t){return e===Ee?De.extend({},c):t===Ee?c[e]:(c[e]=t,"preferredFormat"===e&&(ne=c.preferredFormat),void se())},enable:function(){O=!1,E.attr("disabled",!1),X.removeClass("sp-disabled")},disable:Le,offset:function(e){c.offset=e,Se()},set:function(e){_e(e),Ce()},get:we,destroy:function(){E.show(),X.unbind("click.spectrum touchstart.spectrum"),R.remove(),J.remove(),Re[Te.id]=null},container:R};return Te.id=Re.push(Te)-1,Te}function n(){}function Fe(e){e.stopPropagation()}function Be(e,t){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return e.apply(t,i.concat(n.call(arguments)))}}function Qe(s,r,t,e){r=r||function(){},t=t||function(){},e=e||function(){};var l=document,c=!1,p={},d=0,u=0,h="ontouchstart"in window,n={};function m(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function i(e){if(c){if($e&&l.documentMode<9&&!e.button)return f();var t=e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0],n=t&&t.pageX||e.pageX,i=t&&t.pageY||e.pageY,o=Math.max(0,Math.min(n-p.left,u)),a=Math.max(0,Math.min(i-p.top,d));h&&m(e),r.apply(s,[o,a,e])}}function f(){c&&(De(l).unbind(n),De(l.body).removeClass("sp-dragging"),setTimeout(function(){e.apply(s,arguments)},0)),c=!1}n.selectstart=m,n.dragstart=m,n["touchmove mousemove"]=i,n["touchend mouseup"]=f,De(s).bind("touchstart mousedown",function(e){(e.which?3==e.which:2==e.button)||c||!1!==t.apply(s,arguments)&&(c=!0,d=De(s).height(),u=De(s).width(),p=De(s).offset(),De(l).bind(n),De(l.body).addClass("sp-dragging"),i(e),m(e))})}function He(){return De.fn.spectrum.inputTypeColorSupport()}var s="spectrum.id";De.fn.spectrum=function(n,e){if("string"!=typeof n)return this.spectrum("destroy").each(function(){var e=a(this,De.extend({},n,De(this).data()));De(this).data(s,e.id)});var i=this,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=Re[De(this).data(s)];if(e){var t=e[n];if(!t)throw new Error("Spectrum: no such method: '"+n+"'");"get"==n?i=e.get():"container"==n?i=e.container:"option"==n?i=e.option.apply(e,o):"destroy"==n?(e.destroy(),De(this).removeData(s)):t.apply(e,o)}}),i},De.fn.spectrum.load=!0,De.fn.spectrum.loadOpts={},De.fn.spectrum.draggable=Qe,De.fn.spectrum.defaults=Oe,De.fn.spectrum.inputTypeColorSupport=function e(){if(void 0===e._cachedResult){var t=De("<input type='color'/>")[0];e._cachedResult="color"===t.type&&""!==t.value}return e._cachedResult},De.spectrum={},De.spectrum.localization={},De.spectrum.palettes={},De.fn.spectrum.processNativeColorInputs=function(){var e=De("input[type=color]");e.length&&!He()&&e.spectrum({preferredFormat:"hex6"})},function(){var a=/^[\s,#]+/,s=/\s+$/,i=0,c=Math,r=c.round,p=c.min,d=c.max,e=c.random,u=function(e,t){if(t=t||{},(e=e||"")instanceof u)return e;if(!(this instanceof u))return new u(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,i=!1,o=!1;"string"==typeof e&&(e=function(e){e=e.replace(a,"").replace(s,"").toLowerCase();var t,n=!1;if(S[e])e=S[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=I.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=I.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=I.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=I.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=I.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=I.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=I.hex8.exec(e))return{a:function(e){return O(e)/255}(t[1]),r:O(t[2]),g:O(t[3]),b:O(t[4]),format:n?"name":"hex8"};if(t=I.hex6.exec(e))return{r:O(t[1]),g:O(t[2]),b:O(t[3]),format:n?"name":"hex"};if(t=I.hex3.exec(e))return{r:O(t[1]+""+t[1]),g:O(t[2]+""+t[2]),b:O(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==typeof e&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=function(e,t,n){return{r:255*D(e,255),g:255*D(t,255),b:255*D(n,255)}}(e.r,e.g,e.b),i=!0,o="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=$(e.s),e.v=$(e.v),t=function(e,t,n){e=6*D(e,360),t=D(t,100),n=D(n,100);var i=c.floor(e),o=e-i,a=n*(1-t),s=n*(1-o*t),r=n*(1-(1-o)*t),l=i%6;return{r:255*[n,s,a,a,r,n][l],g:255*[r,n,n,s,a,a][l],b:255*[a,a,r,n,n,s][l]}}(e.h,e.s,e.v),i=!0,o="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=$(e.s),e.l=$(e.l),t=function(e,t,n){var i,o,a;function s(e,t,n){return n<0&&(n+=1),1<n&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=D(e,360),t=D(t,100),n=D(n,100),0===t)i=o=a=n;else{var r=n<.5?n*(1+t):n+t-n*t,l=2*n-r;i=s(l,r,e+1/3),o=s(l,r,e),a=s(l,r,e-1/3)}return{r:255*i,g:255*o,b:255*a}}(e.h,e.s,e.l),i=!0,o="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=T(n),{ok:i,format:e.format||o,r:p(255,d(t.r,0)),g:p(255,d(t.g,0)),b:p(255,d(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=r(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=r(this._r)),this._g<1&&(this._g=r(this._g)),this._b<1&&(this._b=r(this._b)),this._ok=n.ok,this._tc_id=i++};function o(e,t,n){e=D(e,255),t=D(t,255),n=D(n,255);var i,o,a=d(e,t,n),s=p(e,t,n),r=(a+s)/2;if(a==s)i=o=0;else{var l=a-s;switch(o=.5<r?l/(2-a-s):l/(a+s),a){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:o,l:r}}function l(e,t,n){e=D(e,255),t=D(t,255),n=D(n,255);var i,o,a=d(e,t,n),s=p(e,t,n),r=a,l=a-s;if(o=0===a?0:l/a,a==s)i=0;else{switch(a){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:o,v:r}}function t(e,t,n,i){var o=[R(r(e).toString(16)),R(r(t).toString(16)),R(r(n).toString(16))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function h(e,t,n,i){return[R(function(e){return Math.round(255*parseFloat(e)).toString(16)}(i)),R(r(e).toString(16)),R(r(t).toString(16)),R(r(n).toString(16))].join("")}function n(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.s-=t/100,n.s=E(n.s),u(n)}function m(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.s+=t/100,n.s=E(n.s),u(n)}function f(e){return u(e).desaturate(100)}function g(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.l+=t/100,n.l=E(n.l),u(n)}function v(e,t){t=0===t?0:t||10;var n=u(e).toRgb();return n.r=d(0,p(255,n.r-r(-t/100*255))),n.g=d(0,p(255,n.g-r(-t/100*255))),n.b=d(0,p(255,n.b-r(-t/100*255))),u(n)}function y(e,t){t=0===t?0:t||10;var n=u(e).toHsl();return n.l-=t/100,n.l=E(n.l),u(n)}function b(e,t){var n=u(e).toHsl(),i=(r(n.h)+t)%360;return n.h=i<0?360+i:i,u(n)}function _(e){var t=u(e).toHsl();return t.h=(t.h+180)%360,u(t)}function w(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+120)%360,s:t.s,l:t.l}),u({h:(n+240)%360,s:t.s,l:t.l})]}function x(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+90)%360,s:t.s,l:t.l}),u({h:(n+180)%360,s:t.s,l:t.l}),u({h:(n+270)%360,s:t.s,l:t.l})]}function A(e){var t=u(e).toHsl(),n=t.h;return[u(e),u({h:(n+72)%360,s:t.s,l:t.l}),u({h:(n+216)%360,s:t.s,l:t.l})]}function k(e,t,n){t=t||6,n=n||30;var i=u(e).toHsl(),o=360/n,a=[u(e)];for(i.h=(i.h-(o*t>>1)+720)%360;--t;)i.h=(i.h+o)%360,a.push(u(i));return a}function C(e,t){t=t||6;for(var n=u(e).toHsv(),i=n.h,o=n.s,a=n.v,s=[],r=1/t;t--;)s.push(u({h:i,s:o,v:a})),a=(a+r)%1;return s}u.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},setAlpha:function(e){return this._a=T(e),this._roundA=r(100*this._a)/100,this},toHsv:function(){var e=l(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=l(this._r,this._g,this._b),t=r(360*e.h),n=r(100*e.s),i=r(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=o(this._r,this._g,this._b),t=r(360*e.h),n=r(100*e.s),i=r(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+i+"%)":"hsla("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHex:function(e){return t(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return h(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:r(this._r),g:r(this._g),b:r(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+r(this._r)+", "+r(this._g)+", "+r(this._b)+")":"rgba("+r(this._r)+", "+r(this._g)+", "+r(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:r(100*D(this._r,255))+"%",g:r(100*D(this._g,255))+"%",b:r(100*D(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+r(100*D(this._r,255))+"%, "+r(100*D(this._g,255))+"%, "+r(100*D(this._b,255))+"%)":"rgba("+r(100*D(this._r,255))+"%, "+r(100*D(this._g,255))+"%, "+r(100*D(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(L[t(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+h(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";e&&(n=u(e).toHex8String());return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&0<=this._a;return t||!i||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(v,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(n,arguments)},saturate:function(){return this._applyModification(m,arguments)},greyscale:function(){return this._applyModification(f,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(k,arguments)},complement:function(){return this._applyCombination(_,arguments)},monochromatic:function(){return this._applyCombination(C,arguments)},splitcomplement:function(){return this._applyCombination(A,arguments)},triad:function(){return this._applyCombination(w,arguments)},tetrad:function(){return this._applyCombination(x,arguments)}},u.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]="a"===i?e[i]:$(e[i]));e=n}return u(e,t)},u.equals=function(e,t){return!(!e||!t)&&u(e).toRgbString()==u(t).toRgbString()},u.random=function(){return u.fromRatio({r:e(),g:e(),b:e()})},u.mix=function(e,t,n){n=0===n?0:n||50;var i,o=u(e).toRgb(),a=u(t).toRgb(),s=n/100,r=2*s-1,l=a.a-o.a,c=1-(i=((i=r*l==-1?r:(r+l)/(1+r*l))+1)/2),p={r:a.r*i+o.r*c,g:a.g*i+o.g*c,b:a.b*i+o.b*c,a:a.a*s+o.a*(1-s)};return u(p)},u.readability=function(e,t){var n=u(e),i=u(t),o=n.toRgb(),a=i.toRgb(),s=n.getBrightness(),r=i.getBrightness(),l=Math.max(o.r,a.r)-Math.min(o.r,a.r)+Math.max(o.g,a.g)-Math.min(o.g,a.g)+Math.max(o.b,a.b)-Math.min(o.b,a.b);return{brightness:Math.abs(s-r),color:l}},u.isReadable=function(e,t){var n=u.readability(e,t);return 125<n.brightness&&500<n.color},u.mostReadable=function(e,t){for(var n=null,i=0,o=!1,a=0;a<t.length;a++){var s=u.readability(e,t[a]),r=125<s.brightness&&500<s.color,l=s.brightness/125*3+s.color/500;(r&&!o||r&&o&&i<l||!r&&!o&&i<l)&&(o=r,i=l,n=u(t[a]))}return n};var S=u.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},L=u.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(S);function T(e){return e=parseFloat(e),(isNaN(e)||e<0||1<e)&&(e=1),e}function D(e,t){!function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}(e)||(e="100%");var n=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=p(t,d(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),c.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function E(e){return p(1,d(0,e))}function O(e){return parseInt(e,16)}function R(e){return 1==e.length?"0"+e:""+e}function $(e){return e<=1&&(e=100*e+"%"),e}var P,M,j,I=(M="[\\s|\\(]+("+(P="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+P+")[,|\\s]+("+P+")\\s*\\)?",j="[\\s|\\(]+("+P+")[,|\\s]+("+P+")[,|\\s]+("+P+")[,|\\s]+("+P+")\\s*\\)?",{rgb:new RegExp("rgb"+M),rgba:new RegExp("rgba"+j),hsl:new RegExp("hsl"+M),hsla:new RegExp("hsla"+j),hsv:new RegExp("hsv"+M),hsva:new RegExp("hsva"+j),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=u}(),De(function(){De.fn.spectrum.load&&De.fn.spectrum.processNativeColorInputs()})}),function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(t),t}:n(jQuery)}(function(p){var e=function(){if(p&&p.fn&&p.fn.select2&&p.fn.select2.amd)var e=p.fn.select2.amd;var t,n,i,h,a,s,m,f,g,v,y,b,o,r,_;function w(e,t){return o.call(e,t)}function l(e,t){var n,i,o,a,s,r,l,c,p,d,u,h=t&&t.split("/"),m=y.map,f=m&&m["*"]||{};if(e){for(s=(e=e.split("/")).length-1,y.nodeIdCompat&&_.test(e[s])&&(e[s]=e[s].replace(_,"")),"."===e[0].charAt(0)&&h&&(e=h.slice(0,h.length-1).concat(e)),p=0;p<e.length;p++)if("."===(u=e[p]))e.splice(p,1),p-=1;else if(".."===u){if(0===p||1===p&&".."===e[2]||".."===e[p-1])continue;0<p&&(e.splice(p-1,2),p-=2)}e=e.join("/")}if((h||f)&&m){for(p=(n=e.split("/")).length;0<p;p-=1){if(i=n.slice(0,p).join("/"),h)for(d=h.length;0<d;d-=1)if(o=(o=m[h.slice(0,d).join("/")])&&o[i]){a=o,r=p;break}if(a)break;!l&&f&&f[i]&&(l=f[i],c=p)}!a&&l&&(a=l,r=c),a&&(n.splice(0,r,a),e=n.join("/"))}return e}function x(t,n){return function(){var e=r.call(arguments,0);return"string"!=typeof e[0]&&1===e.length&&e.push(null),s.apply(h,e.concat([t,n]))}}function A(t){return function(e){g[t]=e}}function k(e){if(w(v,e)){var t=v[e];delete v[e],b[e]=!0,a.apply(h,t)}if(!w(g,e)&&!w(b,e))throw new Error("No "+e);return g[e]}function c(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function C(e){return e?c(e):[]}return e&&e.requirejs||(e?n=e:e={},g={},v={},y={},b={},o=Object.prototype.hasOwnProperty,r=[].slice,_=/\.js$/,m=function(e,t){var n,i=c(e),o=i[0],a=t[1];return e=i[1],o&&(n=k(o=l(o,a))),o?e=n&&n.normalize?n.normalize(e,function(t){return function(e){return l(e,t)}}(a)):l(e,a):(o=(i=c(e=l(e,a)))[0],e=i[1],o&&(n=k(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},f={require:function(e){return x(e)},exports:function(e){var t=g[e];return void 0!==t?t:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:function(e){return function(){return y&&y.config&&y.config[e]||{}}}(e)}}},a=function(e,t,n,i){var o,a,s,r,l,c,p,d=[],u=typeof n;if(c=C(i=i||e),"undefined"==u||"function"==u){for(t=!t.length&&n.length?["require","exports","module"]:t,l=0;l<t.length;l+=1)if("require"===(a=(r=m(t[l],c)).f))d[l]=f.require(e);else if("exports"===a)d[l]=f.exports(e),p=!0;else if("module"===a)o=d[l]=f.module(e);else if(w(g,a)||w(v,a)||w(b,a))d[l]=k(a);else{if(!r.p)throw new Error(e+" missing "+a);r.p.load(r.n,x(i,!0),A(a),{}),d[l]=g[a]}s=n?n.apply(g[e],d):void 0,e&&(o&&o.exports!==h&&o.exports!==g[e]?g[e]=o.exports:s===h&&p||(g[e]=s))}else e&&(g[e]=n)},t=n=s=function(e,t,n,i,o){if("string"==typeof e)return f[e]?f[e](t):k(m(e,C(t)).f);if(!e.splice){if((y=e).deps&&s(y.deps,y.callback),!t)return;t.splice?(e=t,t=n,n=null):e=h}return t=t||function(){},"function"==typeof n&&(n=i,i=o),i?a(h,e,t,n):setTimeout(function(){a(h,e,t,n)},4),s},s.config=function(e){return s(e)},t._defined=g,(i=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),w(g,e)||w(v,e)||(v[e]=[e,t,n])}).amd={jQuery:!0},e.requirejs=t,e.require=n,e.define=i),e.define("almond",function(){}),e.define("jquery",[],function(){var e=p||$;return null==e&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),e}),e.define("select2/utils",["jquery"],function(a){var o={};function p(e){var t=e.prototype,n=[];for(var i in t){"function"==typeof t[i]&&"constructor"!==i&&n.push(i)}return n}o.Extend=function(e,t){var n={}.hasOwnProperty;function i(){this.constructor=e}for(var o in t)n.call(t,o)&&(e[o]=t[o]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},o.Decorate=function(i,o){var e=p(o),t=p(i);function a(){var e=Array.prototype.unshift,t=o.prototype.constructor.length,n=i.prototype.constructor;0<t&&(e.call(arguments,i.prototype.constructor),n=o.prototype.constructor),n.apply(this,arguments)}o.displayName=i.displayName,a.prototype=new function(){this.constructor=a};for(var n=0;n<t.length;n++){var s=t[n];a.prototype[s]=i.prototype[s]}function r(e){var t=function(){};e in a.prototype&&(t=a.prototype[e]);var n=o.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),n.apply(this,arguments)}}for(var l=0;l<e.length;l++){var c=e[l];a.prototype[c]=r(c)}return a};function e(){this.listeners={}}e.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},e.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),(n[0]._type=e)in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},e.prototype.invoke=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].apply(this,t)},o.Observable=e,o.generateChars=function(e){for(var t="",n=0;n<e;n++){t+=Math.floor(36*Math.random()).toString(36)}return t},o.bind=function(e,t){return function(){e.apply(t,arguments)}},o._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var o=0;o<n.length;o++){var a=n[o];(a=a.substring(0,1).toLowerCase()+a.substring(1))in i||(i[a]={}),o==n.length-1&&(i[a]=e[t]),i=i[a]}delete e[t]}}return e},o.hasScroll=function(e,t){var n=a(t),i=t.style.overflowX,o=t.style.overflowY;return(i!==o||"hidden"!==o&&"visible"!==o)&&("scroll"===i||"scroll"===o||(n.innerHeight()<t.scrollHeight||n.innerWidth()<t.scrollWidth))},o.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},o.appendMany=function(e,t){if("1.7"===a.fn.jquery.substr(0,3)){var n=a();a.map(t,function(e){n=n.add(e)}),t=n}e.append(t)},o.__cache={};var n=0;return o.GetUniqueElementId=function(e){var t=e.getAttribute("data-select2-id");return null==t&&(e.id?(t=e.id,e.setAttribute("data-select2-id",t)):(e.setAttribute("data-select2-id",++n),t=n.toString())),t},o.StoreData=function(e,t,n){var i=o.GetUniqueElementId(e);o.__cache[i]||(o.__cache[i]={}),o.__cache[i][t]=n},o.GetData=function(e,t){var n=o.GetUniqueElementId(e);return t?o.__cache[n]&&null!=o.__cache[n][t]?o.__cache[n][t]:a(e).data(t):o.__cache[n]},o.RemoveData=function(e){var t=o.GetUniqueElementId(e);null!=o.__cache[t]&&delete o.__cache[t]},o}),e.define("select2/results",["jquery","./utils"],function(u,h){function i(e,t,n){this.$element=e,this.data=n,this.options=t,i.__super__.constructor.call(this)}return h.Extend(i,h.Observable),i.prototype.render=function(){var e=u('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&e.attr("aria-multiselectable","true"),this.$results=e},i.prototype.clear=function(){this.$results.empty()},i.prototype.displayMessage=function(e){var t=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var n=u('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),i=this.options.get("translations").get(e.message);n.append(t(i(e.args))),n[0].className+=" select2-results__message",this.$results.append(n)},i.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},i.prototype.append=function(e){this.hideLoading();var t=[];if(null!=e.results&&0!==e.results.length){e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=e.results[n],o=this.option(i);t.push(o)}this.$results.append(t)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},i.prototype.position=function(e,t){t.find(".select2-results").append(e)},i.prototype.sort=function(e){return this.options.get("sorter")(e)},i.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");0<t.length?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},i.prototype.setClasses=function(){var t=this;this.data.current(function(e){var i=u.map(e,function(e){return e.id.toString()});t.$results.find(".select2-results__option[aria-selected]").each(function(){var e=u(this),t=h.GetData(this,"data"),n=""+t.id;null!=t.element&&t.element.selected||null==t.element&&-1<u.inArray(n,i)?e.attr("aria-selected","true"):e.attr("aria-selected","false")})})},i.prototype.showLoading=function(e){this.hideLoading();var t={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(e)},n=this.option(t);n.className+=" loading-results",this.$results.prepend(n)},i.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},i.prototype.option=function(e){var t=document.createElement("li");t.className="select2-results__option";var n={role:"treeitem","aria-selected":"false"};for(var i in e.disabled&&(delete n["aria-selected"],n["aria-disabled"]="true"),null==e.id&&delete n["aria-selected"],null!=e._resultId&&(t.id=e._resultId),e.title&&(t.title=e.title),e.children&&(n.role="group",n["aria-label"]=e.text,delete n["aria-selected"]),n){var o=n[i];t.setAttribute(i,o)}if(e.children){var a=u(t),s=document.createElement("strong");s.className="select2-results__group";u(s);this.template(e,s);for(var r=[],l=0;l<e.children.length;l++){var c=e.children[l],p=this.option(c);r.push(p)}var d=u("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});d.append(r),a.append(s),a.append(d)}else this.template(e,t);return h.StoreData(t,"data",e),t},i.prototype.bind=function(t,e){var l=this,n=t.id+"-results";this.$results.attr("id",n),t.on("results:all",function(e){l.clear(),l.append(e.data),t.isOpen()&&(l.setClasses(),l.highlightFirstItem())}),t.on("results:append",function(e){l.append(e.data),t.isOpen()&&l.setClasses()}),t.on("query",function(e){l.hideMessages(),l.showLoading(e)}),t.on("select",function(){t.isOpen()&&(l.setClasses(),l.options.get("scrollAfterSelect")&&l.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(l.setClasses(),l.options.get("scrollAfterSelect")&&l.highlightFirstItem())}),t.on("open",function(){l.$results.attr("aria-expanded","true"),l.$results.attr("aria-hidden","false"),l.setClasses(),l.ensureHighlightVisible()}),t.on("close",function(){l.$results.attr("aria-expanded","false"),l.$results.attr("aria-hidden","true"),l.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=l.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=l.getHighlightedResults();if(0!==e.length){var t=h.GetData(e[0],"data");"true"==e.attr("aria-selected")?l.trigger("close",{}):l.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),n=t.index(e);if(!(n<=0)){var i=n-1;0===e.length&&(i=0);var o=t.eq(i);o.trigger("mouseenter");var a=l.$results.offset().top,s=o.offset().top,r=l.$results.scrollTop()+(s-a);0===i?l.$results.scrollTop(0):s-a<0&&l.$results.scrollTop(r)}}),t.on("results:next",function(){var e=l.getHighlightedResults(),t=l.$results.find("[aria-selected]"),n=t.index(e)+1;if(!(n>=t.length)){var i=t.eq(n);i.trigger("mouseenter");var o=l.$results.offset().top+l.$results.outerHeight(!1),a=i.offset().top+i.outerHeight(!1),s=l.$results.scrollTop()+a-o;0===n?l.$results.scrollTop(0):o<a&&l.$results.scrollTop(s)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){l.displayMessage(e)}),u.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=l.$results.scrollTop(),n=l.$results.get(0).scrollHeight-t+e.deltaY,i=0<e.deltaY&&t-e.deltaY<=0,o=e.deltaY<0&&n<=l.$results.height();i?(l.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):o&&(l.$results.scrollTop(l.$results.get(0).scrollHeight-l.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(e){var t=u(this),n=h.GetData(this,"data");"true"!==t.attr("aria-selected")?l.trigger("select",{originalEvent:e,data:n}):l.options.get("multiple")?l.trigger("unselect",{originalEvent:e,data:n}):l.trigger("close",{})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(e){var t=h.GetData(this,"data");l.getHighlightedResults().removeClass("select2-results__option--highlighted"),l.trigger("results:focus",{data:t,element:u(this)})})},i.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},i.prototype.destroy=function(){this.$results.remove()},i.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]").index(e),n=this.$results.offset().top,i=e.offset().top,o=this.$results.scrollTop()+(i-n),a=i-n;o-=2*e.outerHeight(!1),t<=2?this.$results.scrollTop(0):(a>this.$results.outerHeight()||a<0)&&this.$results.scrollTop(o)}},i.prototype.template=function(e,t){var n=this.options.get("templateResult"),i=this.options.get("escapeMarkup"),o=n(e,t);null==o?t.style.display="none":"string"==typeof o?t.innerHTML=i(o):u(t).append(o)},i}),e.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),e.define("select2/selection/base",["jquery","../utils","../keys"],function(n,i,o){function a(e,t){this.$element=e,this.options=t,a.__super__.constructor.call(this)}return i.Extend(a,i.Observable),a.prototype.render=function(){var e=n('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=i.GetData(this.$element[0],"old-tabindex")?this._tabindex=i.GetData(this.$element[0],"old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),e.attr("title",this.$element.attr("title")),e.attr("tabindex",this._tabindex),this.$selection=e},a.prototype.bind=function(e,t){var n=this,i=(e.id,e.id+"-results");this.container=e,this.$selection.on("focus",function(e){n.trigger("focus",e)}),this.$selection.on("blur",function(e){n._handleBlur(e)}),this.$selection.on("keydown",function(e){n.trigger("keypress",e),e.which===o.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){n.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){n.update(e.data)}),e.on("open",function(){n.$selection.attr("aria-expanded","true"),n.$selection.attr("aria-owns",i),n._attachCloseHandler(e)}),e.on("close",function(){n.$selection.attr("aria-expanded","false"),n.$selection.removeAttr("aria-activedescendant"),n.$selection.removeAttr("aria-owns"),window.setTimeout(function(){n.$selection.focus()},0),n._detachCloseHandler(e)}),e.on("enable",function(){n.$selection.attr("tabindex",n._tabindex)}),e.on("disable",function(){n.$selection.attr("tabindex","-1")})},a.prototype._handleBlur=function(e){var t=this;window.setTimeout(function(){document.activeElement==t.$selection[0]||n.contains(t.$selection[0],document.activeElement)||t.trigger("blur",e)},1)},a.prototype._attachCloseHandler=function(e){n(document.body).on("mousedown.select2."+e.id,function(e){var t=n(e.target).closest(".select2");n(".select2.select2-container--open").each(function(){n(this);this!=t[0]&&i.GetData(this,"element").select2("close")})})},a.prototype._detachCloseHandler=function(e){n(document.body).off("mousedown.select2."+e.id)},a.prototype.position=function(e,t){t.find(".selection").append(e)},a.prototype.destroy=function(){this._detachCloseHandler(this.container)},a.prototype.update=function(e){throw new Error("The `update` method must be defined in child classes.")},a}),e.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n,i){function o(){o.__super__.constructor.apply(this,arguments)}return n.Extend(o,t),o.prototype.render=function(){var e=o.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},o.prototype.bind=function(t,e){var n=this;o.__super__.bind.apply(this,arguments);var i=t.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",i).attr("role","textbox").attr("aria-readonly","true"),this.$selection.attr("aria-labelledby",i),this.$selection.on("mousedown",function(e){1===e.which&&n.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(e){}),this.$selection.on("blur",function(e){}),t.on("focus",function(e){t.isOpen()||n.$selection.focus()})},o.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},o.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},o.prototype.selectionContainer=function(){return e("<span></span>")},o.prototype.update=function(e){if(0!==e.length){var t=e[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(t,n);n.empty().append(i),n.attr("title",t.title||t.text)}else this.clear()},o}),e.define("select2/selection/multiple",["jquery","./base","../utils"],function(o,e,r){function n(e,t){n.__super__.constructor.apply(this,arguments)}return r.Extend(n,e),n.prototype.render=function(){var e=n.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},n.prototype.bind=function(e,t){var i=this;n.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){i.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(e){if(!i.options.get("disabled")){var t=o(this).parent(),n=r.GetData(t[0],"data");i.trigger("unselect",{originalEvent:e,data:n})}})},n.prototype.clear=function(){var e=this.$selection.find(".select2-selection__rendered");e.empty(),e.removeAttr("title")},n.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},n.prototype.selectionContainer=function(){return o('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},n.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],n=0;n<e.length;n++){var i=e[n],o=this.selectionContainer(),a=this.display(i,o);o.append(a),o.attr("title",i.title||i.text),r.StoreData(o[0],"data",i),t.push(o)}var s=this.$selection.find(".select2-selection__rendered");r.appendMany(s,t)}},n}),e.define("select2/selection/placeholder",["../utils"],function(e){function t(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return t.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},t.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},t.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(1<t.length||n)return e.call(this,t);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},t}),e.define("select2/selection/allowClear",["jquery","../keys","../utils"],function(o,i,r){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){i._handleClear(e)}),t.on("keypress",function(e){i._handleKeyboardClear(e,t)})},e.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();var i=r.GetData(n[0],"data"),o=this.$element.val();this.$element.val(this.placeholder.id);var a={data:i};if(this.trigger("clear",a),a.prevented)this.$element.val(o);else{for(var s=0;s<i.length;s++)if(a={data:i[s]},this.trigger("unselect",a),a.prevented)return void this.$element.val(o);this.$element.trigger("change"),this.trigger("toggle",{})}}}},e.prototype._handleKeyboardClear=function(e,t,n){n.isOpen()||t.which!=i.DELETE&&t.which!=i.BACKSPACE||this._handleClear(t)},e.prototype.update=function(e,t){if(e.call(this,t),!(0<this.$selection.find(".select2-selection__placeholder").length||0===t.length)){var n=this.options.get("translations").get("removeAllItems"),i=o('<span class="select2-selection__clear" title="'+n()+'">&times;</span>');r.StoreData(i[0],"data",t),this.$selection.find(".select2-selection__rendered").prepend(i)}},e}),e.define("select2/selection/search",["jquery","../utils","../keys"],function(i,s,r){function e(e,t,n){e.call(this,t,n)}return e.prototype.render=function(e){var t=i('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=t,this.$search=t.find("input");var n=e.call(this);return this._transferTabIndex(),n},e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("open",function(){i.$search.trigger("focus")}),t.on("close",function(){i.$search.val(""),i.$search.removeAttr("aria-activedescendant"),i.$search.trigger("focus")}),t.on("enable",function(){i.$search.prop("disabled",!1),i._transferTabIndex()}),t.on("disable",function(){i.$search.prop("disabled",!0)}),t.on("focus",function(e){i.$search.trigger("focus")}),t.on("results:focus",function(e){i.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){i.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){i._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){if(e.stopPropagation(),i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented(),e.which===r.BACKSPACE&&""===i.$search.val()){var t=i.$searchContainer.prev(".select2-selection__choice");if(0<t.length){var n=s.GetData(t[0],"data");i.searchRemoveChoice(n),e.preventDefault()}}});var o=document.documentMode,a=o&&o<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(e){a?i.$selection.off("input.search input.searchcheck"):i.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(a&&"input"===e.type)i.$selection.off("input.search input.searchcheck");else{var t=e.which;t!=r.SHIFT&&t!=r.CTRL&&t!=r.ALT&&t!=r.TAB&&i.handleSearch(e)}})},e.prototype._transferTabIndex=function(e){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},e.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},e.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&(this.$element.find("[data-select2-tag]").length?this.$element.focus():this.$search.focus())},e.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},e.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},e.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";""!==this.$search.attr("placeholder")?e=this.$selection.find(".select2-selection__rendered").innerWidth():e=.75*(this.$search.val().length+1)+"em";this.$search.css("width",e)},e}),e.define("select2/selection/eventRelay",["jquery"],function(s){function e(){}return e.prototype.bind=function(e,t,n){var i=this,o=["open","opening","close","closing","select","selecting","unselect","unselecting","clear","clearing"],a=["opening","closing","selecting","unselecting","clearing"];e.call(this,t,n),t.on("*",function(e,t){if(-1!==s.inArray(e,o)){t=t||{};var n=s.Event("select2:"+e,{params:t});i.$element.trigger(n),-1!==s.inArray(e,a)&&(t.prevented=n.isDefaultPrevented())}})},e}),e.define("select2/translation",["jquery","require"],function(t,n){function i(e){this.dict=e||{}}return i.prototype.all=function(){return this.dict},i.prototype.get=function(e){return this.dict[e]},i.prototype.extend=function(e){this.dict=t.extend({},e.all(),this.dict)},i._cache={},i.loadPath=function(e){if(!(e in i._cache)){var t=n(e);i._cache[e]=t}return new i(i._cache[e])},i}),e.define("select2/diacritics",[],function(){return{"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"AA","":"AE","":"AE","":"AE","":"AO","":"AU","":"AV","":"AV","":"AY","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"D","":"DZ","":"DZ","":"Dz","":"Dz","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"F","":"F","":"F","":"F","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"J","":"J","":"J","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"LJ","":"Lj","":"M","":"M","":"M","":"M","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"NJ","":"Nj","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"OE","":"OI","":"OO","":"OU","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"P","":"Q","":"Q","":"Q","":"Q","":"Q","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"TZ","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"V","":"V","":"V","":"V","":"V","":"VY","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"aa","":"ae","":"ae","":"ae","":"ao","":"au","":"av","":"av","":"ay","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"d","":"dz","":"dz","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"f","":"f","":"f","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"hv","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"j","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"lj","":"m","":"m","":"m","":"m","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"nj","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"oe","":"oi","":"ou","":"oo","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"p","":"q","":"q","":"q","":"q","":"q","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"tz","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"v","":"v","":"v","":"v","":"v","":"vy","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"z","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"'"}}),e.define("select2/data/base",["../utils"],function(i){function n(e,t){n.__super__.constructor.call(this)}return i.Extend(n,i.Observable),n.prototype.current=function(e){throw new Error("The `current` method must be defined in child classes.")},n.prototype.query=function(e,t){throw new Error("The `query` method must be defined in child classes.")},n.prototype.bind=function(e,t){},n.prototype.destroy=function(){},n.prototype.generateResultId=function(e,t){var n=e.id+"-result-";return n+=i.generateChars(4),null!=t.id?n+="-"+t.id.toString():n+="-"+i.generateChars(4),n},n}),e.define("select2/data/select",["./base","../utils","jquery"],function(e,r,l){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return r.Extend(n,e),n.prototype.current=function(e){var n=[],i=this;this.$element.find(":selected").each(function(){var e=l(this),t=i.item(e);n.push(t)}),e(n)},n.prototype.select=function(o){var a=this;if(o.selected=!0,l(o.element).is("option"))return o.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(e){var t=[];(o=[o]).push.apply(o,e);for(var n=0;n<o.length;n++){var i=o[n].id;-1===l.inArray(i,t)&&t.push(i)}a.$element.val(t),a.$element.trigger("change")});else{var e=o.id;this.$element.val(e),this.$element.trigger("change")}},n.prototype.unselect=function(o){var a=this;if(this.$element.prop("multiple")){if(o.selected=!1,l(o.element).is("option"))return o.element.selected=!1,void this.$element.trigger("change");this.current(function(e){for(var t=[],n=0;n<e.length;n++){var i=e[n].id;i!==o.id&&-1===l.inArray(i,t)&&t.push(i)}a.$element.val(t),a.$element.trigger("change")})}},n.prototype.bind=function(e,t){var n=this;(this.container=e).on("select",function(e){n.select(e.data)}),e.on("unselect",function(e){n.unselect(e.data)})},n.prototype.destroy=function(){this.$element.find("*").each(function(){r.RemoveData(this)})},n.prototype.query=function(i,e){var o=[],a=this;this.$element.children().each(function(){var e=l(this);if(e.is("option")||e.is("optgroup")){var t=a.item(e),n=a.matches(i,t);null!==n&&o.push(n)}}),e({results:o})},n.prototype.addOptions=function(e){r.appendMany(this.$element,e)},n.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup")).label=e.text:void 0!==(t=document.createElement("option")).textContent?t.textContent=e.text:t.innerText=e.text,void 0!==e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var n=l(t),i=this._normalizeItem(e);return i.element=t,r.StoreData(t,"data",i),n},n.prototype.item=function(e){var t={};if(null!=(t=r.GetData(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var n=e.children("option"),i=[],o=0;o<n.length;o++){var a=l(n[o]),s=this.item(a);i.push(s)}t.children=i}return(t=this._normalizeItem(t)).element=e[0],r.StoreData(e[0],"data",t),t},n.prototype._normalizeItem=function(e){e!==Object(e)&&(e={id:e,text:e});return null!=(e=l.extend({},{text:""},e)).id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),l.extend({},{selected:!1,disabled:!1},e)},n.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},n}),e.define("select2/data/array",["./select","../utils","jquery"],function(e,m,f){function i(e,t){var n=t.get("data")||[];i.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return m.Extend(i,e),i.prototype.select=function(n){var e=this.$element.find("option").filter(function(e,t){return t.value==n.id.toString()});0===e.length&&(e=this.option(n),this.addOptions(e)),i.__super__.select.call(this,n)},i.prototype.convertToOptions=function(e){var t=this,n=this.$element.find("option"),i=n.map(function(){return t.item(f(this)).id}).get(),o=[];function a(e){return function(){return f(this).val()==e.id}}for(var s=0;s<e.length;s++){var r=this._normalizeItem(e[s]);if(0<=f.inArray(r.id,i)){var l=n.filter(a(r)),c=this.item(l),p=f.extend(!0,{},r,c),d=this.option(p);l.replaceWith(d)}else{var u=this.option(r);if(r.children){var h=this.convertToOptions(r.children);m.appendMany(u,h)}o.push(u)}}return o},i}),e.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,a){function n(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),n.__super__.constructor.call(this,e,t)}return t.Extend(n,e),n.prototype._applyDefaults=function(e){var t={data:function(e){return a.extend({},e,{q:e.term})},transport:function(e,t,n){var i=a.ajax(e);return i.then(t),i.fail(n),i}};return a.extend({},t,e,!0)},n.prototype.processResults=function(e){return e},n.prototype.query=function(n,i){var o=this;null!=this._request&&(a.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var t=a.extend({type:"GET"},this.ajaxOptions);function e(){var e=t.transport(t,function(e){var t=o.processResults(e,n);o.options.get("debug")&&window.console&&console.error&&(t&&t.results&&a.isArray(t.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),i(t)},function(){"status"in e&&(0===e.status||"0"===e.status)||o.trigger("results:message",{message:"errorLoading"})});o._request=e}"function"==typeof t.url&&(t.url=t.url.call(this.$element,n)),"function"==typeof t.data&&(t.data=t.data.call(this.$element,n)),this.ajaxOptions.delay&&null!=n.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(e,this.ajaxOptions.delay)):e()},n}),e.define("select2/data/tags",["jquery"],function(p){function e(e,t,n){var i=n.get("tags"),o=n.get("createTag");void 0!==o&&(this.createTag=o);var a=n.get("insertTag");if(void 0!==a&&(this.insertTag=a),e.call(this,t,n),p.isArray(i))for(var s=0;s<i.length;s++){var r=i[s],l=this._normalizeItem(r),c=this.option(l);this.$element.append(c)}}return e.prototype.query=function(e,c,p){var d=this;this._removeOldTags(),null!=c.term&&null==c.page?e.call(this,c,function e(t,n){for(var i=t.results,o=0;o<i.length;o++){var a=i[o],s=null!=a.children&&!e({results:a.children},!0);if((a.text||"").toUpperCase()===(c.term||"").toUpperCase()||s)return!n&&(t.data=i,void p(t))}if(n)return!0;var r=d.createTag(c);if(null!=r){var l=d.option(r);l.attr("data-select2-tag",!0),d.addOptions([l]),d.insertTag(i,r)}t.results=i,p(t)}):e.call(this,c,p)},e.prototype.createTag=function(e,t){var n=p.trim(t.term);return""===n?null:{id:n,text:n}},e.prototype.insertTag=function(e,t,n){t.unshift(n)},e.prototype._removeOldTags=function(e){this._lastTag;this.$element.find("option[data-select2-tag]").each(function(){this.selected||p(this).remove()})},e}),e.define("select2/data/tokenizer",["jquery"],function(d){function e(e,t,n){var i=n.get("tokenizer");void 0!==i&&(this.tokenizer=i),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},e.prototype.query=function(e,t,n){var i=this;t.term=t.term||"";var o=this.tokenizer(t,this.options,function(e){var t=i._normalizeItem(e);if(!i.$element.find("option").filter(function(){return d(this).val()===t.id}).length){var n=i.option(t);n.attr("data-select2-tag",!0),i._removeOldTags(),i.addOptions([n])}!function(e){i.trigger("select",{data:e})}(t)});o.term!==t.term&&(this.$search.length&&(this.$search.val(o.term),this.$search.focus()),t.term=o.term),e.call(this,t,n)},e.prototype.tokenizer=function(e,t,n,i){for(var o=n.get("tokenSeparators")||[],a=t.term,s=0,r=this.createTag||function(e){return{id:e.term,text:e.term}};s<a.length;){var l=a[s];if(-1!==d.inArray(l,o)){var c=a.substr(0,s),p=r(d.extend({},t,{term:c}));null!=p?(i(p),a=a.substr(s+1)||"",s=0):s++}else s++}return{term:a}},e}),e.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",t.term.length<this.minimumInputLength?this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),e.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){t.term=t.term||"",0<this.maximumInputLength&&t.term.length>this.maximumInputLength?this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}}):e.call(this,t,n)},e}),e.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(n,i,o){var a=this;this.current(function(e){var t=null!=e?e.length:0;0<a.maximumSelectionLength&&t>=a.maximumSelectionLength?a.trigger("results:message",{message:"maximumSelected",args:{maximum:a.maximumSelectionLength}}):n.call(a,i,o)})},e}),e.define("select2/dropdown",["jquery","./utils"],function(t,e){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return e.Extend(n,e.Observable),n.prototype.render=function(){var e=t('<span class="select2-dropdown"><span class="select2-results"></span></span>');return e.attr("dir",this.options.get("dir")),this.$dropdown=e},n.prototype.bind=function(){},n.prototype.position=function(e,t){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),e.define("select2/dropdown/search",["jquery","../utils"],function(o,e){function t(){}return t.prototype.render=function(e){var t=e.call(this),n=o('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=n,this.$search=n.find("input"),t.prepend(n),t},t.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),this.$search.on("keydown",function(e){i.trigger("keypress",e),i._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(e){o(this).off("keyup")}),this.$search.on("keyup input",function(e){i.handleSearch(e)}),t.on("open",function(){i.$search.attr("tabindex",0),i.$search.focus(),window.setTimeout(function(){i.$search.focus()},0)}),t.on("close",function(){i.$search.attr("tabindex",-1),i.$search.val(""),i.$search.blur()}),t.on("focus",function(){t.isOpen()||i.$search.focus()}),t.on("results:all",function(e){null!=e.query.term&&""!==e.query.term||(i.showSearch(e)?i.$searchContainer.removeClass("select2-search--hide"):i.$searchContainer.addClass("select2-search--hide"))})},t.prototype.handleSearch=function(e){if(!this._keyUpPrevented){var t=this.$search.val();this.trigger("query",{term:t})}this._keyUpPrevented=!1},t.prototype.showSearch=function(e,t){return!0},t}),e.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;0<=i;i--){var o=t[i];this.placeholder.id===o.id&&n.splice(i,1)}return n},e}),e.define("select2/dropdown/infiniteScroll",["jquery"],function(o){function e(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return e.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("query",function(e){i.lastParams=e,i.loading=!0}),t.on("query:append",function(e){i.lastParams=e,i.loading=!0}),this.$results.on("scroll",function(){var e=o.contains(document.documentElement,i.$loadingMore[0]);if(!i.loading&&e){var t=i.$results.offset().top+i.$results.outerHeight(!1);i.$loadingMore.offset().top+i.$loadingMore.outerHeight(!1)<=t+50&&i.loadMore()}})},e.prototype.loadMore=function(){this.loading=!0;var e=o.extend({},{page:1},this.lastParams);e.page++,this.trigger("query:append",e)},e.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},e.prototype.createLoadingMore=function(){var e=o('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),t=this.options.get("translations").get("loadingMore");return e.html(t(this.lastParams)),e},e}),e.define("select2/dropdown/attachBody",["jquery","../utils"],function(m,r){function e(e,t,n){this.$dropdownParent=n.get("dropdownParent")||m(document.body),e.call(this,t,n)}return e.prototype.bind=function(e,t,n){var i=this,o=!1;e.call(this,t,n),t.on("open",function(){i._showDropdown(),i._attachPositioningHandler(t),o||(o=!0,t.on("results:all",function(){i._positionDropdown(),i._resizeDropdown()}),t.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}))}),t.on("close",function(){i._hideDropdown(),i._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},e.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},e.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},e.prototype.render=function(e){var t=m("<span></span>"),n=e.call(this);return t.append(n),this.$dropdownContainer=t},e.prototype._hideDropdown=function(e){this.$dropdownContainer.detach()},e.prototype._attachPositioningHandler=function(e,t){var n=this,i="scroll.select2."+t.id,o="resize.select2."+t.id,a="orientationchange.select2."+t.id,s=this.$container.parents().filter(r.hasScroll);s.each(function(){r.StoreData(this,"select2-scroll-position",{x:m(this).scrollLeft(),y:m(this).scrollTop()})}),s.on(i,function(e){var t=r.GetData(this,"select2-scroll-position");m(this).scrollTop(t.y)}),m(window).on(i+" "+o+" "+a,function(e){n._positionDropdown(),n._resizeDropdown()})},e.prototype._detachPositioningHandler=function(e,t){var n="scroll.select2."+t.id,i="resize.select2."+t.id,o="orientationchange.select2."+t.id;this.$container.parents().filter(r.hasScroll).off(n),m(window).off(n+" "+i+" "+o)},e.prototype._positionDropdown=function(){var e=m(window),t=this.$dropdown.hasClass("select2-dropdown--above"),n=this.$dropdown.hasClass("select2-dropdown--below"),i=null,o=this.$container.offset();o.bottom=o.top+this.$container.outerHeight(!1);var a={height:this.$container.outerHeight(!1)};a.top=o.top,a.bottom=o.top+a.height;var s=this.$dropdown.outerHeight(!1),r=e.scrollTop(),l=e.scrollTop()+e.height(),c=r<o.top-s,p=l>o.bottom+s,d={left:o.left,top:a.bottom},u=this.$dropdownParent;"static"===u.css("position")&&(u=u.offsetParent());var h=u.offset();d.top-=h.top,d.left-=h.left,t||n||(i="below"),p||!c||t?!c&&p&&t&&(i="below"):i="above",("above"==i||t&&"below"!==i)&&(d.top=a.top-h.top-s),null!=i&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+i),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+i)),this.$dropdownContainer.css(d)},e.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},e.prototype._showDropdown=function(e){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},e}),e.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),e.call(this,t,n,i)}return e.prototype.showSearch=function(e,t){return!(function e(t){for(var n=0,i=0;i<t.length;i++){var o=t[i];o.children?n+=e(o.children):n++}return n}(t.data.results)<this.minimumResultsForSearch)&&e.call(this,t)},e}),e.define("select2/dropdown/selectOnClose",["../utils"],function(a){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",function(e){i._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var i=this.getHighlightedResults();if(!(i.length<1)){var o=a.GetData(i[0],"data");null!=o.element&&o.element.selected||null==o.element&&o.selected||this.trigger("select",{data:o})}},e}),e.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",function(e){i._selectTriggered(e)}),t.on("unselect",function(e){i._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&(n.ctrlKey||n.metaKey)||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),e.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching"},removeAllItems:function(){return"Remove all items"}}}),e.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(m,f,g,v,y,b,_,w,x,A,k,t,C,S,L,T,D,E,O,R,$,P,M,j,I,F,B,Q,e){function n(){this.reset()}return n.prototype.apply=function(t){if(null==(t=m.extend(!0,{},this.defaults,t)).dataAdapter){if(null!=t.ajax?t.dataAdapter=L:null!=t.data?t.dataAdapter=S:t.dataAdapter=C,0<t.minimumInputLength&&(t.dataAdapter=A.Decorate(t.dataAdapter,E)),0<t.maximumInputLength&&(t.dataAdapter=A.Decorate(t.dataAdapter,O)),0<t.maximumSelectionLength&&(t.dataAdapter=A.Decorate(t.dataAdapter,R)),t.tags&&(t.dataAdapter=A.Decorate(t.dataAdapter,T)),null==t.tokenSeparators&&null==t.tokenizer||(t.dataAdapter=A.Decorate(t.dataAdapter,D)),null!=t.query){var e=f(t.amdBase+"compat/query");t.dataAdapter=A.Decorate(t.dataAdapter,e)}if(null!=t.initSelection){var n=f(t.amdBase+"compat/initSelection");t.dataAdapter=A.Decorate(t.dataAdapter,n)}}if(null==t.resultsAdapter&&(t.resultsAdapter=g,null!=t.ajax&&(t.resultsAdapter=A.Decorate(t.resultsAdapter,j)),null!=t.placeholder&&(t.resultsAdapter=A.Decorate(t.resultsAdapter,M)),t.selectOnClose&&(t.resultsAdapter=A.Decorate(t.resultsAdapter,B))),null==t.dropdownAdapter){if(t.multiple)t.dropdownAdapter=$;else{var i=A.Decorate($,P);t.dropdownAdapter=i}if(0!==t.minimumResultsForSearch&&(t.dropdownAdapter=A.Decorate(t.dropdownAdapter,F)),t.closeOnSelect&&(t.dropdownAdapter=A.Decorate(t.dropdownAdapter,Q)),null!=t.dropdownCssClass||null!=t.dropdownCss||null!=t.adaptDropdownCssClass){var o=f(t.amdBase+"compat/dropdownCss");t.dropdownAdapter=A.Decorate(t.dropdownAdapter,o)}t.dropdownAdapter=A.Decorate(t.dropdownAdapter,I)}if(null==t.selectionAdapter){if(t.multiple?t.selectionAdapter=y:t.selectionAdapter=v,null!=t.placeholder&&(t.selectionAdapter=A.Decorate(t.selectionAdapter,b)),t.allowClear&&(t.selectionAdapter=A.Decorate(t.selectionAdapter,_)),t.multiple&&(t.selectionAdapter=A.Decorate(t.selectionAdapter,w)),null!=t.containerCssClass||null!=t.containerCss||null!=t.adaptContainerCssClass){var a=f(t.amdBase+"compat/containerCss");t.selectionAdapter=A.Decorate(t.selectionAdapter,a)}t.selectionAdapter=A.Decorate(t.selectionAdapter,x)}if("string"==typeof t.language)if(0<t.language.indexOf("-")){var s=t.language.split("-")[0];t.language=[t.language,s]}else t.language=[t.language];if(m.isArray(t.language)){var r=new k;t.language.push("en");for(var l=t.language,c=0;c<l.length;c++){var p=l[c],d={};try{d=k.loadPath(p)}catch(e){try{p=this.defaults.amdLanguageBase+p,d=k.loadPath(p)}catch(e){t.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+p+'" could not be automatically loaded. A fallback will be used instead.');continue}}r.extend(d)}t.translations=r}else{var u=k.loadPath(this.defaults.amdLanguageBase+"en"),h=new k(t.language);h.extend(u),t.translations=h}return t},n.prototype.reset=function(){function r(e){return e.replace(/[^\u0000-\u007E]/g,function(e){return t[e]||e})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:A.escapeMarkup,language:e,matcher:function e(t,n){if(""===m.trim(t.term))return n;if(n.children&&0<n.children.length){for(var i=m.extend(!0,{},n),o=n.children.length-1;0<=o;o--)null==e(t,n.children[o])&&i.children.splice(o,1);return 0<i.children.length?i:e(t,i)}var a=r(n.text).toUpperCase(),s=r(t.term).toUpperCase();return-1<a.indexOf(s)?n:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,scrollAfterSelect:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},n.prototype.set=function(e,t){var n={};n[m.camelCase(e)]=t;var i=A._convertData(n);m.extend(!0,this.defaults,i)},new n}),e.define("select2/options",["require","jquery","./defaults","./utils"],function(i,d,o,u){function e(e,t){if(this.options=e,null!=t&&this.fromElement(t),this.options=o.apply(this.options),t&&t.is("input")){var n=i(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=u.Decorate(this.options.dataAdapter,n)}}return e.prototype.fromElement=function(e){var t=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),u.GetData(e[0],"select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),u.StoreData(e[0],"data",u.GetData(e[0],"select2Tags")),u.StoreData(e[0],"tags",!0)),u.GetData(e[0],"ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",u.GetData(e[0],"ajaxUrl")),u.StoreData(e[0],"ajax-Url",u.GetData(e[0],"ajaxUrl")));var n={};function i(e,t){return t.toUpperCase()}for(var o=0;o<e[0].attributes.length;o++){var a=e[0].attributes[o].name,s="data-";if(a.substr(0,s.length)==s){var r=a.substring(s.length),l=u.GetData(e[0],r);n[r.replace(/-([a-z])/g,i)]=l}}d.fn.jquery&&"1."==d.fn.jquery.substr(0,2)&&e[0].dataset&&(n=d.extend(!0,{},e[0].dataset,n));var c=d.extend(!0,{},u.GetData(e[0]),n);for(var p in c=u._convertData(c))-1<d.inArray(p,t)||(d.isPlainObject(this.options[p])?d.extend(this.options[p],c[p]):this.options[p]=c[p]);return this},e.prototype.get=function(e){return this.options[e]},e.prototype.set=function(e,t){this.options[e]=t},e}),e.define("select2/core",["jquery","./options","./utils","./keys"],function(o,c,p,i){var d=function(e,t){null!=p.GetData(e[0],"select2")&&p.GetData(e[0],"select2").destroy(),this.$element=e,this.id=this._generateId(e),t=t||{},this.options=new c(t,e),d.__super__.constructor.call(this);var n=e.attr("tabindex")||0;p.StoreData(e[0],"old-tabindex",n),e.attr("tabindex","-1");var i=this.options.get("dataAdapter");this.dataAdapter=new i(e,this.options);var o=this.render();this._placeContainer(o);var a=this.options.get("selectionAdapter");this.selection=new a(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,o);var s=this.options.get("dropdownAdapter");this.dropdown=new s(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,o);var r=this.options.get("resultsAdapter");this.results=new r(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var l=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){l.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),p.StoreData(e[0],"select2",this),e.data("select2",this)};return p.Extend(d,p.Observable),d.prototype._generateId=function(e){return"select2-"+(null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+p.generateChars(2):p.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},d.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},d.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var i=this._resolveWidth(e,"style");return null!=i?i:this._resolveWidth(e,"element")}if("element"==t){var o=e.outerWidth(!1);return o<=0?"auto":o+"px"}if("style"!=t)return t;var a=e.attr("style");if("string"!=typeof a)return null;for(var s=a.split(";"),r=0,l=s.length;r<l;r+=1){var c=s[r].replace(/\s/g,"").match(n);if(null!==c&&1<=c.length)return c[1]}return null},d.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},d.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=p.bind(this._syncAttributes,this),this._syncS=p.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=e?(this._observer=new e(function(e){o.each(e,t._syncA),o.each(e,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},d.prototype._registerDataEvents=function(){var n=this;this.dataAdapter.on("*",function(e,t){n.trigger(e,t)})},d.prototype._registerSelectionEvents=function(){var n=this,i=["toggle","focus"];this.selection.on("toggle",function(){n.toggleDropdown()}),this.selection.on("focus",function(e){n.focus(e)}),this.selection.on("*",function(e,t){-1===o.inArray(e,i)&&n.trigger(e,t)})},d.prototype._registerDropdownEvents=function(){var n=this;this.dropdown.on("*",function(e,t){n.trigger(e,t)})},d.prototype._registerResultsEvents=function(){var n=this;this.results.on("*",function(e,t){n.trigger(e,t)})},d.prototype._registerEvents=function(){var n=this;this.on("open",function(){n.$container.addClass("select2-container--open")}),this.on("close",function(){n.$container.removeClass("select2-container--open")}),this.on("enable",function(){n.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){n.$container.addClass("select2-container--disabled")}),this.on("blur",function(){n.$container.removeClass("select2-container--focus")}),this.on("query",function(t){n.isOpen()||n.trigger("open",{}),this.dataAdapter.query(t,function(e){n.trigger("results:all",{data:e,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(e){n.trigger("results:append",{data:e,query:t})})}),this.on("keypress",function(e){var t=e.which;n.isOpen()?t===i.ESC||t===i.TAB||t===i.UP&&e.altKey?(n.close(),e.preventDefault()):t===i.ENTER?(n.trigger("results:select",{}),e.preventDefault()):t===i.SPACE&&e.ctrlKey?(n.trigger("results:toggle",{}),e.preventDefault()):t===i.UP?(n.trigger("results:previous",{}),e.preventDefault()):t===i.DOWN&&(n.trigger("results:next",{}),e.preventDefault()):(t===i.ENTER||t===i.SPACE||t===i.DOWN&&e.altKey)&&(n.open(),e.preventDefault())})},d.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},d.prototype._syncSubtree=function(e,t){var n=!1,i=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&0<t.addedNodes.length)for(var o=0;o<t.addedNodes.length;o++){t.addedNodes[o].selected&&(n=!0)}else t.removedNodes&&0<t.removedNodes.length&&(n=!0);else n=!0;n&&this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})})}},d.prototype.trigger=function(e,t){var n=d.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting",clear:"clearing"};if(void 0===t&&(t={}),e in i){var o=i[e],a={prevented:!1,name:e,args:t};if(n.call(this,o,a),a.prevented)return void(t.prevented=!0)}n.call(this,e,t)},d.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},d.prototype.open=function(){this.isOpen()||this.trigger("query",{})},d.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},d.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},d.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},d.prototype.focus=function(e){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},d.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=e&&0!==e.length||(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},d.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var t=[];return this.dataAdapter.current(function(e){t=e}),t},d.prototype.val=function(e){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==e||0===e.length)return this.$element.val();var t=e[0];o.isArray(t)&&(t=o.map(t,function(e){return e.toString()})),this.$element.val(t).trigger("change")},d.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",p.GetData(this.$element[0],"old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),p.RemoveData(this.$element[0]),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},d.prototype.render=function(){var e=o('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return e.attr("dir",this.options.get("dir")),this.$container=e,this.$container.addClass("select2-container--"+this.options.get("theme")),p.StoreData(e[0],"element",this.$element),e},d}),e.define("jquery-mousewheel",["jquery"],function(e){return e}),e.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults","./select2/utils"],function(o,e,a,t,s){if(null==o.fn.select2){var r=["open","close","destroy"];o.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var e=o.extend(!0,{},t);new a(o(this),e)}),this;if("string"!=typeof t)throw new Error("Invalid arguments for Select2: "+t);var n,i=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=s.GetData(this,"select2");null==e&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),n=e[t].apply(e,i)}),-1<o.inArray(t,r)?this:n}}return null==o.fn.select2.defaults&&(o.fn.select2.defaults=t),a}),{define:e.define,require:e.require}}(),t=e.require("jquery.select2");return p.fn.select2.amd=e,t}),QR8bitByte.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},QRCode.prototype={addData:function(e){var t=new QR8bitByte(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var t=QRRSBlock.getRSBlocks(e,this.errorCorrectLevel),n=new QRBitBuffer,i=0,o=0;o<t.length;o++)i+=t[o].dataCount;for(o=0;o<this.dataList.length;o++){var a=this.dataList[o];n.put(a.mode,4),n.put(a.getLength(),QRUtil.getLengthInBits(a.mode,e)),a.write(n)}if(n.getLengthInBits()<=8*i)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[n][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),7<=this.typeNumber&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=QRCode.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var n=-1;n<=7;n++)if(!(e+n<=-1||this.moduleCount<=e+n))for(var i=-1;i<=7;i++)t+i<=-1||this.moduleCount<=t+i||(this.modules[e+n][t+i]=0<=n&&n<=6&&(0==i||6==i)||0<=i&&i<=6&&(0==n||6==n)||2<=n&&n<=4&&2<=i&&i<=4)},getBestMaskPattern:function(){for(var e=0,t=0,n=0;n<8;n++){this.makeImpl(!0,n);var i=QRUtil.getLostPoint(this);(0==n||i<e)&&(e=i,t=n)}return t},createMovieClip:function(e,t,n){var i=e.createEmptyMovieClip(t,n);this.make();for(var o=0;o<this.modules.length;o++)for(var a=1*o,s=0;s<this.modules[o].length;s++){var r=1*s;this.modules[o][s]&&(i.beginFill(0,100),i.moveTo(r,a),i.lineTo(1+r,a),i.lineTo(1+r,1+a),i.lineTo(r,1+a),i.endFill())}return i},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=QRUtil.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var n=0;n<e.length;n++){var i=e[t],o=e[n];if(null==this.modules[i][o])for(var a=-2;a<=2;a++)for(var s=-2;s<=2;s++)this.modules[i+a][o+s]=-2==a||2==a||-2==s||2==s||0==a&&0==s}},setupTypeNumber:function(e){for(var t=QRUtil.getBCHTypeNumber(this.typeNumber),n=0;n<18;n++){var i=!e&&1==(t>>n&1);this.modules[Math.floor(n/3)][n%3+this.moduleCount-8-3]=i}for(n=0;n<18;n++){i=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=i}},setupTypeInfo:function(e,t){for(var n=this.errorCorrectLevel<<3|t,i=QRUtil.getBCHTypeInfo(n),o=0;o<15;o++){var a=!e&&1==(i>>o&1);o<6?this.modules[o][8]=a:o<8?this.modules[o+1][8]=a:this.modules[this.moduleCount-15+o][8]=a}for(o=0;o<15;o++){a=!e&&1==(i>>o&1);o<8?this.modules[8][this.moduleCount-o-1]=a:o<9?this.modules[8][15-o-1+1]=a:this.modules[8][15-o-1]=a}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var n=-1,i=this.moduleCount-1,o=7,a=0,s=this.moduleCount-1;0<s;s-=2)for(6==s&&s--;;){for(var r=0;r<2;r++)if(null==this.modules[i][s-r]){var l=!1;a<e.length&&(l=1==(e[a]>>>o&1)),QRUtil.getMask(t,i,s-r)&&(l=!l),this.modules[i][s-r]=l,-1==--o&&(a++,o=7)}if((i+=n)<0||this.moduleCount<=i){i-=n,n=-n;break}}}},QRCode.PAD0=236,QRCode.PAD1=17,QRCode.createData=function(e,t,n){for(var i=QRRSBlock.getRSBlocks(e,t),o=new QRBitBuffer,a=0;a<n.length;a++){var s=n[a];o.put(s.mode,4),o.put(s.getLength(),QRUtil.getLengthInBits(s.mode,e)),s.write(o)}var r=0;for(a=0;a<i.length;a++)r+=i[a].dataCount;if(o.getLengthInBits()>8*r)throw new Error("code length overflow. ("+o.getLengthInBits()+">"+8*r+")");for(o.getLengthInBits()+4<=8*r&&o.put(0,4);o.getLengthInBits()%8!=0;)o.putBit(!1);for(;!(o.getLengthInBits()>=8*r||(o.put(QRCode.PAD0,8),o.getLengthInBits()>=8*r));)o.put(QRCode.PAD1,8);return QRCode.createBytes(o,i)},QRCode.createBytes=function(e,t){for(var n=0,i=0,o=0,a=new Array(t.length),s=new Array(t.length),r=0;r<t.length;r++){var l=t[r].dataCount,c=t[r].totalCount-l;i=Math.max(i,l),o=Math.max(o,c),a[r]=new Array(l);for(var p=0;p<a[r].length;p++)a[r][p]=255&e.buffer[p+n];n+=l;var d=QRUtil.getErrorCorrectPolynomial(c),u=new QRPolynomial(a[r],d.getLength()-1).mod(d);s[r]=new Array(d.getLength()-1);for(p=0;p<s[r].length;p++){var h=p+u.getLength()-s[r].length;s[r][p]=0<=h?u.get(h):0}}var m=0;for(p=0;p<t.length;p++)m+=t[p].totalCount;var f=new Array(m),g=0;for(p=0;p<i;p++)for(r=0;r<t.length;r++)p<a[r].length&&(f[g++]=a[r][p]);for(p=0;p<o;p++)for(r=0;r<t.length;r++)p<s[r].length&&(f[g++]=s[r][p]);return f};for(var QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;0<=QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G15);)t^=QRUtil.G15<<QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G15);return(e<<10|t)^QRUtil.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;0<=QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G18);)t^=QRUtil.G18<<QRUtil.getBCHDigit(t)-QRUtil.getBCHDigit(QRUtil.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return QRUtil.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,n){switch(e){case QRMaskPattern.PATTERN000:return(t+n)%2==0;case QRMaskPattern.PATTERN001:return t%2==0;case QRMaskPattern.PATTERN010:return n%3==0;case QRMaskPattern.PATTERN011:return(t+n)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(t/2)+Math.floor(n/3))%2==0;case QRMaskPattern.PATTERN101:return t*n%2+t*n%3==0;case QRMaskPattern.PATTERN110:return(t*n%2+t*n%3)%2==0;case QRMaskPattern.PATTERN111:return(t*n%3+(t+n)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new QRPolynomial([1],0),n=0;n<e;n++)t=t.multiply(new QRPolynomial([1,QRMath.gexp(n)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),n=0,i=0;i<t;i++)for(var o=0;o<t;o++){for(var a=0,s=e.isDark(i,o),r=-1;r<=1;r++)if(!(i+r<0||t<=i+r))for(var l=-1;l<=1;l++)o+l<0||t<=o+l||0==r&&0==l||s==e.isDark(i+r,o+l)&&a++;5<a&&(n+=3+a-5)}for(i=0;i<t-1;i++)for(o=0;o<t-1;o++){var c=0;e.isDark(i,o)&&c++,e.isDark(i+1,o)&&c++,e.isDark(i,o+1)&&c++,e.isDark(i+1,o+1)&&c++,0!=c&&4!=c||(n+=3)}for(i=0;i<t;i++)for(o=0;o<t-6;o++)e.isDark(i,o)&&!e.isDark(i,o+1)&&e.isDark(i,o+2)&&e.isDark(i,o+3)&&e.isDark(i,o+4)&&!e.isDark(i,o+5)&&e.isDark(i,o+6)&&(n+=40);for(o=0;o<t;o++)for(i=0;i<t-6;i++)e.isDark(i,o)&&!e.isDark(i+1,o)&&e.isDark(i+2,o)&&e.isDark(i+3,o)&&e.isDark(i+4,o)&&!e.isDark(i+5,o)&&e.isDark(i+6,o)&&(n+=40);var p=0;for(o=0;o<t;o++)for(i=0;i<t;i++)e.isDark(i,o)&&p++;return n+=10*(Math.abs(100*p/t/t-50)/5)}},QRMath={glog:function(e){if(e<1)throw new Error("glog("+e+")");return QRMath.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;256<=e;)e-=255;return QRMath.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i=0;i<8;i++)QRMath.EXP_TABLE[i]=1<<i;for(i=8;i<256;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(i=0;i<255;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;function QRPolynomial(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var n=0;n<e.length&&0==e[n];)n++;this.num=new Array(e.length-n+t);for(var i=0;i<e.length-n;i++)this.num[i]=e[i+n]}function QRRSBlock(e,t){this.totalCount=e,this.dataCount=t}function QRBitBuffer(){this.buffer=new Array,this.length=0}QRPolynomial.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),n=0;n<this.getLength();n++)for(var i=0;i<e.getLength();i++)t[n+i]^=QRMath.gexp(QRMath.glog(this.get(n))+QRMath.glog(e.get(i)));return new QRPolynomial(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=QRMath.glog(this.get(0))-QRMath.glog(e.get(0)),n=new Array(this.getLength()),i=0;i<this.getLength();i++)n[i]=this.get(i);for(i=0;i<e.getLength();i++)n[i]^=QRMath.gexp(QRMath.glog(e.get(i))+t);return new QRPolynomial(n,0).mod(e)}},QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],QRRSBlock.getRSBlocks=function(e,t){var n=QRRSBlock.getRsBlockTable(e,t);if(null==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var i=n.length/3,o=new Array,a=0;a<i;a++)for(var s=n[3*a+0],r=n[3*a+1],l=n[3*a+2],c=0;c<s;c++)o.push(new QRRSBlock(r,l));return o},QRRSBlock.getRsBlockTable=function(e,t){switch(t){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[4*(e-1)+3];default:return}},QRBitBuffer.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var n=0;n<t;n++)this.putBit(1==(e>>>t-n-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},function(r){r.fn.qrcode=function(c){"string"==typeof c&&(c={text:c}),c=r.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:QRErrorCorrectLevel.H,background:"#ffffff",foreground:"#000000"},c);return this.each(function(){var e="canvas"==c.render?function(){var e=new QRCode(c.typeNumber,c.correctLevel);e.addData(c.text),e.make();var t=document.createElement("canvas");t.width=c.width,t.height=c.height;for(var n=t.getContext("2d"),i=c.width/e.getModuleCount(),o=c.height/e.getModuleCount(),a=0;a<e.getModuleCount();a++)for(var s=0;s<e.getModuleCount();s++){n.fillStyle=e.isDark(a,s)?c.foreground:c.background;var r=Math.ceil((s+1)*i)-Math.floor(s*i),l=Math.ceil((a+1)*o)-Math.floor(a*o);n.fillRect(Math.round(s*i),Math.round(a*o),r,l)}return t}():function(){var e=new QRCode(c.typeNumber,c.correctLevel);e.addData(c.text),e.make();for(var t=r("<table></table>").css("width",c.width+"px").css("height",c.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",c.background),n=c.width/e.getModuleCount(),i=c.height/e.getModuleCount(),o=0;o<e.getModuleCount();o++)for(var a=r("<tr></tr>").css("height",i+"px").appendTo(t),s=0;s<e.getModuleCount();s++)r("<td></td>").css("width",n+"px").css("background-color",e.isDark(o,s)?c.foreground:c.background).appendTo(a);return t}();r(e).appendTo(this)})}}(jQuery);