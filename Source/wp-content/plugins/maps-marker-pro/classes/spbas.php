<?php // Before trying to crack the plugin, please consider buying a pro license at https://www.mapsmarker.com/order - we have put hundreds of hours into the development of our plugin and without honest customers we will not be able to continue the development and support. Thanks for your understanding and your honesty!
namespace MMP; class SPBAS { public $l0; public $O0; public $l1; public $O1; public $l2; public $O2; public $l3; public $O3; public $l4; public $O4; public $l5; public $O5; public $l6; public $O6; public $l7; public $O7; public $l8; public $O8; public $l9; function __construct() { $this->l0 ="e1708152\06651a"; $this->O0 =FALSE; $this->l1 =""; $this->O2 =0120; $this->l3 =012; $this->O9 =array("spbas"); $this->la ="spba\163"; $this->O3 ="fil\145\163\171stem"; $this->l6 =0; $this->O6 =0; $this->l4 =FALSE; $this->O4 =FALSE; $this->l5 =""; $this->O5 ="lice\156\163\145.txt"; $this->l7 =FALSE; $this->O7 =FALSE; $this->l9 =FALSE; $this->l8 =array("custom\137fiel\144\163" => array(),"do\167\156\154oad_acce\163\163\137expires" => 0,"lic\145\156\163e_expir\145\163" => 0,"local_ke\171\137\145xpires" => 0,"\163\164\141tus" => "\111nvalid",); $this->O8 =array("\141\143tive" => __("\124his lic\145\156\163e is a\143\164\151ve.","\155\155\160"),"suspended" => sprintf(__("Error: \124\150\151s lice\156\163\145 has be\145\156\040susp\145\156\144ed. Th\151\163\040usual\154\171\040happe\156\163\040when\040\163omeone\040\164ries to\040\162egiste\162\040\141 sec\157\156\144 tria\154\040\154icen\163\145\040for \164\150\145 sam\145\040\144omain\056\040<a hr\145\146\075\042%\061\163\042 ta\162\147et=\042\137\142\154ank\042\076\120leas\145\040click \150\145\162e to\040\147et a \156\157n-exp\151\162\151ng \154\151\143ense\040\146or th\151\163 doma\151\156\056</a\076","\155\155p"),"\150\164\164ps://ww\167\056\155apsmar\153\145\162.com/or\144\145r"),"\145\170pired" => sprintf(__("\131\157\165r free 3\060\040\144ay tri\141\154\040licens\145\040key has \145\170\160ired. \074\141\040href=\042\0451s\042 \164\141\162get=\042\137\142lank\042\076\120lease \160\165\162chase\040\141 valid \160\162\157 lice\156\163\145 key \164\157\040cont\151\156ue</a>\056","mmp"),"\150\164\164ps://w\167\167\056mapsmar\153\145\162.com/or\144\145\162"),"pend\151\156\147" => __("\105rror: T\150\151\163 licens\145\040\151s pendi\156\147\040revie\167\056","m\155\160"),"\144\157wnload_\141\143\143ess_exp\151\162\145d" => __("Error: T\150\151\163 versio\156\040\157f the \163\157\146tware\040\167\141s rele\141\163\145d aft\145\162\040your \144\157wnload\040\141ccess \145\170\160ired.\040\120lease \162\145\156ew y\157\165\162 down\154\157\141d and\040\163upport\040\141\143cess\040\157r down\147\162\141de t\157\040\141 pre\166\151\157us v\145\162\163ion.","\155\155p"),"missing\137\154\151cense_ke\171" => __("Ple\141\163\145 enter a\040\154\151cense \153\145\171 to co\156\164\151nue.","\155\155p"),"\165nknown_lo\143\141\154_key_ty\160\145" => __("E\162\162\157r: An u\156\153\156own typ\145\040\157f loca\154\040\153ey va\154\151\144ation \167\141\163 reque\163\164\145d.","\155\155\160"),"could_no\164\137\157btain_lo\143\141\154_key" => sprintf(__("Er\162\157\162: a new \154\157\143al lice\156\163\145 key co\165\154\144 not b\145\040\157btaine\144\056\040Plea\163\145\040see \045\163\040for \155\157\162e inf\157\162\155ation","\155\155\160"),"<a hr\145\146\075\042htt\160\163\072//www.\155\141\160smarke\162\056\143om/co\156\156\145ct-err\157\162\163\042 t\141\162\147et=\042\137\142lank\042\076\155apsmar\153\145\162.com/\143\157\156nect-\145\162\162ors</\141\076"),"\155aximum_\147\162\141ce_peri\157\144\137expire\144" => __("\105rror: T\150\145\040maximu\155\040\154ocal l\151\143\145nse ke\171\040\147race p\145\162\151od has\040\145\170pired\056","\155mp"),"\154ocal_key\137\164\141mpering" => __("\105\162ror: The\040\154\157cal li\143\145\156se key\040\150\141s bee\156\040\164amper\145\144\040with \157\162\040is in\166\141\154id.","\155mp"),"\154\157cal_ke\171\137\151nvalid_\146\157\162_locatio\156" => __("\105\162\162or: The\040\154\157cal lic\145\156\163e key i\163\040\151nvali\144\040\146or th\151\163\040locat\151\157\156.","m\155\160"),"\155\151\163sing_l\151\143\145nse_fil\145" => __("Err\157\162\072 Please\040\143\162eate t\150\145\040follow\151\156\147 file \050\141\156d dire\143\164\157ries \151\146\040they\040\144\157 not\040\145\170ist a\154\162\145ady):\074\142r />\134\162\134\156<br \057\076\134r\134\156","\155\155\160"),"\154\151cense_fi\154\145\137not_wri\164\141\142le" => __("Error:\040\120\154ease m\141\153\145 the fo\154\154\157wing p\141\164\150 writa\142\154\145:<br /\076","\155\155\160"),"\151nvalid_\154\157\143al_key_\163\164\157rage" => __("\105rror: the\040\154\157cal ke\171\040\163torage \157\156\040clear\040\143\157uld no\164\040\144etermi\156\145\144.","mmp"),"could_n\157\164\137save_lo\143\141\154_key" => __("\105rror: t\150\145\040local l\151\143\145nse key\040\143\157uld no\164\040\163aved.","mmp"),"license_\153\145\171_strin\147\137\155ismatch" => __("Error: Th\145\040\154ocal k\145\171\040is inv\141\154\151d for \164\150\151s licen\163\145\056","mmp"),); $this->localization =array("a\143\164\151ve" => __("This lice\156\163\145 is acti\166\145\056","mmp"),"suspended" => sprintf(__("Err\157\162\072 This l\151\143\145nse has\040\142\145en sus\160\145\156ded. T\150\151\163 usuall\171\040\150appen\163\040\167hen \163\157\155eone \164\162\151es to\040\162\145giste\162\040a secon\144\040trial \154\151\143ense \146\157\162 the \163\141\155e dom\141\151\156. <a\040\150ref=\042\045\061s\042 t\141\162\147et=\042\137\142lank\042\076\120leas\145\040click \150\145\162e to\040\147et a \156\157\156-exp\151\162\151ng l\151\143ense f\157\162 this \144\157main.\074\057a>","\155\155p"),"ht\164\160\163://www.m\141\160\163marker.\143\157\155/order"),"\145xpired" => sprintf(__("\131our free \063\060\040day t\162\151\141l lice\156\163\145 key h\141\163\040expire\144\056\040<a h\162\145\146=\042%\061\163\042 tar\147\145\164=\042_\142\154\141nk\042\076\120\154ease\040\160\165rchas\145\040a valid\040\160ro lic\145\156\163e ke\171\040\164o co\156\164\151nue</\141\076.","\155\155p"),"https:\057\057\167ww.map\163\155\141rker.co\155\057\157rder"),"\160ending" => __("\105\162ror: This\040\154\151cense\040\151\163 pendin\147\040\162eview.","\155mp"),"\144ownloa\144\137\141ccess_ex\160\151\162ed" => __("Error: T\150\151\163 versio\156\040\157f the s\157\146\164ware w\141\163\040releas\145\144\040after\040\171\157ur do\167\156\154oad a\143\143\145ss ex\160\151\162ed. P\154\145\141se re\156\145\167 your\040\144\157wnloa\144\040and su\160\160\157rt ac\143\145\163s or\040\144owngra\144\145\040to a\040\160reviou\163\040\166ersi\157\156\056","m\155\160")); } function init() { add_action("\141dmin_i\156\151\164",array($this,"check_\154\151\143ense")); } function validate() { if (!$this->O1) { return $this->O0 =$this->O8["mis\163\151\156g_licen\163\145\137key"]; } if (!in_array(strtolower($this->la),$this->O9)) { return $this->O0 =$this->O8["unkno\167\156\137local_k\145\171\137type"]; } $this->Oa =$this->O8["\143\157\165ld_not\137\157\142tain_lo\143\141\154_key"]; switch ($this->O3) { case "database": $lb=$this->Ob(); break; case "\146\151lesyst\145\155": $lb=$this->lc(); break; default : return $this->O0 =$this->O8["missin\147\137licens\145\137\153ey"]; } if ($this->O0 == $this->Oa && $this->l6) { $Oc=$this->ld($this->O6); if ($Oc["wri\164\145"]) { if ($this->O3 == "\144\141tabase") { $this->Od($Oc["\154\157cal_key"]); } elseif ($this->O3 == "\146ilesy\163\164\145m") { $this->le($Oc["\154\157\143\141l_key"],"{$this->l5}{$this->O5}"); } } if ($Oc["erro\162\163"]) { return $this->O0 =$Oc["erro\162\163"]; } $this->O0 =FALSE; return $this; } if ($this->O0) { return $this->O0; } return $this->Oe($lb); } function lf($Of,$Oc) { return (( integer) $Of+(( integer) $Oc*0250600)); } function ld($lb) { $lg=$this->Og($lb); $lh=$this->Oh($lg); $l8=unserialize($lh[0]); $Of=( integer) $l8["local_ke\171\137\145xpires"]; unset ($lh,$l8); $Oi=FALSE; $lh=explode("\012\012",$lb); $lb=$lh[0]; foreach ($l6=explode(",",$this->l6) as $lj => $Oc) { if (!$lj) { $lb.="\012"; } if ($this->lf($Of,$Oc)>time()) { continue; } $lb.= "\012{$Oc}"; $Oi=TRUE; } if (time()>$this->lf($Of,array_pop($l6))) { return array("\167rite" => FALSE,"\154\157\143al_key" => "","errors" => $this->O8["maximum_g\162\141\143e_perio\144\137\145xpired"]); } return array("\167\162\151te" => $Oi,"\154\157cal_key" => $lb,"\145\162\162ors" => FALSE); } function Oj($lb,$Of) { $Oc=$this->Oh($lb,"\012\012"); if (! isset ($Oc[1])) { return -1; } return ( integer)($this->lf($Of,array_pop(explode("\012",$Oc[1])))-time()); } function Og($lb) { return base64_decode(str_replace("\012","",urldecode($lb))); } function Oh($lb,$lk="\173spba\163\175") { return explode($lk,$lb); } function Ok($lj,$ll) { return in_array($lj,(array) $ll); } function wildcard_ip($lj) { $octets=explode("\056",$lj); array_pop($octets); $ip_range[]=implode("\056",$octets).".*"; array_pop($octets); $ip_range[]=implode("\056",$octets)."\056\052"; array_pop($octets); $ip_range[]=implode("\056",$octets)."\056\052"; return $ip_range; } function wildcard_domain($lj) { return "*.".str_replace("\167\167w.","",$lj); } function wildcard_server_hostname($lj) { $hostname=explode("\056",$lj); unset ($hostname[0]); $hostname=(! isset ($hostname[1])) ? array($lj): $hostname; return "*\056".implode("\056",$hostname); } function extract_access_set($instances,$enforce) { foreach ($instances as $lj => $instance) { if ($lj != $enforce) { continue; } return $instance; } return array(); } function Oe($lb) { $lg=$this->Og($lb); $lh=$this->Oh($lg); if (! isset ($lh[1])) { return $this->O0 =$this->O8["\154ocal_\153\145\171_tampe\162\151\156g"]; } if (md5($this->lm.$lh[0]) != $lh[1]) { return $this->O0 =$this->O8["loca\154\137\153ey_tam\160\145\162ing"]; } $l8=unserialize($lh[0]); $instance=$l8["\151\156\163tance"]; unset ($l8["ins\164\141\156ce"]); $enforce=$l8["\145\156force"]; unset ($l8["enforc\145"]); $this->l8 =$l8; if (( string) $l8["\154icense_ke\171\137\163tring"] != ( string) $this->O1) { return $this->O0 =$this->O8["license_\153\145\171_string\137\155\151smatch"]; } if (( string) $l8["st\141\164\165s"] != "\141\143\164ive") { return $this->O0 =$this->O8[$l8["sta\164\165\163"]]; } if (( string) $l8["lice\156\163\145_expire\163"] != "ne\166\145\162" && ( integer) $l8["licens\145\137\145xpires"]<time()) { return $this->O0 =$this->O8["expire\144"]; } if (( string) $l8["\154ocal_k\145\171\137expires"] != "never" && ( integer) $l8["local_ke\171\137\145xpires"]<time()) { if ($this->Oj($lb,$l8["\154ocal_\153\145\171_expires"])<0) { $this->Om(TRUE); switch ($this->O3) { case "dat\141\142\141se": $lb=$this->Ob(); break; case "file\163\171\163tem": $lb=$this->lc(); break; default : return $this->O0 =$this->O8["\155\151\163sing_l\151\143\145nse_ke\171"]; } } } if ($this->l7 && ( integer) $l8["d\157\167\156load_ac\143\145\163s_expi\162\145\163"]<strtotime($this->O7)) { return $this->O0 =$this->O8["d\157\167\156load_acc\145\163\163_expire\144"]; } $conflicts=array(); $ln=$this->On(); foreach ((array) $enforce as $lj) { $ll=$this->extract_access_set($instance,$lj); if (!$this->Ok($ln[$lj],$ll)) { $conflicts[$lj]=TRUE; if (in_array($lj,array("ip","\163\145rver_ip"))) { foreach ($this->wildcard_ip($ln[$lj]) as $ip) { if ($this->Ok($ip,$ll)) { unset ($conflicts[$lj]); break; } } } elseif (in_array($lj,array("\144\157main"))) { if ($this->Ok($this->wildcard_domain($ln[$lj]),$ll)) { unset ($conflicts[$lj]); } } elseif (in_array($lj,array("\163erver\137\150\157stname"))) { if ($this->Ok($this->wildcard_server_hostname($ln[$lj]),$ll)) { unset ($conflicts[$lj]); } } } } if (!empty($conflicts)) { return $this->O0 =$this->O8["local_\153\145\171_inval\151\144\137for_lo\143\141\164ion"]; } } function Ob() { $lo=array(); if (is_array($this->l4)) { $lo=$this->l4; } else { $query=@mysqli_query($this->l4); if ($mysql_error=mysqli_error()) { return $this->O0 = "\105rror: {$mysql_error}"; } $lo=@mysqli_fetch_assoc($query); if ($mysql_error=mysqli_error()) { return $this->O0 = "Erro\162\072 {$mysql_error}"; } } if (!$lo["l\157\143\141l_key"]) { $lo["\154\157\143al_key"]=$this->Oo(); if ($this->O0) { return $this->O0; } $this->Od($lo["\154\157\143al_key"]); } return $this->O6 =$lo["\154ocal_k\145\171"]; } function Od($lb) { if (is_array($this->O4)) { $lp=$this->O4["\146\165nction"]; return $lp($this->O4["ke\171"],$lb); }@mysqli_query(str_replace("\173local_key\175",$lb,$this->O4)); if ($mysql_error=mysqli_error()) { return $this->O0 = "E\162\162\157r: {$mysql_error}"; } return TRUE; } function lc() { if (!file_exists($path= "{$this->l5}{$this->O5}")) { return $this->O0 =$this->O8["\155\151ssing_lic\145\156\163e_file"].$path; } if (!is_writable($path)) { return $this->O0 =$this->O8["\154\151\143ense_f\151\154\145_not_wri\164\141\142le"].$path; } if (!$lb=@file_get_contents($path)) { $lb=$this->Oo(); if ($this->O0) { return $this->O0; } $this->le(urldecode($lb),$path); } return $this->O6 =$lb; } function Om($clear=FALSE) { switch (strtolower($this->O3)) { case "datab\141\163\145": $this->Od(""); break; case "\146\151\154esyste\155": $this->le("","{$this->l5}{$this->O5}"); break; default : return $this->O0 =$this->O8["invalid\137\154\157cal_ke\171\137\163torage"]; } } function le($lb,$path) { $fp=@fopen($path,"\167"); if (!$fp) { return $this->O0 =$this->O8["could_not\137\163\141ve_loca\154\137\153ey"]; }@fwrite($fp,$lb); @fclose($fp); return TRUE; } function Oo() { $querystring= "\155\157d=licen\163\145\046task=S\120\102\101S_valid\141\164\145_licens\145\046\154icens\145\137\153ey={$this->O1}&"; $querystring.=$this->build_querystring($this->On()); if ($this->O0) { return FALSE; } $lo=$this->Op($this->l2 ,$querystring); if (strtolower(substr($lo,0,021)) == "\143onnectio\156\040\145rror:") { $this->l1 =$lo; return FALSE; } if (!$lo) { $this->O0 =$this->O8["\143\157uld_no\164\137\157btain_l\157\143\141l_key"]; return FALSE; } if (substr($lo,0,7) == "Inv\141\154\151d") { $this->O0 =str_replace("\111\156\166alid","Error",$lo); return FALSE; } if (substr($lo,0,5) == "\105\162\162or") { $this->O0 =$lo; return FALSE; } return $lo; } function build_querystring($array) { $buffer=""; foreach ((array) $array as $lj => $value) { if ($buffer) { $buffer.="&"; } $buffer.= "{$lj}\075{$value}"; } return $buffer; } function On() { $ln=array(); $ln["doma\151\156"]=""; $ln["\151\160"]="ip-not-\164\162\141nsmitte\144"; $ln["directo\162\171"]="\144\151rectory\055\156\157t-tra\156\163\155itted"; $ln["server\137\150\157stname"]="\163\145\162ver_hos\164\156\141me-not-t\162\141\156smitte\144"; $ln["ser\166\145\162_ip"]="server_\151\160\055not-tran\163\155\151tted"; $ln["valid_fo\162\137\160roduct_\164\151\145rs"]=""; if (!defined( "HHVM_VERSION")) { if (!extension_loaded("su\150\157\163in")) { if (!defined( "SUHOSIN_PATCH")) { if (function_exists("\160hpinfo")) { ob_start(); phpinfo(INFO_GENERAL); phpinfo(INFO_ENVIRONMENT); $phpinfo=ob_get_contents(); ob_end_clean(); $list=strip_tags($phpinfo); $ln["\144\157\155ain"]=$this->scrape_phpinfo($list,"\110\124TP_HOST"); } } } } $ln["domain"]=($ln["domain"]) ? $ln["\144omain"]: $_SERVER["\110TTP_HOS\124"]; foreach ($ln as $lj => $value) { if ($lj == "valid\137\146\157r_produ\143\164\137tiers") { continue; } $ln[$lj]=($ln[$lj]) ? $ln[$lj]: "Unknow\156"; } if ($this->l9) { $ln["valid_\146\157\162_produc\164\137\164iers"]=$this->l9; } if ( isset ($_POST["\154\145afletmap\163\155\141rkerpro\137\144\157main_to\137\141\143tivate"])) { if (parse_url($_POST["lea\146\154\145tmapsm\141\162\153erpro_d\157\155\141in_to_\141\143\164ivate"],PHP_URL_HOST) != NULL) { $ln["domain"]=parse_url($_POST["l\145\141\146letmaps\155\141\162kerpro_\144\157\155ain_to\137\141\143tivate"],PHP_URL_HOST); } else { $lq="/^(([\060\0559]|[1-9]\133\060\0559]|1[0\055\071\135\1732}\174\062\1330-4][0\055\071]|25[0-5\135\051\134.)\173\063\175\050[0-9\135\174\1331-9][\060\0559]|1[0\055\071]\1732}|\062\133\060-4][\060\0559]|25[\060\055\065])\044\057"; $Oq="/\136\050\050[a-zA-\132\060\0559]|[a-\172\101\055Z0-9][\141\055\172A-Z0-\071\134\055]*[a-\172\101\055Z0-9]\051\134\056)*([A\055\132a-z0-9]\174\133A-Za-z0\055\071][A-Za\055\172\060-9\134\055\135*[A-Za\055\172\060-9])\044\057"; $lr=trim($_POST["\154eafletm\141\160\163markerp\162\157\137domai\156\137\164o_acti\166\141\164e"]); if ((preg_match($lq,$lr) == TRUE) || (preg_match($Oq,$lr) == TRUE)) { $ln["domain"]=trim($_POST["\154\145afletmap\163\155\141rkerpr\157\137\144omain_t\157\137\141ctivat\145"]); } else if (trim($_POST["\154\145afletma\160\163\155arkerpr\157\137\144omain_t\157\137\141ctivate"]) == "l\157\143\141lhost") { $ln["\144omain"]="localho\163\164"; } } } return $ln; } function path_translated() { $option=array("PAT\110\137\124RANSLAT\105\104","||IG_P\101\124\110_TRANSLA\124\105\104","SCRI\120\124\137FILENAME","DOCU\115\105\116T_ROOT","APPL_P\110\131\123ICAL_PA\124\110"); foreach ($option as $lj) { if (! isset ($_SERVER[$lj]) || strlen(trim($_SERVER[$lj]))<=0) { continue; } if ($this->is_windows() && strpos($_SERVER[$lj],"\134")) { return @substr($_SERVER[$lj],0,@strrpos($_SERVER[$lj],"\134")); } return @substr($_SERVER[$lj],0,@strrpos($_SERVER[$lj],"\057")); } return FALSE; } function server_addr() { $options=array("\123ERVER_A\104\104\122","LOCAL_AD\104\122"); foreach ($options as $lj) { if ( isset ($_SERVER[$lj])) { return $_SERVER[$lj]; } } return FALSE; } function scrape_phpinfo($all,$target) { $all=explode($target,$all); if (count($all)<2) { return FALSE; } $all=explode("\012",$all[1]); $all=trim($all[0]); if ($target == "\123\171\163tem") { $all=explode(" ",$all); $all=trim($all[(strtolower($all[0]) == "win\144\157\167s" && strtolower($all[1]) == "nt") ? 2: 1]); } if ($target == "SCRIPT_FI\114\105\116AME") { $slash=($this->is_windows() ? "\134": "/"); $all=explode($slash,$all); array_pop($all); $all=implode($slash,$all); } if (substr($all,1,1) == "]") { return FALSE; } return $all; } function Op($url,$querystring) { $lo=wp_remote_get($url."\077".$querystring,array("\164imeout" => 012)); if (is_wp_error($lo) || ( isset ($lo["response"]["code"]) && ( integer) $lo["\162\145\163ponse"]["cod\145"] != 0310)) { $url="http\163\072\057/www.m\141\160\163marker\160\162\157.com/pr\157\170\171.php?".$querystring; $lo=wp_remote_get($url."\077".$querystring,array("t\151\155\145out" => 012)); } if (is_wp_error($lo)) { $ls="\103onnection\040\145\162ror: ".$lo->get_error_message()."\074br/>".sprintf(__("Er\162\157\162: a new\040\154\157cal li\143\145\156se key \143\157\165ld not\040\142\145 obta\151\156\145d. Ple\141\163\145 see \045\163\040for \155\157\162e inf\157\162\155ation","\155mp"),"\074\141\040href=\042\150\164tps://w\167\167\056mapsmar\153\145\162.com/c\157\156\156ect-err\157\162\163\042 t\141\162\147et=\042\137\142lank\042\076\155apsmar\153\145\162.com/\143\157\156nect\055\145\162rors<\057\141>"); return $ls; } else { if (( integer) $lo["\162espons\145"]["\143\157de"] == 0310) { return $lo["body"]; } else { $ls="\103\157nnectio\156\040\145rror: \110\124\124P statu\163\040\143ode ".$lo["response"]["cod\145"]." -\040".$lo["body"]; return $ls; } } } function is_windows() { $Os=explode("\054",ini_get("\144isable_\146\165\156ctions")); foreach ($Os as $lt) { $Ot[]=trim($lt); } if (!in_array("php_\165\156\141me",$Ot)) { return (strtolower(substr(php_uname(),0,7)) == "windo\167\163"); } else { return (stristr( PHP_OS ,"\127\111\116")); } } function pr($stack,$lu=TRUE) { $formatted="\074pre>".var_export((array) $stack,1)."\074/pre>"; if ($lu) { exit ($formatted); } return $formatted; } function Ou() { return (substr($_SERVER["REMOTE_A\104\104\122"],0,4) === "\061\0627." || $_SERVER["\122\105\115OTE_ADD\122"] === "::1"); } function check_localhost_compatibility() { return (substr($_SERVER["\122\105\115OTE_ADD\122"],0,4) === "\06127." || $_SERVER["RE\115\117\124E_ADDR"] === "\072:1"); } function lv($Ov,$is_theme=FALSE) { $lw=""; if ( isset ($_GET["p\141\147\145"])) { $lw=$_GET["\160\141ge"]; } elseif ( isset ($_POST["page"])) { $lw=$_POST["\160age"]; } $Ow=in_array($lw,$Ov); if ($is_theme) { return $Ow; } $lx=in_array(plugin_basename( __FILE__),get_option("ac\164\151\166e_plugi\156\163")); return ($Ow && $lx); } function Ox($ly=FALSE) { $this->O0 =FALSE; $this->O3 ="\144\141tabase"; $this->l4 =array("\154ocal_key" => get_option("mapsma\162\153\145rpro_ke\171\137\154ocal")); $this->O4 =array("funct\151\157\156" => "update_op\164\151\157n","\153\145\171" => "\155\141psmarke\162\160\162o_key_l\157\143\141l"); $this->l6 ="1,2\054\063\0544,5,6\054\067\0548,9,1\060"; $this->O1 =get_option("\155apsmarker\160\162\157_key"); $this->lm ="7ca9\071\145\06156b5e3\060\145\060648f4\071\142\0701178cd\067\145"; $this->l2 ="\150\164\164ps://www\056\155\141psmark\145\162\056com/st\157\162\145/api/\151\156\144ex.php"; $this->validate(); if ($ly) { return $this; } $Ov=array("\155\141\160smarker\160\162\157_maps","\155\141\160smarker\160\162\157_map","map\163\155\141rkerpro_\155\141\162kers","ma\160\163\155\141rkerpr\157\137\155arker","ma\160\163\155arkerpro\137\164\157ols","mapsm\141\162\153erpro_se\164\164\151ngs"); if (is_admin() && $this->lv($Ov,TRUE) && $this->O0) { return $this->O0; } return TRUE; } function Oy($O7=FALSE,$lz=FALSE) { $this->O7 =($O7) ? strrev(substr($this->l0 ,1,012)): time(); $this->O3 ="databa\163\145"; $this->l4 =array("\154\157\143al_ke\171" => get_option("m\141\160\163markerp\162\157\137key_lo\143\141\154")); $this->O4 =array("functio\156" => "u\160\144\141te_opti\157\156","key" => "mapsma\162\153\145rpro_ke\171\137\154ocal"); $this->l6 ="1,2,\063\054\064,5,6,\067\054\070,9,10"; $this->O1 =get_option("\155apsmar\153\145\162pro_ke\171"); $this->lm ="7\143\141\0719e156b\065\145\0630e0648\146\064\071b81178\143\144\067e"; $this->l2 ="\150\164tps://www\056\155\141psmark\145\162\056com/sto\162\145\057api/i\156\144\145x.php"; $this->validate(); if ($this->O0) { return FALSE; } if ($lz) { return TRUE; } if (!$this->Oz()) { if ($this->l8["\154icense_\145\170\160ires"] == "\156ever") { return FALSE; } if (time()>$this->l8["\154\151cense_\145\170\160ires"]) { return FALSE; } return TRUE; } $l10=max($this->l8["dow\156\154\157ad_acce\163\163\137expire\163"],$this->l8["\163\165pport_ac\143\145\163s_expi\162\145\163"]); if ($l10<$this->O7) { return FALSE; } return TRUE; } function check_for_updates($release_date_info=FALSE,$license_only_info=FALSE) { $this->release_date_info =($release_date_info) ? strrev(substr($this->l0 ,1,012)): time(); $this->O3 ="\144\141tabase"; $this->l4 =array("local_key" => get_option("\155apsmar\153\145\162pro_key_\154\157\143al")); $this->O4 =array("func\164\151\157n" => "\165pdate_o\160\164\151on","\153\145\171" => "\155\141psmark\145\162\160ro_key_\154\157\143al"); $this->l6 ="1\054\062\0543,4,5\054\066\0547,8,9\054\0610"; $this->O1 =get_option("\155apsmark\145\162\160ro_key"); $this->lm ="7ca99e1\065\066\1425e30e0\066\064\070f49b8\061\061\0678cd7e"; $this->l2 ="\150ttps://\167\167\167.mapsma\162\153\145r.com/\163\164\157re/api\057\151\156dex.ph\160"; $this->validate(); if ($this->O0) { return FALSE; } if ($license_only_info) { return TRUE; } if (!$this->Oz()) { if ($this->l8["license_e\170\160\151res"] == "\156\145ver") { return FALSE; } if (time()>$this->l8["\154\151cense_e\170\160\151res"]) { return FALSE; } return TRUE; } $expires_info=max($this->l8["\144\157wnload_\141\143\143ess_exp\151\162\145s"],$this->l8["\163upport_\141\143\143ess_exp\151\162\145s"]); if ($expires_info<$this->release_date_info) { return FALSE; } return TRUE; } function Oz($prefix="\115\141psMarke\162\120\162o-") { return substr(get_option("\155\141psmarke\162\160\162o_key"),0,strlen($prefix)) == $prefix; } function is_paid_version_info($prefix="\115\141psMarker\120\162\157-") { return substr(get_option("\155apsmarke\162\160\162o_key"),0,strlen($prefix)) == $prefix; } public function check_license() { $O10= isset ($_GET["page"]) ? $_GET["page"]: ""; $l11=array("mapsma\162\153\145rpro_ma\160\163","\155\141\160smarke\162\160\162o_map","m\141\160\163markerpr\157\137\155arkers","\155\141psmarker\160\162\157_marker","\155\141\160smarker\160\162\157_tools","ma\160\163\155arkerpro\137\163\145ttings",); if (in_array($O10,$l11) && !$this->Ou()) { if (!$this->Ox() || !$this->Oy(TRUE,FALSE)) { exit (header("\114\157\143ation:\040".get_admin_url(NULL,"ad\155\151\156.php?pag\145\075\155apsmar\153\145\162pro_lic\145\156\163e"))); } } } }